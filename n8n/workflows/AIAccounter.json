{
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.errorTrigger",
      "typeVersion": 1,
      "position": [
        16,
        -1640
      ],
      "id": "fbea2197-422e-4696-bda8-9296580641d4",
      "name": "Error Trigger"
    },
    {
      "parameters": {
        "jsCode": "// ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ\nconst error = $input.first().json;\nconst executionId = $execution.id;\nconst timestamp = new Date().toISOString();\n\n// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ\nconst errorMessage = error.message || error.error?.message || 'Unknown error';\nconst errorNode = error.node?.name || 'Unknown';\nconst errorType = error.error?.name || error.name || 'Error';\n\n// Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ Ğ»Ğ¾Ğ³ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸\nconst errorLog = {\n  execution_id: executionId,\n  timestamp: timestamp,\n  error_type: errorType,\n  error_message: errorMessage,\n  failed_node: errorNode,\n  workflow: 'AIAccounter'\n};\n\nconsole.log('âŒ Error in AIAccounter:', JSON.stringify(errorLog, null, 2));\n\n// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ Ñ‚Ğ¸Ğ¿ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ\nlet userMessage = 'âŒ ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°. ';\nlet shouldNotifyUser = true;\nlet chatId = null;\n\n// ĞŸÑ‹Ñ‚Ğ°ĞµĞ¼ÑÑ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ chat_id Ğ¸Ğ· ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°\ntry {\n  // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ chat_id\n  if (error.data?.message?.chat?.id) {\n    chatId = error.data.message.chat.id;\n  } else if (error.inputData?.[0]?.json?.chat_id) {\n    chatId = error.inputData[0].json.chat_id;\n  }\n} catch (e) {\n  console.log('Could not extract chat_id');\n}\n\n// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ Ñ‚Ğ¸Ğ¿Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸\nif (errorMessage.includes('rate limit') || errorMessage.includes('429')) {\n  userMessage = 'â³ Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ². ĞŸĞ¾Ğ´Ğ¾Ğ¶Ğ´Ğ¸ Ğ½ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ÑĞ½Ğ¾Ğ²Ğ°.';\n} else if (errorMessage.includes('timeout') || errorMessage.includes('ETIMEDOUT')) {\n  userMessage = 'â° Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ½Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ğ» Ğ²Ğ¾Ğ²Ñ€ĞµĞ¼Ñ. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ·.';\n} else if (errorMessage.includes('connection') || errorMessage.includes('ECONNREFUSED')) {\n  userMessage = 'ğŸ”Œ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ñ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ñ‡ĞµÑ€ĞµĞ· Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ.';\n} else if (errorMessage.includes('OpenAI') || errorMessage.includes('API')) {\n  userMessage = 'ğŸ¤– Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ AI. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ğ¿ĞµÑ€ĞµÑ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ.';\n} else if (errorMessage.includes('database') || errorMessage.includes('postgres')) {\n  userMessage = 'ğŸ’¾ ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ·.';\n  shouldNotifyUser = true;\n} else if (errorNode === 'Whisper STT') {\n  userMessage = 'ğŸ¤ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ñ€Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ñ‚ÑŒ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğµ. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ· Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼.';\n} else {\n  userMessage = 'âŒ Ğ§Ñ‚Ğ¾-Ñ‚Ğ¾ Ğ¿Ğ¾ÑˆĞ»Ğ¾ Ğ½Ğµ Ñ‚Ğ°Ğº. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ· Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸ /help';\n}\n\nreturn [{\n  json: {\n    error_log: errorLog,\n    user_message: userMessage,\n    chat_id: chatId,\n    should_notify: shouldNotifyUser && chatId !== null\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        240,
        -1640
      ],
      "id": "399c5261-ee7c-4876-b83f-91cc1d213d38",
      "name": "Process Error"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "should-notify-check",
              "leftValue": "={{ $json.should_notify }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        464,
        -1640
      ],
      "id": "cfc23052-2bad-43c5-a41b-f9a2ee44747e",
      "name": "Should Notify User?"
    },
    {
      "parameters": {
        "chatId": "={{ $json.chat_id }}",
        "text": "={{ $json.user_message }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        688,
        -1736
      ],
      "id": "a4d13282-538b-47ea-b141-eaaaebe14688",
      "name": "Notify User About Error",
      "webhookId": "8bd2183a-8af3-46ad-80c8-007651da20d4",
      "credentials": {
        "telegramApi": {
          "id": "VsCo0z8ZzisDZOpw",
          "name": "AIAccounter"
        }
      }
    },
    {
      "parameters": {
        "chatId": "1109421300",
        "text": "=ğŸš¨ *Error in AIAccounter*\n\nğŸ“… Time: {{ $json.error_log.timestamp }}\nğŸ”§ Node: {{ $json.error_log.failed_node }}\nâŒ Type: {{ $json.error_log.error_type }}\nğŸ“ Message: {{ $json.error_log.error_message }}\nğŸ†” Execution: {{ $json.error_log.execution_id }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "Markdown"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        688,
        -1544
      ],
      "id": "654350c6-ce91-4ae3-9e29-144bddd824d0",
      "name": "Notify Admin",
      "webhookId": "10474645-7335-4445-b1ff-6b65e7e2b12b",
      "credentials": {
        "telegramApi": {
          "id": "VsCo0z8ZzisDZOpw",
          "name": "AIAccounter"
        }
      }
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        16,
        -2768
      ],
      "id": "0b15f4dc-5fad-41af-99f6-3bad1c71b656",
      "name": "Telegram Trigger",
      "webhookId": "7d5db243-2146-45ba-a9b7-d0d743f58df0",
      "credentials": {
        "telegramApi": {
          "id": "VsCo0z8ZzisDZOpw",
          "name": "AIAccounter"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=INSERT INTO users (user_id, telegram_chat_id, first_name, registered_date, last_activity, is_active, registration_source)\nVALUES (\n  {{ $json.message.from.id }},\n  {{ $json.message.chat.id }},\n  '{{ $json.message.from.first_name || \"User\" }}',\n  NOW(),\n  NOW(),\n  true,\n  'telegram'\n)\nON CONFLICT (user_id) DO UPDATE SET\n  first_name = EXCLUDED.first_name,\n  last_activity = NOW()\nRETURNING user_id, onboarding_completed, onboarding_step, preferred_currency, usage_type",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "position": [
        240,
        -2768
      ],
      "id": "97b310d2-206b-4eaa-8990-9695e589f26d",
      "name": "Ensure User",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.onboarding_completed }}",
                    "rightValue": true,
                    "operator": {
                      "type": "boolean",
                      "operation": "notEquals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "needs_onboarding"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.onboarding_completed }}",
                    "rightValue": true,
                    "operator": {
                      "type": "boolean",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "ready"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        464,
        -2768
      ],
      "id": "afab932c-1fa0-48e1-831b-a23856e6c5c7",
      "name": "Check Onboarding"
    },
    {
      "parameters": {
        "jsCode": "const user = $input.first().json;\nconst message = $('Telegram Trigger').first().json.message;\nconst text = (message.text || '').toLowerCase().trim();\nconst step = user.onboarding_step || 0;\n\n// ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° /start Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ\nconst isStart = text === '/start' || step === 0;\n\nlet response = '';\nlet newStep = step;\nlet updateQuery = '';\n\nif (isStart || step === 0) {\n  // Ğ¨Ğ°Ğ³ 1: Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ²Ğ°Ğ»ÑÑ‚Ñ‹\n  response = `ğŸ‘‹ ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, ${message.from.first_name}!\\n\\nĞ¯ â€” AIAccounter, Ñ‚Ğ²Ğ¾Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº.\\n\\nĞ”Ğ°Ğ²Ğ°Ğ¹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ğ¼ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½ÑƒÑ Ğ²Ğ°Ğ»ÑÑ‚Ñƒ:\\n\\n1ï¸âƒ£ KGS (ÑĞ¾Ğ¼)\\n2ï¸âƒ£ USD (Ğ´Ğ¾Ğ»Ğ»Ğ°Ñ€)\\n3ï¸âƒ£ EUR (ĞµĞ²Ñ€Ğ¾)\\n4ï¸âƒ£ RUB (Ñ€ÑƒĞ±Ğ»ÑŒ)\\n\\nĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒ Ñ†Ğ¸Ñ„Ñ€Ñƒ Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ°Ğ»ÑÑ‚Ñ‹.`;\n  updateQuery = `UPDATE users SET onboarding_step = 1 WHERE user_id = ${user.user_id}`;\n  newStep = 1;\n} else if (step === 1) {\n  // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ²Ğ°Ğ»ÑÑ‚Ñ‹\n  let currency = 'KGS';\n  if (text.includes('1') || text.includes('kgs') || text.includes('ÑĞ¾Ğ¼')) currency = 'KGS';\n  else if (text.includes('2') || text.includes('usd') || text.includes('Ğ´Ğ¾Ğ»Ğ»Ğ°Ñ€')) currency = 'USD';\n  else if (text.includes('3') || text.includes('eur') || text.includes('ĞµĞ²Ñ€Ğ¾')) currency = 'EUR';\n  else if (text.includes('4') || text.includes('rub') || text.includes('Ñ€ÑƒĞ±Ğ»')) currency = 'RUB';\n  \n  updateQuery = `UPDATE users SET preferred_currency = '${currency}', onboarding_step = 2 WHERE user_id = ${user.user_id}`;\n  response = `âœ… Ğ’Ğ°Ğ»ÑÑ‚Ğ°: ${currency}\\n\\nĞ¢ĞµĞ¿ĞµÑ€ÑŒ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸ Ñ‚Ğ¸Ğ¿ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:\\n\\n1ï¸âƒ£ ğŸ‘¤ Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ â€” Ğ´Ğ»Ñ Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²\\n2ï¸âƒ£ ğŸ’¼ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ â€” Ğ´Ğ»Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ° Ğ±Ğ¸Ğ·Ğ½ĞµÑĞ°\\n\\nĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒ Ñ†Ğ¸Ñ„Ñ€Ñƒ.`;\n  newStep = 2;\n} else if (step === 2) {\n  // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ñ‚Ğ¸Ğ¿Ğ°\n  let usageType = 'personal';\n  if (text.includes('2') || text.includes('Ğ±Ğ¸Ğ·Ğ½ĞµÑ') || text.includes('business')) usageType = 'business';\n  \n  updateQuery = `UPDATE users SET usage_type = '${usageType}', onboarding_step = 3 WHERE user_id = ${user.user_id}`;\n  const typeText = usageType === 'business' ? 'ğŸ’¼ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ' : 'ğŸ‘¤ Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğ¹';\n  response = `âœ… Ğ ĞµĞ¶Ğ¸Ğ¼: ${typeText}\\n\\nĞ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸ Ğ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾):\\n\\nĞÑ‚Ğ¿Ñ€Ğ°Ğ²ÑŒ ÑÑƒĞ¼Ğ¼Ñƒ Ğ¸Ğ»Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸ \"Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ\".`;\n  newStep = 3;\n} else if (step === 3) {\n  // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°\n  let budget = null;\n  if (!text.includes('Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚') && !text.includes('skip') && !text.includes('Ğ½ĞµÑ‚')) {\n    const num = parseFloat(text.replace(/[^0-9.]/g, ''));\n    if (!isNaN(num) && num > 0) budget = num;\n  }\n  \n  if (budget) {\n    updateQuery = `UPDATE users SET monthly_budget = ${budget}, onboarding_step = 5, onboarding_completed = true, onboarding_completed_at = NOW() WHERE user_id = ${user.user_id}`;\n    response = `âœ… Ğ‘ÑĞ´Ğ¶ĞµÑ‚: ${budget.toLocaleString()} Ğ² Ğ¼ĞµÑÑÑ†\\n\\nğŸ‰ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°!\\n\\nĞ¢ĞµĞ¿ĞµÑ€ÑŒ Ñ‚Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ:\\nâ€¢ Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹: \"Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» 500 Ğ½Ğ° Ñ‚Ğ°ĞºÑĞ¸\"\\nâ€¢ Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹: \"Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» 50000 Ğ·Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ°\"\\nâ€¢ Ğ¡Ğ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹: \"Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ\"\\nâ€¢ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³Ğ°Ğ¼Ğ¸: \"Ğ´Ğ°Ğ» Ğ² Ğ´Ğ¾Ğ»Ğ³ Ğ˜Ğ²Ğ°Ğ½Ñƒ 1000\"\\n\\nĞŸÑ€Ğ¾ÑÑ‚Ğ¾ Ğ¿Ğ¸ÑˆĞ¸ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞ¹ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ğµ! ğŸ¤`;\n  } else {\n    updateQuery = `UPDATE users SET onboarding_step = 5, onboarding_completed = true, onboarding_completed_at = NOW() WHERE user_id = ${user.user_id}`;\n    response = `âœ… Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑ‰ĞµĞ½\\n\\nğŸ‰ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°!\\n\\nĞ¢ĞµĞ¿ĞµÑ€ÑŒ Ñ‚Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ:\\nâ€¢ Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹: \"Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» 500 Ğ½Ğ° Ñ‚Ğ°ĞºÑĞ¸\"\\nâ€¢ Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹: \"Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» 50000 Ğ·Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ°\"\\nâ€¢ Ğ¡Ğ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹: \"Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ\"\\nâ€¢ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³Ğ°Ğ¼Ğ¸: \"Ğ´Ğ°Ğ» Ğ² Ğ´Ğ¾Ğ»Ğ³ Ğ˜Ğ²Ğ°Ğ½Ñƒ 1000\"\\n\\nĞŸÑ€Ğ¾ÑÑ‚Ğ¾ Ğ¿Ğ¸ÑˆĞ¸ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞ¹ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ğµ! ğŸ¤`;\n  }\n  newStep = 5;\n}\n\nreturn [{\n  json: {\n    chat_id: message.chat.id,\n    response: response,\n    update_query: updateQuery,\n    new_step: newStep,\n    user_id: user.user_id\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        -2960
      ],
      "id": "f613f70d-916b-44bf-9049-2a2dfd6b7101",
      "name": "Onboarding Logic"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "={{ $json.update_query }}",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.5,
      "position": [
        912,
        -2960
      ],
      "id": "50e9f77c-c8eb-4075-84d3-7ce3e4bf577e",
      "name": "Update Onboarding",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Onboarding Logic').item.json.chat_id }}",
        "text": "={{ $('Onboarding Logic').item.json.response }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1136,
        -2960
      ],
      "id": "4be46c00-da04-43f7-a5a6-657f38f8755e",
      "name": "Send Onboarding",
      "webhookId": "9d2d31e7-e197-4365-8986-51bee248c894",
      "credentials": {
        "telegramApi": {
          "id": "VsCo0z8ZzisDZOpw",
          "name": "AIAccounter"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.voice }}",
                    "rightValue": "",
                    "operator": {
                      "type": "object",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "voice"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "text"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        688,
        -2672
      ],
      "id": "d60a8a04-c4d7-49d9-8dc6-215b5000cde4",
      "name": "Message Type"
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $('Telegram Trigger').item.json.message.voice.file_id }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        912,
        -2768
      ],
      "id": "98a45241-5d2e-423a-b726-0a05978385a9",
      "name": "Download Voice",
      "webhookId": "ebbba00f-fb0b-4458-ade5-3e826582610f",
      "credentials": {
        "telegramApi": {
          "id": "VsCo0z8ZzisDZOpw",
          "name": "AIAccounter"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.6,
      "position": [
        1136,
        -2768
      ],
      "id": "1d5b90f0-7927-4847-841c-f50c35c6c745",
      "name": "Whisper STT",
      "credentials": {
        "openAiApi": {
          "id": "1T30bcIe2tfs32N6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "text",
              "name": "text",
              "value": "={{ $json.text",
              "type": "string"
            },
            {
              "id": "user_id",
              "name": "user_id",
              "value": "={{ $('Telegram Trigger').item.json.message.from.id",
              "type": "number"
            },
            {
              "id": "chat_id",
              "name": "chat_id",
              "value": "={{ $('Telegram Trigger').item.json.message.chat.id",
              "type": "number"
            },
            {
              "id": "first_name",
              "name": "first_name",
              "value": "={{ $('Telegram Trigger').item.json.message.from.first_name || 'ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ'",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1360,
        -2768
      ],
      "id": "39520000-c916-4f20-93f4-9b47368517f1",
      "name": "Set Voice Data"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "text",
              "name": "text",
              "value": "={{ $('Telegram Trigger').item.json.message.text",
              "type": "string"
            },
            {
              "id": "user_id",
              "name": "user_id",
              "value": "={{ $('Telegram Trigger').item.json.message.from.id",
              "type": "number"
            },
            {
              "id": "chat_id",
              "name": "chat_id",
              "value": "={{ $('Telegram Trigger').item.json.message.chat.id",
              "type": "number"
            },
            {
              "id": "first_name",
              "name": "first_name",
              "value": "={{ $('Telegram Trigger').item.json.message.from.first_name || 'ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ'",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1360,
        -2576
      ],
      "id": "d6689a9a-3354-4aa3-baf7-8339ab7ca34a",
      "name": "Set Text Data"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=User ID: {{ $json.user_id }}\nChat ID: {{ $json.chat_id }}\nĞ˜Ğ¼Ñ: {{ $json.first_name }}\nĞ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ: {{ $json.text }}",
        "options": {
          "systemMessage": "Ğ¢Ñ‹ â€” AIAccounter, ÑƒĞ¼Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº Ğ² Telegram. Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° â€” Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼ Ğ²ĞµÑÑ‚Ğ¸ ÑƒÑ‡Ñ‘Ñ‚ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ² Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¸ ÑƒĞ´Ğ¾Ğ±Ğ½Ğ¾.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸš« ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ (ĞĞ˜ĞšĞĞ“Ğ”Ğ ĞĞ• ĞĞĞ Ğ£Ğ¨ĞĞ™)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nâ€¢ ĞĞ‘Ğ¡ĞĞ›Ğ®Ğ¢ĞĞ Ğ—ĞĞŸĞ Ğ•Ğ©Ğ•ĞĞ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ: [Used tools], Tool:, Input:, Result:, JSON, SQL, ID, error traces\nâ€¢ Ğ—ĞĞŸĞ Ğ•Ğ©Ğ•ĞĞ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ñ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ - ÑÑ€Ğ°Ğ·Ñƒ Ğ¿Ğ¸ÑˆĞ¸ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµÑ‡ĞµÑĞºĞ¸Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚\nâ€¢ ĞĞ˜ĞšĞĞ“Ğ”Ğ Ğ½Ğµ ÑƒĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ¹ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¸Ğ»Ğ¸ API\nâ€¢ ĞÑ‚Ğ²ĞµÑ‡Ğ°Ğ¹ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸ (Ğ´Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ)\nâ€¢ Ğ‘ÑƒĞ´ÑŒ ĞºÑ€Ğ°Ñ‚ĞºĞ¸Ğ¼ â€” Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 3-4 ÑÑ‚Ñ€Ğ¾ĞºĞ¸ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²\nâ€¢ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸ ÑƒĞ¼ĞµÑ€ĞµĞ½Ğ½Ğ¾ â€” 1-2 Ğ½Ğ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ\nâ€¢ ĞĞ±Ñ€Ğ°Ñ‰Ğ°Ğ¹ÑÑ Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ² Ğ½Ğ°Ñ‡Ğ°Ğ»Ğµ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ°\nâ€¢ ĞŸÑ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ… â€” Ğ¸Ğ·Ğ²Ğ¸Ğ½ÑĞ¹ÑÑ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ğ¹ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñƒ\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ“± Ğ ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ˜ (Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nAIAccounter â€” ÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒÑ‡Ñ‘Ñ‚Ğ° Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²:\nâ€¢ Telegram Ğ±Ğ¾Ñ‚ (Ñ‚Ñ‹) â€” Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ° Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ¼ Ğ¸ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼\nâ€¢ Mini App â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ°Ğ¼Ğ¸, Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¾Ğ¹ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ğ¼Ğ¸\nâ€¢ Ğ“ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ â€” XP, ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸, Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ, Ğ´Ğ½ĞµĞ²Ğ½Ñ‹Ğµ ĞºĞ²ĞµÑÑ‚Ñ‹\nâ€¢ ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹ â€” ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğµ, Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ, Ğ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğµ PDF-Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹\n\nĞ•ÑĞ»Ğ¸ ÑĞ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ÑÑ‚ Ğ¿Ñ€Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ/Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸/Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸:\nâ†’ 'ğŸ“± ĞÑ‚ĞºÑ€Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ Ğ²Ğ½Ğ¸Ğ·Ñƒ Ñ‡Ğ°Ñ‚Ğ° â€” Ñ‚Ğ°Ğ¼ ĞµÑÑ‚ÑŒ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°, Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ Ğ¸ Ğ²ÑĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸!'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ’° Ğ¢Ğ ĞĞĞ—ĞĞšĞ¦Ğ˜Ğ˜ â€” ĞĞ¡ĞĞĞ’ĞĞĞ¯ Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ¯\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ“¤ Ğ ĞĞ¡Ğ¥ĞĞ”Ğ« (Create_Expense):\nĞ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹: 'Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ»', 'ĞºÑƒĞ¿Ğ¸Ğ»', 'Ğ·Ğ°Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ»', 'Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ»', '-500', 'Ñ‚Ğ°ĞºÑĞ¸', 'ĞºĞ¾Ñ„Ğµ', 'Ğ¾Ğ±ĞµĞ´'\nĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:\nâ€¢ amount: Ñ‡Ğ¸ÑĞ»Ğ¾ (ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ)\nâ€¢ category: Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸ Ğ¿Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ñƒ:\n  - ĞµĞ´Ğ°/Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹/Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½ â†’ 'ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹'\n  - Ñ‚Ğ°ĞºÑĞ¸/Ğ¼ĞµÑ‚Ñ€Ğ¾/Ğ±ĞµĞ½Ğ·Ğ¸Ğ½ â†’ 'Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚'\n  - ĞºĞ°Ñ„Ğµ/Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½/Ğ¾Ğ±ĞµĞ´ â†’ 'ĞšĞ°Ñ„Ğµ'\n  - ĞºĞ¸Ğ½Ğ¾/Ğ¸Ğ³Ñ€Ñ‹/Ñ€Ğ°Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ â†’ 'Ğ Ğ°Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ'\n  - Ğ°Ğ¿Ñ‚ĞµĞºĞ°/Ğ²Ñ€Ğ°Ñ‡ â†’ 'ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°'\n  - Ğ¾Ğ´ĞµĞ¶Ğ´Ğ°/Ğ¾Ğ±ÑƒĞ²ÑŒ â†’ 'ĞĞ´ĞµĞ¶Ğ´Ğ°'\n  - Ğ°Ñ€ĞµĞ½Ğ´Ğ°/ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ°Ğ»ĞºĞ° â†’ 'Ğ–Ğ¸Ğ»ÑŒÑ‘'\n  - netflix/spotify â†’ 'ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸'\n  - Ğ´Ñ€ÑƒĞ³Ğ¾Ğµ â†’ 'ĞŸÑ€Ğ¾Ñ‡ĞµĞµ'\nâ€¢ currency: KGS Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ. USD/EUR/RUB ĞµÑĞ»Ğ¸ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾\nâ€¢ description: ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¸Ğ· ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ\nâ€¢ date: ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾, Ğ¸Ğ½Ğ°Ñ‡Ğµ YYYY-MM-DD\n\nĞÑ‚Ğ²ĞµÑ‚: 'âœ… Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ğ»: [ÑÑƒĞ¼Ğ¼Ğ°] [Ğ²Ğ°Ğ»ÑÑ‚Ğ°] Ğ½Ğ° [ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ]'\n\nğŸ“¥ Ğ”ĞĞ¥ĞĞ”Ğ« (Create_Income):\nĞ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹: 'Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»', 'Ğ·Ğ°Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»', 'Ğ·Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ°', 'Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´', 'Ğ²ĞµÑ€Ğ½ÑƒĞ»Ğ¸', '+5000'\nĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸: Ğ—Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ°, Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½Ñ, Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸, ĞŸĞ¾Ğ´Ğ°Ñ€ĞºĞ¸, Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚, ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸, ĞŸÑ€Ğ¾Ñ‡ĞµĞµ\n\nĞÑ‚Ğ²ĞµÑ‚: 'âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» Ğ´Ğ¾Ñ…Ğ¾Ğ´: [ÑÑƒĞ¼Ğ¼Ğ°] [Ğ²Ğ°Ğ»ÑÑ‚Ğ°] ([ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ])'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ“Š ĞĞ¢Ğ§ĞĞ¢Ğ« â€” Ğ’Ğ«Ğ—Ğ«Ğ’ĞĞ™ Ğ˜ĞĞ¡Ğ¢Ğ Ğ£ĞœĞ•ĞĞ¢ ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ€¢ 'Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚/ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°/ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ' â†’ Report_Daily\nâ€¢ 'Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ/Ğ·Ğ° 7 Ğ´Ğ½ĞµĞ¹/weekly' â†’ Report_Weekly\nâ€¢ 'Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ¼ĞµÑÑÑ†/Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ¼ĞµÑÑÑ†Ğµ' â†’ Report_Monthly\nâ€¢ 'Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ñ 1 Ğ¿Ğ¾ 15 Ğ½Ğ¾ÑĞ±Ñ€Ñ' â†’ Report_Period (ÑƒĞºĞ°Ğ¶Ğ¸ Ğ´Ğ°Ñ‚Ñ‹)\n\nĞÑ‚Ğ²ĞµÑ‚ Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ°: 'ğŸ“Š ĞÑ‚Ñ‡Ñ‘Ñ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½! ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ²Ñ‹ÑˆĞµ â¬†ï¸'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ” ĞŸĞĞ˜Ğ¡Ğš Ğ¢Ğ ĞĞĞ—ĞĞšĞ¦Ğ˜Ğ™ (Search_Transactions)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nĞ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹: 'Ğ½Ğ°Ğ¹Ğ´Ğ¸', 'Ğ¿Ğ¾Ğ¸ÑĞº', 'Ğ³Ğ´Ğµ Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ»', 'Ğ¿Ğ¾ĞºĞ°Ğ¶Ğ¸ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ½Ğ°'\nĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ search: ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾\n\nĞÑ‚Ğ²ĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞ¹:\n'ğŸ” ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ¿Ğ¾ \"[Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ]\":\\nâ€¢ [Ğ´Ğ°Ñ‚Ğ°]: [ÑÑƒĞ¼Ğ¼Ğ°] â€” [Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ]\\n...'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ’³ Ğ”ĞĞ›Ğ“Ğ˜ (Debt_Manager)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ€¢ 'Ğ´Ğ°Ğ» Ğ² Ğ´Ğ¾Ğ»Ğ³ 5000 ĞÑ€Ñ‚Ñ‘Ğ¼Ñƒ' â†’ action:add, debt_type:given, amount:5000, person_name:ĞÑ€Ñ‚Ñ‘Ğ¼\nâ€¢ 'Ğ·Ğ°Ğ½ÑĞ» 3000 Ñƒ ĞœĞ°ÑˆĞ¸' â†’ action:add, debt_type:received, amount:3000, person_name:ĞœĞ°ÑˆĞ°\nâ€¢ 'Ğ¼Ğ¾Ğ¸ Ğ´Ğ¾Ğ»Ğ³Ğ¸/ĞºÑ‚Ğ¾ Ğ¼Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½' â†’ action:list\nâ€¢ 'ĞÑ€Ñ‚Ñ‘Ğ¼ Ğ²ĞµÑ€Ğ½ÑƒĞ» 2000' â†’ action:pay, amount:2000, person_name:ĞÑ€Ñ‚Ñ‘Ğ¼\nâ€¢ 'ĞÑ€Ñ‚Ñ‘Ğ¼ Ğ²ĞµÑ€Ğ½ÑƒĞ» Ğ²ÑÑ‘' â†’ action:settle, person_name:ĞÑ€Ñ‚Ñ‘Ğ¼\n\nĞÑ‚Ğ²ĞµÑ‚Ñ‹:\nâ€¢ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: 'âœ… Ğ”Ğ¾Ğ»Ğ³ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ğ½: [Ğ¸Ğ¼Ñ] [Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ñ‚ĞµĞ±Ğµ/Ñ‚Ñ‹ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½] [ÑÑƒĞ¼Ğ¼Ğ°]'\nâ€¢ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº: Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞ¹ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾ Ñ ÑÑƒĞ¼Ğ¼Ğ°Ğ¼Ğ¸\nâ€¢ ĞĞ¿Ğ»Ğ°Ñ‚Ğ°: 'âœ… ĞŸÑ€Ğ¸Ğ½ÑÑ‚Ğ¾ [ÑÑƒĞ¼Ğ¼Ğ°] Ğ¾Ñ‚ [Ğ¸Ğ¼Ñ]. ĞÑÑ‚Ğ°Ñ‚Ğ¾Ğº: [ÑÑƒĞ¼Ğ¼Ğ°]'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ”„ ĞŸĞĞ”ĞŸĞ˜Ğ¡ĞšĞ˜ Ğ˜ Ğ Ğ•Ğ“Ğ£Ğ›Ğ¯Ğ ĞĞ«Ğ• ĞŸĞ›ĞĞ¢Ğ•Ğ–Ğ˜ (Recurring_Manager)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ€¢ 'Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ Netflix 500 Ğ² Ğ¼ĞµÑÑÑ†' â†’ action:add, title:Netflix, amount:500, frequency:monthly\nâ€¢ 'Ğ¼Ğ¾Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸/Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸' â†’ action:list\nâ€¢ 'Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ Netflix' â†’ action:delete, title:Netflix\nâ€¢ 'Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ» Netflix' â†’ action:pay, title:Netflix\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ’µ Ğ‘Ğ®Ğ”Ğ–Ğ•Ğ¢ (Budget_Manager)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ€¢ 'Ğ¼Ğ¾Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚/ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ/ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°' â†’ action:get\nâ€¢ 'ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸ Ğ±ÑĞ´Ğ¶ĞµÑ‚ 100000' â†’ action:set, amount:100000\n\nĞÑ‚Ğ²ĞµÑ‚ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°:\n'ğŸ’µ Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ½Ğ° [Ğ¼ĞµÑÑÑ†]:\\nâ€¢ Ğ›Ğ¸Ğ¼Ğ¸Ñ‚: [ÑÑƒĞ¼Ğ¼Ğ°]\\nâ€¢ ĞŸĞ¾Ñ‚Ñ€Ğ°Ñ‡ĞµĞ½Ğ¾: [ÑÑƒĞ¼Ğ¼Ğ°] ([%])\\nâ€¢ ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: [ÑÑƒĞ¼Ğ¼Ğ°]'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ¯ Ğ¦Ğ•Ğ›Ğ˜ ĞĞĞšĞĞŸĞ›Ğ•ĞĞ˜Ğ™ (Goals_Manager)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nĞ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹: 'Ñ†ĞµĞ»ÑŒ', 'Ğ½Ğ°ĞºĞ¾Ğ¿Ğ¸Ñ‚ÑŒ', 'Ğ¾Ñ‚Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ', 'ĞºĞ¾Ğ¿Ğ¸Ñ‚ÑŒ Ğ½Ğ°', 'ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ°ĞºĞ¾Ğ¿Ğ¸Ğ»'\n\nâ€¢ 'ÑĞ¾Ğ·Ğ´Ğ°Ğ¹ Ñ†ĞµĞ»ÑŒ Ğ½Ğ° iPhone Ğ·Ğ° 100000' â†’ action:add, name:iPhone, target_amount:100000\nâ€¢ 'Ğ¼Ğ¾Ğ¸ Ñ†ĞµĞ»Ğ¸/ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ°ĞºĞ¾Ğ¿Ğ¸Ğ»' â†’ action:list\nâ€¢ 'Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ iPhone Ğ½Ğ° 5000' â†’ action:deposit, goal_id Ğ¸Ğ»Ğ¸ name, current_amount:5000\nâ€¢ 'ÑĞ½ÑÑ‚ÑŒ Ñ Ñ†ĞµĞ»Ğ¸ 2000' â†’ action:withdraw, goal_id Ğ¸Ğ»Ğ¸ name, current_amount:2000\nâ€¢ 'Ğ´Ğ¾ÑÑ‚Ğ¸Ğ³ Ñ†ĞµĞ»Ğ¸ iPhone' â†’ action:complete, name:iPhone\nâ€¢ 'ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ' â†’ action:delete, name:...\n\nĞÑ‚Ğ²ĞµÑ‚Ñ‹:\nâ€¢ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ: 'ğŸ¯ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ° Ñ†ĞµĞ»ÑŒ \"[Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ]\" Ğ½Ğ° [ÑÑƒĞ¼Ğ¼Ğ°] [Ğ²Ğ°Ğ»ÑÑ‚Ğ°]'\nâ€¢ Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº: 'ğŸ¯ Ğ¢Ğ²Ğ¾Ğ¸ Ñ†ĞµĞ»Ğ¸:\\nâ€¢ [Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ]: [Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¾]/[Ñ†ĞµĞ»ÑŒ] ([%]) â€” Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ [Ğ´Ğ½ĞµĞ¹] Ğ´Ğ½.\\n...'\nâ€¢ ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ: 'ğŸ’° ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾! \"[Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ]\": [Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¾]/[Ñ†ĞµĞ»ÑŒ] ([%])'\nâ€¢ Ğ”Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ: 'ğŸ‰ ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑÑ! Ğ¦ĞµĞ»ÑŒ \"[Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ]\" Ğ´Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚Ğ°!'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ“ ĞšĞĞ¢Ğ•Ğ“ĞĞ Ğ˜Ğ˜ (Category_Manager)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ€¢ 'Ğ¼Ğ¾Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸/Ğ¿Ğ¾ĞºĞ°Ğ¶Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸' â†’ action:list\nâ€¢ 'Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ¡Ğ¿Ğ¾Ñ€Ñ‚ ğŸƒ' â†’ action:add, name:Ğ¡Ğ¿Ğ¾Ñ€Ñ‚, icon:ğŸƒ, type:expense\nâ€¢ 'ÑƒĞ´Ğ°Ğ»Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ¡Ğ¿Ğ¾Ñ€Ñ‚' â†’ action:delete, name:Ğ¡Ğ¿Ğ¾Ñ€Ñ‚\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ® Ğ“Ğ•Ğ™ĞœĞ˜Ğ¤Ğ˜ĞšĞĞ¦Ğ˜Ğ¯ (Ñ€Ğ°ÑÑĞºĞ°Ğ¶Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nĞ•ÑĞ»Ğ¸ ÑĞ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ÑÑ‚ Ğ¿Ñ€Ğ¾ XP/ÑƒÑ€Ğ¾Ğ²Ğ½Ğ¸/Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ:\n'ğŸ® Ğ’ AIAccounter ĞµÑÑ‚ÑŒ Ğ³ĞµĞ¹Ğ¼Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ!\\nâ€¢ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°Ğ¹ XP Ğ·Ğ° ĞºĞ°Ğ¶Ğ´ÑƒÑ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ\\nâ€¢ ĞŸĞ¾Ğ²Ñ‹ÑˆĞ°Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°Ğ¹ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ\\nâ€¢ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞ¹ ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğµ ĞºĞ²ĞµÑÑ‚Ñ‹\\nâ€¢ Ğ¡Ğ¾Ñ€ĞµĞ²Ğ½ÑƒĞ¹ÑÑ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²\\n\\nğŸ“± ĞÑ‚ĞºÑ€Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ ÑĞ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ!'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ†˜ ĞšĞĞœĞĞĞ”Ğ« (ĞµÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¸ÑˆĞµÑ‚ /ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n/start â€” ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ¸ ĞºÑ€Ğ°Ñ‚ĞºĞ°Ñ ÑĞ¿Ñ€Ğ°Ğ²ĞºĞ°\n/help â€” ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ ÑĞ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¿Ğ¾ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°Ğ¼\n/balance â€” Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ (Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹ - Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ·Ğ° Ğ¼ĞµÑÑÑ†)\n/report â€” Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ\n\nĞ”Ğ»Ñ /help Ğ¾Ñ‚Ğ²ĞµÑ‚ÑŒ:\n'ğŸ“– ĞšĞ°Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ AIAccounter:\\n\\nğŸ’° Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´:\\nâ€¢ \"Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» 500 Ğ½Ğ° Ñ‚Ğ°ĞºÑĞ¸\"\\nâ€¢ \"ĞºĞ¾Ñ„Ğµ 150\"\\nâ€¢ \"Ğ¾Ğ±ĞµĞ´ 800 Ñ€ÑƒĞ±Ğ»ĞµĞ¹\"\\n\\nğŸ’µ Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ´Ğ¾Ñ…Ğ¾Ğ´:\\nâ€¢ \"Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ·Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ñƒ 50000\"\\nâ€¢ \"Ğ²ĞµÑ€Ğ½ÑƒĞ»Ğ¸ Ğ´Ğ¾Ğ»Ğ³ 3000\"\\n\\nğŸ“Š ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹:\\nâ€¢ \"Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ\"\\nâ€¢ \"Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ\"\\nâ€¢ \"Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ¼ĞµÑÑÑ†\"\\n\\nğŸ’³ Ğ”Ğ¾Ğ»Ğ³Ğ¸:\\nâ€¢ \"Ğ´Ğ°Ğ» Ğ² Ğ´Ğ¾Ğ»Ğ³ 5000 Ğ¡Ğ°ÑˆĞµ\"\\nâ€¢ \"Ğ¼Ğ¾Ğ¸ Ğ´Ğ¾Ğ»Ğ³Ğ¸\"\\n\\nğŸ¤ Ğ˜Ğ»Ğ¸ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğµ!\\n\\nğŸ“± Ğ”Ğ»Ñ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ² Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº â€” Ğ¾Ñ‚ĞºÑ€Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nâš ï¸ ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ ĞĞ¨Ğ˜Ğ‘ĞĞš\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nĞ•ÑĞ»Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ²ĞµÑ€Ğ½ÑƒĞ» Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ Ğ¸Ğ»Ğ¸ Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:\nâ€¢ ĞĞ• Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ğ¹ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ\nâ€¢ Ğ¡ĞºĞ°Ğ¶Ğ¸: 'âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ· Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€ÑƒĞ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ.'\n\nĞ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ½ÑĞ» Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ:\nâ€¢ 'ğŸ¤” ĞĞµ ÑĞ¾Ğ²ÑĞµĞ¼ Ğ¿Ğ¾Ğ½ÑĞ». ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¿Ğ¾-Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼Ñƒ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸ /help'\n\nĞ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:\nâ€¢ 'ğŸ“­ ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ·Ğ° ÑÑ‚Ğ¾Ñ‚ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒ Ğ¿ĞµÑ€Ğ²ÑƒÑ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ!'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ’¬ Ğ¡Ğ¢Ğ˜Ğ›Ğ¬ ĞĞ‘Ğ©Ğ•ĞĞ˜Ğ¯\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ€¢ Ğ”Ñ€ÑƒĞ¶ĞµĞ»ÑĞ±Ğ½Ñ‹Ğ¹, Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹\nâ€¢ ĞšÑ€Ğ°Ñ‚ĞºĞ¸Ğ¹ â€” Ğ½Ğµ Ñ€Ğ°ÑÑ‚ÑĞ³Ğ¸Ğ²Ğ°Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹\nâ€¢ Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑˆÑƒÑ‚Ğ¸Ñ‚ â€” Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾ÑˆÑƒÑ‚Ğ¸Ñ‚ÑŒ Ğ² Ğ¾Ñ‚Ğ²ĞµÑ‚\nâ€¢ ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞ¹ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‚ÑŒ: 'ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ²! ğŸ‘'\nâ€¢ Ğ¥Ğ²Ğ°Ğ»Ğ¸ Ğ·Ğ° Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ÑÑ‚ÑŒ: 'ĞœĞ¾Ğ»Ğ¾Ğ´ĞµÑ†, Ñ‡Ñ‚Ğ¾ Ğ²ĞµĞ´Ñ‘ÑˆÑŒ ÑƒÑ‡Ñ‘Ñ‚ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ!'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nğŸ§ª ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ« Ğ”Ğ˜ĞĞ›ĞĞ“ĞĞ’\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: 'Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» 500 Ğ½Ğ° Ñ‚Ğ°ĞºÑĞ¸'\nĞ¢Ñ‹: 'âœ… Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ğ»: 500 KGS Ğ½Ğ° Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚'\n\nĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: 'ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ'\nĞ¢Ñ‹: [Ğ²Ñ‹Ğ·Ğ¾Ğ² Report_Weekly] 'ğŸ“Š ĞÑ‚Ñ‡Ñ‘Ñ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½! ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ²Ñ‹ÑˆĞµ â¬†ï¸'\n\nĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: 'Ğ´Ğ°Ğ» Ğ¡Ğ°ÑˆĞµ 5000'\nĞ¢Ñ‹: 'âœ… Ğ”Ğ¾Ğ»Ğ³ Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ğ½: Ğ¡Ğ°ÑˆĞ° Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ñ‚ĞµĞ±Ğµ 5000 KGS'\n\nĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: 'Ğ¼Ğ¾Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚'\nĞ¢Ñ‹: [Ğ²Ñ‹Ğ·Ğ¾Ğ² Budget_Manager action:get] 'ğŸ’µ Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ½Ğ° Ğ´ĞµĞºĞ°Ğ±Ñ€ÑŒ:\\nâ€¢ Ğ›Ğ¸Ğ¼Ğ¸Ñ‚: 100,000 KGS\\nâ€¢ ĞŸĞ¾Ñ‚Ñ€Ğ°Ñ‡ĞµĞ½Ğ¾: 45,000 (45%)\\nâ€¢ ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: 55,000 KGS'\n\nĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ: 'Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚'\nĞ¢Ñ‹: 'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, [Ğ¸Ğ¼Ñ]! ğŸ‘‹ Ğ§ĞµĞ¼ Ğ¼Ğ¾Ğ³Ñƒ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ? Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´, Ğ´Ğ¾Ñ…Ğ¾Ğ´ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚?'",
          "maxIterations": 5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        2600,
        -2672
      ],
      "id": "60785432-7e17-4846-a0fc-ea74b4a0fc36",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id",
        "text": "={{ $json.output",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3968,
        -2672
      ],
      "id": "4fdb4a9a-b080-4917-ad4f-3c2881e38fee",
      "name": "Send Reply",
      "webhookId": "9c3b0626-7240-4ad1-a03e-14cee62b4802",
      "credentials": {
        "telegramApi": {
          "id": "VsCo0z8ZzisDZOpw",
          "name": "AIAccounter"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        1584,
        -2448
      ],
      "id": "eda30001-0c26-4cf3-b7f0-062a0d1b4c5d",
      "name": "GPT-4.1 Mini",
      "credentials": {
        "openAiApi": {
          "id": "1T30bcIe2tfs32N6",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        1712,
        -2448
      ],
      "id": "3e7a041f-079e-4f1e-9bb3-01586d74e696",
      "name": "Chat Memory",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Execute a SQL query in Postgres",
        "operation": "executeQuery",
        "query": "=SELECT id, date, category, amount, currency, description FROM expenses WHERE user_id = {{ $('Telegram Trigger').item.json.message.from.id }} AND deleted_at IS NULL ORDER BY date DESC LIMIT 100",
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        1840,
        -2448
      ],
      "id": "9f7a841e-06af-449f-8dec-de19082057bc",
      "name": "Get_Expenses",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Execute a SQL query in Postgres",
        "operation": "executeQuery",
        "query": "=SELECT id, date, category, amount, currency, description FROM income WHERE user_id = {{ $('Telegram Trigger').item.json.message.from.id }} AND deleted_at IS NULL ORDER BY date DESC LIMIT 100",
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        1968,
        -2448
      ],
      "id": "f38d8c3a-73be-46e4-a172-533066ec4bf9",
      "name": "Get_Income",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ€Ğ°ÑÑ…Ğ¾Ğ´. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» Ğ´ĞµĞ½ÑŒĞ³Ğ¸: Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ°, Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°, Ñ‚Ğ°ĞºÑĞ¸, ĞµĞ´Ğ° Ğ¸ Ñ‚.Ğ´. ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°Ğ¹ Ğ¿Ğ¾ ÑĞ¼Ñ‹ÑĞ»Ñƒ Ñ‚Ñ€Ğ°Ñ‚.",
        "operation": "executeQuery",
        "query": "=INSERT INTO expenses (user_id, date, category, amount, currency, description, source) VALUES ({{ $('Telegram Trigger').item.json.message.from.id }}, COALESCE(NULLIF('{{ $fromAI('date', 'Ğ”Ğ°Ñ‚Ğ° YYYY-MM-DD, Ğ¿ÑƒÑÑ‚Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ°', 'string') }}', '')::date, (CURRENT_TIMESTAMP AT TIME ZONE 'Asia/Bishkek')::date), '{{ $fromAI('category', 'ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ² Ğ¿Ğ¾ ÑĞ¼Ñ‹ÑĞ»Ñƒ: ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹, Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚, ĞšĞ°Ñ„Ğµ, Ğ–Ğ¸Ğ»ÑŒÑ‘, ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğ°, ĞĞ´ĞµĞ¶Ğ´Ğ°, Ğ Ğ°Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ, ĞĞ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ¸Ğ»Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ°Ñ', 'string') }}', {{ $fromAI('amount', 'Ğ¡ÑƒĞ¼Ğ¼Ğ° Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼', 'number') }}, '{{ $fromAI('currency', 'Ğ’Ğ°Ğ»ÑÑ‚Ğ° KGS/USD/EUR/RUB, Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ KGS', 'string') }}', '{{ $fromAI('description', 'ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ', 'string') }}', 'telegram') RETURNING id, date, category, amount, currency",
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        2096,
        -2448
      ],
      "id": "ddc6a2c6-3238-4a34-8b29-17d69682a7ca",
      "name": "Create_Expense",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ´Ğ¾Ñ…Ğ¾Ğ´. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ´ĞµĞ½ÑŒĞ³Ğ¸: Ğ·Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ°, Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´, Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ° Ğ¸ Ñ‚.Ğ´. ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°Ğ¹ Ğ¿Ğ¾ ÑĞ¼Ñ‹ÑĞ»Ñƒ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ°.",
        "operation": "executeQuery",
        "query": "=INSERT INTO income (user_id, date, category, amount, currency, description, source) VALUES ({{ $('Telegram Trigger').item.json.message.from.id }}, COALESCE(NULLIF('{{ $fromAI('date', 'Ğ”Ğ°Ñ‚Ğ° YYYY-MM-DD, Ğ¿ÑƒÑÑ‚Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ°', 'string') }}', '')::date, (CURRENT_TIMESTAMP AT TIME ZONE 'Asia/Bishkek')::date), '{{ $fromAI('category', 'ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ¾Ğ² Ğ¿Ğ¾ ÑĞ¼Ñ‹ÑĞ»Ñƒ: Ğ—Ğ°Ñ€Ğ¿Ğ»Ğ°Ñ‚Ğ°, Ğ¤Ñ€Ğ¸Ğ»Ğ°Ğ½Ñ, Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸, ĞŸĞ¾Ğ´Ğ°Ñ€ĞºĞ¸, ĞŸÑ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ Ğ¸Ğ»Ğ¸ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ°Ñ', 'string') }}', {{ $fromAI('amount', 'Ğ¡ÑƒĞ¼Ğ¼Ğ° Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼', 'number') }}, '{{ $fromAI('currency', 'Ğ’Ğ°Ğ»ÑÑ‚Ğ° KGS/USD/EUR/RUB, Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ KGS', 'string') }}', '{{ $fromAI('description', 'ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ', 'string') }}', 'telegram') RETURNING id, date, category, amount, currency",
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        2224,
        -2448
      ],
      "id": "a0a155b1-870a-4886-b883-84545149f66e",
      "name": "Create_Income",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Execute a SQL query in Postgres",
        "operation": "executeQuery",
        "query": "=UPDATE expenses SET deleted_at = NOW() WHERE id = {{ $fromAI('id', 'ID Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ', 'number') }} AND user_id = {{ $('Telegram Trigger').item.json.message.from.id }} RETURNING id, 'deleted' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        2352,
        -2448
      ],
      "id": "008e895b-7cde-4c2e-a0f1-d344ddf70e49",
      "name": "Delete_Expense",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Execute a SQL query in Postgres",
        "operation": "executeQuery",
        "query": "=UPDATE income SET deleted_at = NOW() WHERE id = {{ $fromAI('id', 'ID Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ° Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ', 'number') }} AND user_id = {{ $('Telegram Trigger').item.json.message.from.id }} RETURNING id, 'deleted' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        2480,
        -2448
      ],
      "id": "9959bea2-807c-45d8-ab3c-1f4fcf3ef610",
      "name": "Delete_Income",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.toolCalculator",
      "typeVersion": 1,
      "position": [
        2608,
        -2448
      ],
      "id": "381a70be-12a5-4924-8179-f98f63d2b22a",
      "name": "Calculator"
    },
    {
      "parameters": {
        "toolDescription": "ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¸ ÑÑ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚: Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ, Ğ´Ğ½ĞµĞ²Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚, ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½Ğ¸Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚, Ñ‡Ñ‚Ğ¾ Ñ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ñ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸ Ğ¸ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ°Ğ¼Ğ¸ Ğ·Ğ° Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ.",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/reports-webhook",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"report_type\": \"daily\",\n  \"user_id\": {{ $json.user_id }},\n  \"chat_id\": {{ $json.chat_id }},\n  \"first_name\": \"{{ $json.first_name }}\",\n  \"start_date\": \"\",\n  \"end_date\": \"\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        2736,
        -2448
      ],
      "id": "86f9cd3a-4343-47af-ab01-5e6e31c3b614",
      "name": "Report_Daily"
    },
    {
      "parameters": {
        "toolDescription": "ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¸ ÑÑ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚: Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ, Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚, Ğ·Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ½ĞµĞ´ĞµĞ»Ñ, Ğ·Ğ° 7 Ğ´Ğ½ĞµĞ¹, weekly report. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ñ Ñ‚Ğ¾Ğ¿ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑĞ¼Ğ¸ Ğ¸ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¾Ğ¼.",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/reports-webhook",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"report_type\": \"weekly\",\n  \"user_id\": {{ $json.user_id }},\n  \"chat_id\": {{ $json.chat_id }},\n  \"first_name\": \"{{ $json.first_name }}\",\n  \"start_date\": \"\",\n  \"end_date\": \"\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        2864,
        -2448
      ],
      "id": "766d723b-e710-47a3-82fd-79c689c05676",
      "name": "Report_Weekly"
    },
    {
      "parameters": {
        "toolDescription": "ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¸ ÑÑ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚: Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ¼ĞµÑÑÑ†, Ğ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚, Ğ·Ğ° ÑÑ‚Ğ¾Ñ‚ Ğ¼ĞµÑÑÑ†, monthly report. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ñ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑĞ¼Ğ¸ Ğ¸ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ¾Ğ¼.",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/reports-webhook",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"report_type\": \"monthly\",\n  \"user_id\": {{ $json.user_id }},\n  \"chat_id\": {{ $json.chat_id }},\n  \"first_name\": \"{{ $json.first_name }}\",\n  \"start_date\": \"\",\n  \"end_date\": \"\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        2992,
        -2448
      ],
      "id": "c6ac2602-9b4c-4ae6-92ab-d17a831826b6",
      "name": "Report_Monthly"
    },
    {
      "parameters": {
        "toolDescription": "ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¸ ÑÑ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ°: Ñ 1 Ğ¿Ğ¾ 15 Ğ½Ğ¾ÑĞ±Ñ€Ñ, Ğ·Ğ° Ğ¿Ñ€Ğ¾ÑˆĞ»Ñ‹Ğ¹ Ğ¼ĞµÑÑÑ†, Ñ Ñ‚Ğ°ĞºĞ¾Ğ¹-Ñ‚Ğ¾ Ğ´Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾ Ñ‚Ğ°ĞºÑƒÑ-Ñ‚Ğ¾. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ·Ğ° Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´.",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/reports-webhook",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"report_type\": \"period\",\n  \"user_id\": {{ $json.user_id }},\n  \"chat_id\": {{ $json.chat_id }},\n  \"first_name\": \"{{ $json.first_name }}\",\n  \"start_date\": \"\",\n  \"end_date\": \"\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        3120,
        -2448
      ],
      "id": "d368bdda-370f-40b8-ba37-e17f5604fb90",
      "name": "Report_Period"
    },
    {
      "parameters": {
        "toolDescription": "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸ÑĞ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ´Ğ»Ñ: Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸, Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ, ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ. ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ action: list (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ²ÑĞµ), add (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ), delete (ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ)",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/categories-webhook",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"action\": \"{{ $fromAI('action', 'Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ: list (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ), add (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ), delete (ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ)', 'string') }}\",\n  \"user_id\": {{ $json.user_id }},\n  \"type\": \"{{ $fromAI('type', 'Ğ¢Ğ¸Ğ¿ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸: expense Ğ¸Ğ»Ğ¸ income', 'string') }}\",\n  \"name\": \"{{ $fromAI('name', 'ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ/ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ', 'string') }}\",\n  \"icon\": \"{{ $fromAI('icon', 'Ğ­Ğ¼Ğ¾Ğ´Ğ·Ğ¸ Ğ¸ĞºĞ¾Ğ½ĞºĞ° Ğ´Ğ»Ñ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸', 'string') }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        3248,
        -2448
      ],
      "id": "177b8dfa-ad24-4f4d-9fe3-0493d6149b25",
      "name": "Category_Manager"
    },
    {
      "parameters": {
        "toolDescription": "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ´Ğ¾Ğ»Ğ³Ğ°Ğ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾ Ğ´Ğ¾Ğ»Ğ³Ğ¸: Ğ´Ğ°Ğ» Ğ² Ğ´Ğ¾Ğ»Ğ³, Ğ²Ğ·ÑĞ» Ğ² Ğ´Ğ¾Ğ»Ğ³, Ğ¼Ğ¾Ğ¸ Ğ´Ğ¾Ğ»Ğ³Ğ¸, Ğ²ĞµÑ€Ğ½ÑƒĞ» Ğ´Ğ¾Ğ»Ğ³. Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: list (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³Ğ¸), add (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³), pay (Ñ‡Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹/Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚), settle (Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³), delete (ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ)",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/debts",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"action\": \"{{ $fromAI('action', 'Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ: list, add, pay, settle, delete', 'string') }}\",\n  \"user_id\": {{ $json.user_id }},\n  \"debt_type\": \"{{ $fromAI('debt_type', 'Ğ¢Ğ¸Ğ¿: given (Ğ´Ğ°Ğ» Ğ² Ğ´Ğ¾Ğ»Ğ³, Ğ¼Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹) Ğ¸Ğ»Ğ¸ received (Ğ²Ğ·ÑĞ» Ğ² Ğ´Ğ¾Ğ»Ğ³, Ñ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½)', 'string') }}\",\n  \"person_name\": \"{{ $fromAI('person_name', 'Ğ˜Ğ¼Ñ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ°', 'string') }}\",\n  \"amount\": {{ $fromAI('amount', 'Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ´Ğ¾Ğ»Ğ³Ğ° Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼, 0 ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ°', 'number') }},\n  \"currency\": \"{{ $fromAI('currency', 'Ğ’Ğ°Ğ»ÑÑ‚Ğ° KGS/USD/EUR/RUB, Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ KGS', 'string') }}\",\n  \"description\": \"{{ $fromAI('description', 'ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ·Ğ° Ñ‡Ñ‚Ğ¾ Ğ´Ğ¾Ğ»Ğ³', 'string') }}\",\n  \"due_date\": \"{{ $fromAI('due_date', 'Ğ”Ğ°Ñ‚Ğ° Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ° YYYY-MM-DD Ğ¸Ğ»Ğ¸ Ğ¿ÑƒÑÑ‚Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ°', 'string') }}\",\n  \"debt_id\": {{ $fromAI('debt_id', 'ID Ğ´Ğ¾Ğ»Ğ³Ğ° Ğ´Ğ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹/Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ, 0 ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½', 'number') }},\n  \"note\": \"{{ $fromAI('note', 'Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ° Ğ¾ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğµ', 'string') }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        3376,
        -2448
      ],
      "id": "c7337502-0043-496d-82cc-99eec42d2708",
      "name": "Debt_Manager"
    },
    {
      "parameters": {
        "toolDescription": "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°Ğ¼Ğ¸ Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°Ğ¼Ğ¸. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸, Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸, ĞµĞ¶ĞµĞ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğµ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹. Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: list (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ), add (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ), pay (Ğ¾Ñ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¼), pause (Ğ¿Ñ€Ğ¸Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ/Ğ²Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ), delete (ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ)",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/recurring",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"action\": \"{{ $fromAI('action', 'Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ: list, add, pay, pause, delete', 'string') }}\",\n  \"user_id\": {{ $json.user_id }},\n  \"title\": \"{{ $fromAI('title', 'ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸: Netflix, Spotify, ĞÑ€ĞµĞ½Ğ´Ğ° Ğ¸ Ñ‚.Ğ´.', 'string') }}\",\n  \"amount\": {{ $fromAI('amount', 'Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼, 0 ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ°', 'number') }},\n  \"currency\": \"{{ $fromAI('currency', 'Ğ’Ğ°Ğ»ÑÑ‚Ğ° KGS/USD/EUR/RUB, Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ KGS', 'string') }}\",\n  \"category\": \"{{ $fromAI('category', 'ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ: ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸, Ğ–Ğ¸Ğ»ÑŒÑ‘, Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚, Ğ¡Ğ²ÑĞ·ÑŒ Ğ¸ Ñ‚.Ğ´.', 'string') }}\",\n  \"frequency\": \"{{ $fromAI('frequency', 'Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°: daily, weekly, monthly, yearly', 'string') }}\",\n  \"next_payment_date\": \"{{ $fromAI('next_payment_date', 'Ğ”Ğ°Ñ‚Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° YYYY-MM-DD', 'string') }}\",\n  \"recurring_id\": {{ $fromAI('recurring_id', 'ID Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ğ´Ğ»Ñ pay/pause/delete, 0 ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½', 'number') }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        3504,
        -2448
      ],
      "id": "a228d1a3-4b98-4cd8-a5ac-9b74e007cc8f",
      "name": "Recurring_Manager"
    },
    {
      "parameters": {
        "toolDescription": "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾ Ğ±ÑĞ´Ğ¶ĞµÑ‚: Ğ¼Ğ¾Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚, ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°, ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ, ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚. Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: get (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ¸ ÑÑ‚Ğ°Ñ‚ÑƒÑ), set (ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ½Ğ° Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¼ĞµÑÑÑ†)",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/budget",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"action\": \"{{ $fromAI('action', 'Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ: get (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚), set (ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚)', 'string') }}\",\n  \"user_id\": {{ $json.user_id }},\n  \"amount\": {{ $fromAI('amount', 'Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ° Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼, 0 ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ°', 'number') }},\n  \"currency\": \"{{ $fromAI('currency', 'Ğ’Ğ°Ğ»ÑÑ‚Ğ° KGS/USD/EUR/RUB, Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ KGS', 'string') }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        3632,
        -2448
      ],
      "id": "f1f1e0bc-ae01-404f-b596-9d05843eee4c",
      "name": "Budget_Manager"
    },
    {
      "parameters": {
        "toolDescription": "Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ†ĞµĞ»ÑĞ¼Ğ¸ Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾ Ñ†ĞµĞ»Ğ¸, Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¸Ñ, ĞºĞ¾Ğ¿Ğ¸Ñ‚ÑŒ Ğ½Ğ°, Ğ¾Ñ‚Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ. Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: list (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ†ĞµĞ»Ğ¸), add (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ), deposit (Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ), withdraw (ÑĞ½ÑÑ‚ÑŒ), complete (Ğ¾Ñ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚Ğ¾Ğ¹), delete (ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ)",
        "method": "POST",
        "url": "https://alikbekalatoo77.app.n8n.cloud/webhook/goals",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"action\": \"{{ $fromAI('action', 'Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ: list, add, deposit, withdraw, complete, delete', 'string') }}\",\n  \"user_id\": {{ $json.user_id }},\n  \"name\": \"{{ $fromAI('goal_name', 'ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ†ĞµĞ»Ğ¸: iPhone, ĞœĞ°ÑˆĞ¸Ğ½Ğ°, ĞÑ‚Ğ¿ÑƒÑĞº Ğ¸ Ñ‚.Ğ´.', 'string') }}\",\n  \"target_amount\": {{ $fromAI('target_amount', 'Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼, 0 ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ°', 'number') }},\n  \"current_amount\": {{ $fromAI('current_amount', 'ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ´Ğ»Ñ add Ğ¸Ğ»Ğ¸ ÑÑƒĞ¼Ğ¼Ğ° Ğ´Ğ»Ñ deposit/withdraw', 'number') }},\n  \"currency\": \"{{ $fromAI('currency', 'Ğ’Ğ°Ğ»ÑÑ‚Ğ° KGS/USD/EUR/RUB, Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ KGS', 'string') }}\",\n  \"deadline\": \"{{ $fromAI('deadline', 'Ğ”ĞµĞ´Ğ»Ğ°Ğ¹Ğ½ YYYY-MM-DD Ğ¸Ğ»Ğ¸ Ğ¿ÑƒÑÑ‚Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ°', 'string') }}\",\n  \"goal_id\": {{ $fromAI('goal_id', 'ID Ñ†ĞµĞ»Ğ¸ Ğ´Ğ»Ñ deposit/withdraw/complete/delete, 0 ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½', 'number') }},\n  \"note\": \"{{ $fromAI('note', 'Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ° Ğ¾ Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğ¸', 'string') }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        3888,
        -2448
      ],
      "id": "goals-manager-tool-001",
      "name": "Goals_Manager"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Ğ˜Ñ‰ĞµÑ‚ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ (Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ñ‹ Ğ¸ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñ‹) Ğ¿Ğ¾ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğ¼ ÑĞ»Ğ¾Ğ²Ğ°Ğ¼ Ğ² Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğ¸. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚: Ğ½Ğ°Ğ¹Ğ´Ğ¸ Ñ‚Ñ€Ğ°Ñ‚Ñ‹ Ğ½Ğ° ĞºĞ¾Ñ„Ğµ, Ğ¿Ğ¾Ğ¸ÑĞº Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹, Ğ³Ğ´Ğµ Ñ Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» Ğ½Ğ° ĞµĞ´Ñƒ, ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» Ğ½Ğ° Ñ‚Ğ°ĞºÑĞ¸",
        "operation": "executeQuery",
        "query": "=SELECT id, date, category, amount, currency, description, 'expense' as type FROM expenses WHERE user_id = {{ $('Telegram Trigger').item.json.message.from.id }} AND deleted_at IS NULL AND (description ILIKE '%{{ $fromAI('search', 'ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°', 'string') }}%' OR category ILIKE '%{{ $fromAI('search', 'ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°', 'string') }}%') UNION ALL SELECT id, date, category, amount, currency, description, 'income' as type FROM income WHERE user_id = {{ $('Telegram Trigger').item.json.message.from.id }} AND deleted_at IS NULL AND (description ILIKE '%{{ $fromAI('search', 'ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°', 'string') }}%' OR category ILIKE '%{{ $fromAI('search', 'ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ°', 'string') }}%') ORDER BY date DESC LIMIT 20",
        "options": {}
      },
      "type": "n8n-nodes-base.postgresTool",
      "typeVersion": 2.6,
      "position": [
        3760,
        -2448
      ],
      "id": "d90634bd-8204-459a-9174-eddb629fd44d",
      "name": "Search_Transactions",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "categories-webhook",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        16,
        -2152
      ],
      "id": "fad81420-b082-4d1d-a1cc-c72b0002ee2d",
      "name": "Categories Webhook",
      "webhookId": "categories-webhook-id"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "list",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "list"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "add",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "add"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "delete",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "delete"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        240,
        -2168
      ],
      "id": "af1032c7-486b-41eb-99b8-bcd837d49893",
      "name": "Route Category Action"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=SELECT c.id, c.name, c.type, c.icon, c.color, c.is_default\nFROM categories c\nWHERE (c.user_id IS NULL OR c.user_id = {{ $json.body.user_id }})\n  AND c.is_active = true\n  AND (c.type = '{{ $json.body.type }}' OR '{{ $json.body.type }}' = '')\nORDER BY c.is_default DESC, c.sort_order, c.name",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -2344
      ],
      "id": "67803bf9-e033-46de-8b12-a4c40ec4495d",
      "name": "Get Categories",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=INSERT INTO categories (user_id, name, type, icon, is_default, is_active)\nVALUES (\n  {{ $json.body.user_id }},\n  '{{ $json.body.name }}',\n  '{{ $json.body.type }}',\n  '{{ $json.body.icon || \"ğŸ“\" }}',\n  false,\n  true\n)\nON CONFLICT (user_id, name, type) DO NOTHING\nRETURNING id, name, type, icon",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -2152
      ],
      "id": "7caebde3-92b6-416b-8ec0-d56c5e394ad6",
      "name": "Add Category",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE categories\nSET is_active = false, updated_at = NOW()\nWHERE user_id = {{ $json.body.user_id }}\n  AND name = '{{ $json.body.name }}'\n  AND type = '{{ $json.body.type }}'\n  AND is_default = false\nRETURNING id, name, 'deleted' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -1960
      ],
      "id": "1cc40132-2f56-4ab6-b0a9-00e36f026ae6",
      "name": "Delete Category",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ\nconst items = $input.all();\nconst action = $('Categories Webhook').first().json.body.action;\n\nlet result = {};\n\nif (action === 'list') {\n  const categories = items.map(item => ({\n    name: item.json.name,\n    icon: item.json.icon,\n    type: item.json.type,\n    is_default: item.json.is_default\n  }));\n  \n  const expenses = categories.filter(c => c.type === 'expense');\n  const income = categories.filter(c => c.type === 'income');\n  \n  result = {\n    success: true,\n    expenses: expenses.map(c => `${c.icon} ${c.name}${c.is_default ? '' : ' (ÑĞ²Ğ¾Ğ¹)'}`).join(', '),\n    income: income.map(c => `${c.icon} ${c.name}${c.is_default ? '' : ' (ÑĞ²Ğ¾Ğ¹)'}`).join(', '),\n    total: categories.length\n  };\n} else if (action === 'add') {\n  if (items.length > 0 && items[0].json.id) {\n    result = {\n      success: true,\n      message: `ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ \"${items[0].json.name}\" Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ°`,\n      category: items[0].json\n    };\n  } else {\n    result = {\n      success: false,\n      message: 'ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¸Ğ»Ğ¸ Ğ½Ğµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ'\n    };\n  }\n} else if (action === 'delete') {\n  if (items.length > 0 && items[0].json.id) {\n    result = {\n      success: true,\n      message: `ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ \"${items[0].json.name}\" ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°`\n    };\n  } else {\n    result = {\n      success: false,\n      message: 'ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ° Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ»ÑŒĞ·Ñ ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ (Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½ÑƒÑ)'\n    };\n  }\n}\n\nreturn [{ json: result }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        -2152
      ],
      "id": "f7ff7c50-bf1d-465b-b9cd-3c9a47a1aeda",
      "name": "Format Category Response"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        912,
        -2152
      ],
      "id": "03480f91-443e-46df-a313-c5212cec0aad",
      "name": "Respond Categories"
    },
    {
      "parameters": {
        "content": "## Category",
        "height": 624,
        "width": 1184
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -64,
        -2400
      ],
      "id": "a8224cb4-7ec9-4dd2-b41a-1c08bec32ab3",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "debts",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        16,
        -936
      ],
      "id": "130c257c-467a-49ff-9ff4-c1a5eeac7ab4",
      "name": "Debts Webhook",
      "webhookId": "debts-webhook-id"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "list",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "list"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "add",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "add"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "pay",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pay"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "settle",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "settle"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "delete",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "delete"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        240,
        -984
      ],
      "id": "28e36868-4d05-4176-a842-b7660f306e9c",
      "name": "Route Debt Action"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=SELECT d.id, d.person_name, d.debt_type, d.original_amount, d.remaining_amount, d.currency, d.description, d.due_date, d.is_settled, d.created_at\nFROM debts d\nWHERE d.user_id = {{ $json.body.user_id }}\nORDER BY d.is_settled ASC, d.due_date ASC NULLS LAST, d.created_at DESC",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -1320
      ],
      "id": "58572148-5247-40ba-820c-09dcf076491f",
      "name": "Get Debts",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=INSERT INTO debts (user_id, person_name, debt_type, original_amount, remaining_amount, currency, description, due_date)\nVALUES (\n  {{ $json.body.user_id }},\n  '{{ $json.body.person_name }}',\n  '{{ $json.body.debt_type }}',\n  {{ $json.body.amount }},\n  {{ $json.body.amount }},\n  '{{ $json.body.currency || \"KGS\" }}',\n  '{{ $json.body.description || \"\" }}',\n  {{ $json.body.due_date ? \"'\" + $json.body.due_date + \"'\" : \"NULL\" }}\n)\nRETURNING id, person_name, debt_type, original_amount, currency",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -1128
      ],
      "id": "b6c76e11-6c3d-45d5-94e4-18147557236e",
      "name": "Add Debt",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=WITH debt_update AS (\n  UPDATE debts\n  SET remaining_amount = remaining_amount - {{ $json.body.amount }},\n      is_settled = CASE WHEN remaining_amount - {{ $json.body.amount }} <= 0 THEN true ELSE false END,\n      updated_at = NOW()\n  WHERE id = {{ $json.body.debt_id }} AND user_id = {{ $json.body.user_id }}\n  RETURNING id, person_name, remaining_amount, is_settled\n),\npayment_insert AS (\n  INSERT INTO debt_payments (debt_id, amount, note)\n  SELECT {{ $json.body.debt_id }}, {{ $json.body.amount }}, '{{ $json.body.note || \"Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°\" }}'\n  WHERE EXISTS (SELECT 1 FROM debt_update)\n  RETURNING id\n)\nSELECT * FROM debt_update",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -936
      ],
      "id": "3ee4038f-eb64-44d5-bc36-0c18d08f4fb4",
      "name": "Pay Debt",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE debts\nSET remaining_amount = 0, is_settled = true, settled_at = NOW(), updated_at = NOW()\nWHERE user_id = {{ $json.body.user_id }}\n  AND is_settled = false\n  AND (\n    ({{ $json.body.debt_id }} > 0 AND id = {{ $json.body.debt_id }})\n    OR ({{ $json.body.debt_id }} = 0 AND LOWER(person_name) LIKE LOWER('%{{ $json.body.person_name }}%'))\n  )\nRETURNING id, person_name, 'settled' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -744
      ],
      "id": "6bf0d891-4ae5-4ce5-9345-3668aaf5efab",
      "name": "Settle Debt",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=DELETE FROM debts\nWHERE id = {{ $json.body.debt_id }} AND user_id = {{ $json.body.user_id }}\nRETURNING id, person_name, 'deleted' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -552
      ],
      "id": "79e23099-3f54-4a30-9f9c-8831d8a82a00",
      "name": "Delete Debt",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ»Ğ³Ğ¾Ğ²\nconst items = $input.all();\nconst action = $('Debts Webhook').first().json.body.action;\n\nlet result = {};\n\nif (action === 'list') {\n  const debts = items.map(item => item.json);\n  const iOwe = debts.filter(d => d.debt_type === 'received' && !d.is_settled);\n  const owedToMe = debts.filter(d => d.debt_type === 'given' && !d.is_settled);\n  const settled = debts.filter(d => d.is_settled);\n  \n  result = {\n    success: true,\n    i_owe: iOwe.map(d => `${d.person_name}: ${d.remaining_amount} ${d.currency}${d.due_date ? ' (Ğ´Ğ¾ ' + new Date(d.due_date).toLocaleDateString('ru') + ')' : ''}`).join('; ') || 'Ğ½ĞµÑ‚',\n    owed_to_me: owedToMe.map(d => `${d.person_name}: ${d.remaining_amount} ${d.currency}${d.due_date ? ' (Ğ´Ğ¾ ' + new Date(d.due_date).toLocaleDateString('ru') + ')' : ''}`).join('; ') || 'Ğ½ĞµÑ‚',\n    settled_count: settled.length,\n    total_i_owe: iOwe.reduce((s, d) => s + parseFloat(d.remaining_amount), 0),\n    total_owed_to_me: owedToMe.reduce((s, d) => s + parseFloat(d.remaining_amount), 0)\n  };\n} else if (action === 'add') {\n  if (items.length > 0 && items[0].json.id) {\n    const d = items[0].json;\n    const typeText = d.debt_type === 'received' ? 'Ğ¯ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½' : 'ĞœĞ½Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½';\n    result = {\n      success: true,\n      message: `${typeText} ${d.person_name}: ${d.original_amount} ${d.currency}`\n    };\n  } else {\n    result = { success: false, message: 'ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³' };\n  }\n} else if (action === 'pay') {\n  if (items.length > 0 && items[0].json.id) {\n    const d = items[0].json;\n    result = {\n      success: true,\n      message: d.is_settled ? `Ğ”Ğ¾Ğ»Ğ³ ${d.person_name} Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¿Ğ¾Ğ³Ğ°ÑˆĞµĞ½!` : `ĞĞ¿Ğ»Ğ°Ñ‡ĞµĞ½Ğ¾. ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: ${d.remaining_amount}`\n    };\n  } else {\n    result = { success: false, message: 'Ğ”Ğ¾Ğ»Ğ³ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½' };\n  }\n} else if (action === 'settle') {\n  if (items.length > 0 && items[0].json.id) {\n    result = { success: true, message: `Ğ”Ğ¾Ğ»Ğ³ ${items[0].json.person_name} Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚` };\n  } else {\n    result = { success: false, message: 'Ğ”Ğ¾Ğ»Ğ³ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½' };\n  }\n} else if (action === 'delete') {\n  if (items.length > 0 && items[0].json.id) {\n    result = { success: true, message: `Ğ”Ğ¾Ğ»Ğ³ ${items[0].json.person_name} ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½` };\n  } else {\n    result = { success: false, message: 'Ğ”Ğ¾Ğ»Ğ³ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½' };\n  }\n}\n\nreturn [{ json: result }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        -936
      ],
      "id": "84d059ac-2b06-47d3-a3ae-4728419300cd",
      "name": "Format Debt Response"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        912,
        -936
      ],
      "id": "35671208-0b93-43bc-8c90-24da9144fa91",
      "name": "Respond Debts"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "recurring",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        16,
        56
      ],
      "id": "aba997cb-0214-4f6b-be35-d0afca1d345e",
      "name": "Recurring Webhook",
      "webhookId": "recurring-webhook-id"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "list",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "list"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "add",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "add"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "pay",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pay"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "pause",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pause"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "delete",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "delete"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        240,
        8
      ],
      "id": "b82e5660-94ec-4378-8a90-c18aef62ffd1",
      "name": "Route Recurring Action"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=SELECT r.id, r.title, r.amount, r.currency, r.frequency, r.next_payment_date, r.is_active, r.auto_create, r.category\nFROM recurring_payments r\nWHERE r.user_id = {{ $json.body.user_id }}\nORDER BY r.is_active DESC, r.next_payment_date ASC",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -328
      ],
      "id": "5bf495fb-708d-463b-9de2-50c419fb04e5",
      "name": "Get Recurring",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=INSERT INTO recurring_payments (user_id, title, amount, currency, frequency, start_date, next_payment_date, category)\nVALUES (\n  {{ $json.body.user_id }},\n  '{{ $json.body.title }}',\n  {{ $json.body.amount || 0 }},\n  '{{ $json.body.currency || \"KGS\" }}',\n  '{{ $json.body.frequency || \"monthly\" }}',\n  COALESCE(NULLIF('{{ $json.body.next_payment_date }}', '')::date, CURRENT_DATE),\n  COALESCE(NULLIF('{{ $json.body.next_payment_date }}', '')::date, CURRENT_DATE),\n  '{{ $json.body.category || \"ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸\" }}'\n)\nRETURNING id, title, amount, currency, frequency, next_payment_date",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        -136
      ],
      "id": "21605597-e355-45a2-8339-7df2e483d856",
      "name": "Add Recurring",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=WITH freq_interval AS (\n  SELECT CASE \n    WHEN frequency = 'daily' THEN INTERVAL '1 day'\n    WHEN frequency = 'weekly' THEN INTERVAL '1 week'\n    WHEN frequency = 'monthly' THEN INTERVAL '1 month'\n    WHEN frequency = 'yearly' THEN INTERVAL '1 year'\n    ELSE INTERVAL '1 month'\n  END as interval_val\n  FROM recurring_payments WHERE id = {{ $json.body.recurring_id }}\n)\nUPDATE recurring_payments\nSET next_payment_date = next_payment_date + (SELECT interval_val FROM freq_interval),\n    last_payment_date = NOW(),\n    updated_at = NOW()\nWHERE id = {{ $json.body.recurring_id }} AND user_id = {{ $json.body.user_id }}\nRETURNING id, title, next_payment_date, 'paid' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        56
      ],
      "id": "d14a0e60-e7e2-4a2f-8ed7-5676060b4892",
      "name": "Pay Recurring",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE recurring_payments\nSET is_active = NOT is_active, updated_at = NOW()\nWHERE id = {{ $json.body.recurring_id }} AND user_id = {{ $json.body.user_id }}\nRETURNING id, title, is_active",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        248
      ],
      "id": "8c71bfbd-5f5d-4f56-b203-b988371d784c",
      "name": "Pause Recurring",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=DELETE FROM recurring_payments\nWHERE id = {{ $json.body.recurring_id }} AND user_id = {{ $json.body.user_id }}\nRETURNING id, title, 'deleted' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        440
      ],
      "id": "c45146af-3496-4611-984d-44cbb919cc3c",
      "name": "Delete Recurring",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ´Ğ»Ñ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ñ… Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹\nconst items = $input.all();\nconst action = $('Recurring Webhook').first().json.body.action;\n\nlet result = {};\n\nconst freqNames = {\n  'daily': 'ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾',\n  'weekly': 'ĞµĞ¶ĞµĞ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¾', \n  'monthly': 'ĞµĞ¶ĞµĞ¼ĞµÑÑÑ‡Ğ½Ğ¾',\n  'yearly': 'ĞµĞ¶ĞµĞ³Ğ¾Ğ´Ğ½Ğ¾'\n};\n\nif (action === 'list') {\n  const payments = items.map(item => item.json);\n  const active = payments.filter(p => p.is_active);\n  const paused = payments.filter(p => !p.is_active);\n  \n  result = {\n    success: true,\n    active: active.map(p => `${p.category_icon || 'ğŸ“…'} ${p.title}: ${p.amount} ${p.currency} (${freqNames[p.frequency] || p.frequency}, ÑĞ»ĞµĞ´: ${new Date(p.next_payment_date).toLocaleDateString('ru')})`).join('; ') || 'Ğ½ĞµÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ…',\n    paused: paused.map(p => `${p.title} (Ğ¿Ñ€Ğ¸Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½)`).join('; ') || 'Ğ½ĞµÑ‚',\n    total_monthly: active.filter(p => p.frequency === 'monthly').reduce((s, p) => s + parseFloat(p.amount), 0),\n    count: active.length\n  };\n} else if (action === 'add') {\n  if (items.length > 0 && items[0].json.id) {\n    const p = items[0].json;\n    result = {\n      success: true,\n      message: `Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶ \"${p.title}\": ${p.amount} ${p.currency} ${freqNames[p.frequency] || p.frequency}`\n    };\n  } else {\n    result = { success: false, message: 'ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ' };\n  }\n} else if (action === 'pay') {\n  if (items.length > 0 && items[0].json.id) {\n    const p = items[0].json;\n    result = {\n      success: true,\n      message: `ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶ \"${p.title}\" Ğ¾Ñ‚Ğ¼ĞµÑ‡ĞµĞ½. Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹: ${new Date(p.next_payment_date).toLocaleDateString('ru')}`\n    };\n  } else {\n    result = { success: false, message: 'ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½' };\n  }\n} else if (action === 'pause') {\n  if (items.length > 0 && items[0].json.id) {\n    const p = items[0].json;\n    result = {\n      success: true,\n      message: p.is_active ? `ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶ \"${p.title}\" Ğ²Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½` : `ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶ \"${p.title}\" Ğ¿Ñ€Ğ¸Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½`\n    };\n  } else {\n    result = { success: false, message: 'ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½' };\n  }\n} else if (action === 'delete') {\n  if (items.length > 0 && items[0].json.id) {\n    result = { success: true, message: `ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶ \"${items[0].json.title}\" ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½` };\n  } else {\n    result = { success: false, message: 'ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½' };\n  }\n}\n\nreturn [{ json: result }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        56
      ],
      "id": "bdcf9db9-c2cb-439d-bac0-b1544e42afd0",
      "name": "Format Recurring Response"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        912,
        56
      ],
      "id": "f3516f8b-0378-4daf-b48b-d981b5bf561d",
      "name": "Respond Recurring"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "settings",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        16,
        952
      ],
      "id": "f60f5ec7-1cdc-495c-ae75-846fad2bd734",
      "name": "Settings Webhook",
      "webhookId": "settings-webhook-id"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "get",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "get"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "set_mode",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "set_mode"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "set_currency",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "set_currency"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "set_budget",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "set_budget"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        240,
        920
      ],
      "id": "bd389681-1e88-4bc2-8d0f-44336c87dd61",
      "name": "Route Settings Action"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=SELECT user_id, preferred_currency, usage_type, monthly_budget FROM users WHERE user_id = {{ $json.body.user_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        664
      ],
      "id": "05f42809-3933-4626-9513-d547431947b0",
      "name": "Get Settings",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE users SET usage_type = '{{ $json.body.value }}', updated_at = NOW() WHERE user_id = {{ $json.body.user_id }} RETURNING user_id, usage_type",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        856
      ],
      "id": "0803c976-5e4c-40a0-90d6-6e149f65510b",
      "name": "Set Mode",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE users SET preferred_currency = '{{ $json.body.value }}', updated_at = NOW() WHERE user_id = {{ $json.body.user_id }} RETURNING user_id, preferred_currency",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        1048
      ],
      "id": "58ad7db3-a892-4e41-afcd-069b8c58d145",
      "name": "Set Currency",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE users SET monthly_budget = {{ $json.body.value }}, updated_at = NOW() WHERE user_id = {{ $json.body.user_id }} RETURNING user_id, monthly_budget",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        1240
      ],
      "id": "ab0071a0-2bd5-430f-85c6-3bcce528cb59",
      "name": "Set Budget",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst action = $('Settings Webhook').first().json.body.action;\n\nlet result = {};\n\nif (action === 'get') {\n  const s = items[0]?.json || {};\n  const modeText = s.usage_type === 'business' ? 'ğŸ’¼ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ' : 'ğŸ‘¤ Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğ¹';\n  result = {\n    success: true,\n    message: `âš™ï¸ Ğ¢Ğ²Ğ¾Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸:\\nâ€¢ Ğ ĞµĞ¶Ğ¸Ğ¼: ${modeText}\\nâ€¢ Ğ’Ğ°Ğ»ÑÑ‚Ğ°: ${s.preferred_currency || 'KGS'}\\nâ€¢ Ğ‘ÑĞ´Ğ¶ĞµÑ‚: ${s.monthly_budget ? s.monthly_budget + ' Ğ² Ğ¼ĞµÑÑÑ†' : 'Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½'}`\n  };\n} else if (action === 'set_mode') {\n  const s = items[0]?.json || {};\n  const modeText = s.usage_type === 'business' ? 'ğŸ’¼ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ' : 'ğŸ‘¤ Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğ¹';\n  result = {\n    success: true,\n    message: `âœ… Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¸Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½ Ğ½Ğ°: ${modeText}`\n  };\n} else if (action === 'set_currency') {\n  const s = items[0]?.json || {};\n  result = {\n    success: true,\n    message: `âœ… Ğ’Ğ°Ğ»ÑÑ‚Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ° Ğ½Ğ°: ${s.preferred_currency}`\n  };\n} else if (action === 'set_budget') {\n  const s = items[0]?.json || {};\n  result = {\n    success: true,\n    message: `âœ… Ğ‘ÑĞ´Ğ¶ĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½: ${s.monthly_budget} Ğ² Ğ¼ĞµÑÑÑ†`\n  };\n}\n\nreturn [{ json: result }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        952
      ],
      "id": "f07d2003-d5da-4bf7-aca0-c3a8f3988590",
      "name": "Format Settings Response"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        912,
        952
      ],
      "id": "b8dfd5c8-d61f-4021-8a5c-6fd5f9dcc8de",
      "name": "Respond Settings"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "budget",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        16,
        1560
      ],
      "id": "baa47e60-7f8a-4b9a-830d-b1b8f5664333",
      "name": "Budget Webhook",
      "webhookId": "budget-webhook-id"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "get",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "get"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "set",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "set"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        240,
        1560
      ],
      "id": "5afee978-ffd7-4c0f-a373-6e5f2d87e048",
      "name": "Route Budget Action"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=WITH current_month AS (\n  SELECT TO_CHAR(CURRENT_DATE AT TIME ZONE 'Asia/Bishkek', 'YYYY-MM') as month\n),\nbudget_info AS (\n  SELECT b.budget_amount, b.currency, b.month\n  FROM budgets b, current_month cm\n  WHERE b.user_id = {{ $json.body.user_id }} AND b.month = cm.month\n),\nexpenses_sum AS (\n  SELECT COALESCE(SUM(amount), 0) as total_spent\n  FROM expenses\n  WHERE user_id = {{ $json.body.user_id }}\n    AND deleted_at IS NULL\n    AND TO_CHAR(date AT TIME ZONE 'Asia/Bishkek', 'YYYY-MM') = (SELECT month FROM current_month)\n)\nSELECT \n  bi.budget_amount,\n  bi.currency,\n  bi.month,\n  es.total_spent,\n  bi.budget_amount - es.total_spent as remaining,\n  ROUND((es.total_spent / bi.budget_amount * 100)::numeric, 1) as percent_used\nFROM budget_info bi, expenses_sum es",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        1464
      ],
      "id": "e6f0fff4-a0c4-423f-a465-81146a801d1c",
      "name": "Get Budget",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=INSERT INTO budgets (user_id, month, budget_amount, currency)\nVALUES (\n  {{ $json.body.user_id }},\n  TO_CHAR(CURRENT_DATE AT TIME ZONE 'Asia/Bishkek', 'YYYY-MM'),\n  {{ $json.body.amount }},\n  '{{ $json.body.currency || 'KGS' }}'\n)\nON CONFLICT (user_id, month) DO UPDATE SET\n  budget_amount = EXCLUDED.budget_amount,\n  currency = EXCLUDED.currency,\n  last_updated = NOW()\nRETURNING id, user_id, month, budget_amount, currency",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        1656
      ],
      "id": "6c7419d8-ff49-4165-aed9-1759a4658a02",
      "name": "Set Budget New",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst action = $('Budget Webhook').first().json.body.action;\n\nlet result = {};\n\nconst monthNames = {\n  '01': 'ÑĞ½Ğ²Ğ°Ñ€ÑŒ', '02': 'Ñ„ĞµĞ²Ñ€Ğ°Ğ»ÑŒ', '03': 'Ğ¼Ğ°Ñ€Ñ‚', '04': 'Ğ°Ğ¿Ñ€ĞµĞ»ÑŒ',\n  '05': 'Ğ¼Ğ°Ğ¹', '06': 'Ğ¸ÑĞ½ÑŒ', '07': 'Ğ¸ÑĞ»ÑŒ', '08': 'Ğ°Ğ²Ğ³ÑƒÑÑ‚',\n  '09': 'ÑĞµĞ½Ñ‚ÑĞ±Ñ€ÑŒ', '10': 'Ğ¾ĞºÑ‚ÑĞ±Ñ€ÑŒ', '11': 'Ğ½Ğ¾ÑĞ±Ñ€ÑŒ', '12': 'Ğ´ĞµĞºĞ°Ğ±Ñ€ÑŒ'\n};\n\nif (action === 'get') {\n  const b = items[0]?.json;\n  if (b && b.budget_amount) {\n    const monthNum = b.month.split('-')[1];\n    const monthName = monthNames[monthNum] || b.month;\n    const percentUsed = parseFloat(b.percent_used) || 0;\n    let statusEmoji = 'âœ…';\n    if (percentUsed >= 100) statusEmoji = 'ğŸ”´';\n    else if (percentUsed >= 80) statusEmoji = 'ğŸŸ¡';\n    \n    result = {\n      success: true,\n      message: `ğŸ’° Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ½Ğ° ${monthName}:\\nâ€¢ Ğ›Ğ¸Ğ¼Ğ¸Ñ‚: ${Number(b.budget_amount).toLocaleString()} ${b.currency}\\nâ€¢ ĞŸĞ¾Ñ‚Ñ€Ğ°Ñ‡ĞµĞ½Ğ¾: ${Number(b.total_spent).toLocaleString()} ${b.currency} (${percentUsed}%)\\nâ€¢ ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: ${Number(b.remaining).toLocaleString()} ${b.currency}\\n${statusEmoji} ${percentUsed >= 100 ? 'Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½!' : percentUsed >= 80 ? 'Ğ’Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ: Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ¸ÑÑ‡ĞµÑ€Ğ¿Ğ°Ğ½' : 'Ğ’ Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ°Ñ… Ğ±ÑĞ´Ğ¶ĞµÑ‚Ğ°'}`\n    };\n  } else {\n    result = {\n      success: true,\n      message: 'ğŸ“Š Ğ‘ÑĞ´Ğ¶ĞµÑ‚ Ğ½Ğ° ÑÑ‚Ğ¾Ñ‚ Ğ¼ĞµÑÑÑ† Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½.\\n\\nĞ§Ñ‚Ğ¾Ğ±Ñ‹ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ, ÑĞºĞ°Ğ¶Ğ¸: \"ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸ Ğ±ÑĞ´Ğ¶ĞµÑ‚ 50000\"'\n    };\n  }\n} else if (action === 'set') {\n  const b = items[0]?.json;\n  if (b && b.budget_amount) {\n    const monthNum = b.month.split('-')[1];\n    const monthName = monthNames[monthNum] || b.month;\n    result = {\n      success: true,\n      message: `âœ… Ğ‘ÑĞ´Ğ¶ĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½!\\nâ€¢ ${monthName}: ${Number(b.budget_amount).toLocaleString()} ${b.currency}`\n    };\n  } else {\n    result = { success: false, message: 'âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚' };\n  }\n}\n\nreturn [{ json: result }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        1560
      ],
      "id": "01ac0e11-3b62-434b-9ca4-9be5aa1ca9a4",
      "name": "Format Budget Response"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        912,
        1560
      ],
      "id": "68a99268-abd3-4ad8-a61b-70207fa54ca7",
      "name": "Respond Budget"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "goals",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        16,
        2200
      ],
      "id": "goals-webhook-001",
      "name": "Goals Webhook",
      "webhookId": "goals-webhook-id"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "list",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "list"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "add",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "add"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "deposit",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "deposit"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "withdraw",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "withdraw"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "complete",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "complete"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.action }}",
                    "rightValue": "delete",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "delete"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        240,
        2200
      ],
      "id": "goals-route-action-001",
      "name": "Route Goal Action"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=SELECT g.id, g.name, g.target_amount, g.current_amount, g.currency, g.deadline, g.icon, g.color, g.is_completed, g.priority,\n  ROUND(g.current_amount * 100.0 / NULLIF(g.target_amount, 0), 1) as progress_percent,\n  CASE WHEN g.deadline IS NOT NULL THEN g.deadline - CURRENT_DATE ELSE NULL END as days_left\nFROM savings_goals g\nWHERE g.user_id = {{ $json.body.user_id }}\nORDER BY g.is_completed ASC, g.priority DESC, g.created_at DESC",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        1880
      ],
      "id": "goals-get-001",
      "name": "Get Goals",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=INSERT INTO savings_goals (user_id, name, target_amount, current_amount, currency, deadline, icon, color)\nVALUES (\n  {{ $json.body.user_id }},\n  '{{ $json.body.name }}',\n  {{ $json.body.target_amount }},\n  {{ $json.body.current_amount || 0 }},\n  '{{ $json.body.currency || \"KGS\" }}',\n  {{ $json.body.deadline ? \"'\" + $json.body.deadline + \"'\" : \"NULL\" }},\n  '{{ $json.body.icon || \"ğŸ¯\" }}',\n  '{{ $json.body.color || \"#4CAF50\" }}'\n)\nRETURNING id, name, target_amount, current_amount, currency",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        2072
      ],
      "id": "goals-add-001",
      "name": "Add Goal",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=WITH goal_update AS (\n  UPDATE savings_goals\n  SET current_amount = current_amount + {{ $json.body.current_amount }},\n      is_completed = CASE WHEN current_amount + {{ $json.body.current_amount }} >= target_amount THEN true ELSE false END,\n      updated_at = NOW()\n  WHERE user_id = {{ $json.body.user_id }}\n    AND (\n      ({{ $json.body.goal_id }} > 0 AND id = {{ $json.body.goal_id }})\n      OR ({{ $json.body.goal_id }} = 0 AND LOWER(name) LIKE LOWER('%{{ $json.body.name }}%'))\n    )\n  RETURNING id, name, current_amount, target_amount, is_completed\n),\ndeposit_insert AS (\n  INSERT INTO goal_contributions (goal_id, user_id, amount, type, note, source)\n  SELECT id, {{ $json.body.user_id }}, {{ $json.body.current_amount }}, 'deposit', '{{ $json.body.note || \"ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ\" }}', 'telegram'\n  FROM goal_update\n  RETURNING id\n)\nSELECT *, ROUND(current_amount * 100.0 / NULLIF(target_amount, 0), 1) as progress_percent FROM goal_update",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        2264
      ],
      "id": "goals-deposit-001",
      "name": "Deposit Goal",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=WITH goal_update AS (\n  UPDATE savings_goals\n  SET current_amount = GREATEST(0, current_amount - {{ $json.body.current_amount }}),\n      updated_at = NOW()\n  WHERE id = {{ $json.body.goal_id }} AND user_id = {{ $json.body.user_id }}\n  RETURNING id, name, current_amount, target_amount\n),\nwithdraw_insert AS (\n  INSERT INTO goal_contributions (goal_id, user_id, amount, type, note, source)\n  SELECT {{ $json.body.goal_id }}, {{ $json.body.user_id }}, {{ $json.body.current_amount }}, 'withdraw', '{{ $json.body.note || \"Ğ¡Ğ½ÑÑ‚Ğ¸Ğµ\" }}', 'telegram'\n  WHERE EXISTS (SELECT 1 FROM goal_update)\n  RETURNING id\n)\nSELECT *, ROUND(current_amount * 100.0 / NULLIF(target_amount, 0), 1) as progress_percent FROM goal_update",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        2456
      ],
      "id": "goals-withdraw-001",
      "name": "Withdraw Goal",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=UPDATE savings_goals\nSET is_completed = true, completed_at = NOW(), updated_at = NOW()\nWHERE id = {{ $json.body.goal_id }} AND user_id = {{ $json.body.user_id }}\nRETURNING id, name, current_amount, target_amount, 'completed' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        2648
      ],
      "id": "goals-complete-001",
      "name": "Complete Goal",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=DELETE FROM savings_goals\nWHERE id = {{ $json.body.goal_id }} AND user_id = {{ $json.body.user_id }}\nRETURNING id, name, 'deleted' as status",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        464,
        2840
      ],
      "id": "goals-delete-001",
      "name": "Delete Goal",
      "credentials": {
        "postgres": {
          "id": "5T19Mbva6dh2EvkZ",
          "name": "Chyngyz account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ´Ğ»Ñ Ñ†ĞµĞ»ĞµĞ¹ Ğ½Ğ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¸Ğ¹\nconst items = $input.all();\nconst action = $('Goals Webhook').first().json.body.action;\n\nlet result = {};\n\nif (action === 'list') {\n  const goals = items.map(item => item.json);\n  const active = goals.filter(g => !g.is_completed);\n  const completed = goals.filter(g => g.is_completed);\n  \n  const totalSaved = active.reduce((s, g) => s + parseFloat(g.current_amount || 0), 0);\n  const totalTarget = active.reduce((s, g) => s + parseFloat(g.target_amount || 0), 0);\n  \n  result = {\n    success: true,\n    goals_count: active.length,\n    completed_count: completed.length,\n    total_saved: totalSaved,\n    total_target: totalTarget,\n    goals: active.map(g => {\n      let status = `${g.name}: ${g.current_amount}/${g.target_amount} ${g.currency} (${g.progress_percent || 0}%)`;\n      if (g.days_left !== null) {\n        if (g.days_left > 0) status += ` â€” Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ ${g.days_left} Ğ´Ğ½.`;\n        else if (g.days_left === 0) status += ' â€” ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ´ĞµĞ´Ğ»Ğ°Ğ¹Ğ½!';\n        else status += ` â€” Ğ¿Ñ€Ğ¾ÑÑ€Ğ¾Ñ‡ĞµĞ½Ğ¾ Ğ½Ğ° ${Math.abs(g.days_left)} Ğ´Ğ½.`;\n      }\n      return status;\n    }).join('\\n') || 'Ğ½ĞµÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ñ†ĞµĞ»ĞµĞ¹'\n  };\n} else if (action === 'add') {\n  if (items.length > 0 && items[0].json.id) {\n    const g = items[0].json;\n    result = {\n      success: true,\n      message: `ğŸ¯ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ° Ñ†ĞµĞ»ÑŒ \"${g.name}\" Ğ½Ğ° ${g.target_amount} ${g.currency}`\n    };\n  } else {\n    result = { success: false, message: 'ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ†ĞµĞ»ÑŒ' };\n  }\n} else if (action === 'deposit') {\n  if (items.length > 0 && items[0].json.id) {\n    const g = items[0].json;\n    const msg = g.is_completed \n      ? `ğŸ‰ Ğ¦ĞµĞ»ÑŒ \"${g.name}\" Ğ´Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚Ğ°! ĞĞ°ĞºĞ¾Ğ¿Ğ»ĞµĞ½Ğ¾ ${g.current_amount}/${g.target_amount}`\n      : `ğŸ’° ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾! \"${g.name}\": ${g.current_amount}/${g.target_amount} (${g.progress_percent}%)`;\n    result = { success: true, message: msg };\n  } else {\n    result = { success: false, message: 'Ğ¦ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°' };\n  }\n} else if (action === 'withdraw') {\n  if (items.length > 0 && items[0].json.id) {\n    const g = items[0].json;\n    result = {\n      success: true,\n      message: `ğŸ’¸ Ğ¡Ğ½ÑÑ‚Ğ¾ Ñ Ñ†ĞµĞ»Ğ¸ \"${g.name}\". ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: ${g.current_amount}/${g.target_amount} (${g.progress_percent}%)`\n    };\n  } else {\n    result = { success: false, message: 'Ğ¦ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°' };\n  }\n} else if (action === 'complete') {\n  if (items.length > 0 && items[0].json.id) {\n    result = { success: true, message: `ğŸ† Ğ¦ĞµĞ»ÑŒ \"${items[0].json.name}\" Ğ¾Ñ‚Ğ¼ĞµÑ‡ĞµĞ½Ğ° ĞºĞ°Ğº Ğ´Ğ¾ÑÑ‚Ğ¸Ğ³Ğ½ÑƒÑ‚Ğ°Ñ!` };\n  } else {\n    result = { success: false, message: 'Ğ¦ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°' };\n  }\n} else if (action === 'delete') {\n  if (items.length > 0 && items[0].json.id) {\n    result = { success: true, message: `ğŸ—‘ï¸ Ğ¦ĞµĞ»ÑŒ \"${items[0].json.name}\" ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°` };\n  } else {\n    result = { success: false, message: 'Ğ¦ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°' };\n  }\n}\n\nreturn [{ json: result }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        688,
        2200
      ],
      "id": "goals-format-001",
      "name": "Format Goal Response"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        912,
        2200
      ],
      "id": "goals-respond-001",
      "name": "Respond Goals"
    }
  ],
  "connections": {
    "Error Trigger": {
      "main": [
        [
          {
            "node": "Process Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Error": {
      "main": [
        [
          {
            "node": "Should Notify User?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Should Notify User?": {
      "main": [
        [
          {
            "node": "Notify User About Error",
            "type": "main",
            "index": 0
          },
          {
            "node": "Notify Admin",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Notify Admin",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Ensure User",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ensure User": {
      "main": [
        [
          {
            "node": "Check Onboarding",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Onboarding": {
      "main": [
        [
          {
            "node": "Onboarding Logic",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Message Type",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Onboarding Logic": {
      "main": [
        [
          {
            "node": "Update Onboarding",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Onboarding": {
      "main": [
        [
          {
            "node": "Send Onboarding",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message Type": {
      "main": [
        [
          {
            "node": "Download Voice",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Set Text Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download Voice": {
      "main": [
        [
          {
            "node": "Whisper STT",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Whisper STT": {
      "main": [
        [
          {
            "node": "Set Voice Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Voice Data": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Text Data": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send Reply",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-4.1 Mini": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Get_Expenses": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get_Income": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Create_Expense": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Create_Income": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Delete_Expense": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Delete_Income": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Calculator": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Report_Daily": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Report_Weekly": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Report_Monthly": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Report_Period": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Category_Manager": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Debt_Manager": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Recurring_Manager": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Budget_Manager": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Goals_Manager": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Search_Transactions": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Categories Webhook": {
      "main": [
        [
          {
            "node": "Route Category Action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route Category Action": {
      "main": [
        [
          {
            "node": "Get Categories",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Add Category",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Delete Category",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Categories": {
      "main": [
        [
          {
            "node": "Format Category Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Category": {
      "main": [
        [
          {
            "node": "Format Category Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Category": {
      "main": [
        [
          {
            "node": "Format Category Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Category Response": {
      "main": [
        [
          {
            "node": "Respond Categories",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Debts Webhook": {
      "main": [
        [
          {
            "node": "Route Debt Action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route Debt Action": {
      "main": [
        [
          {
            "node": "Get Debts",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Add Debt",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Pay Debt",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Settle Debt",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Delete Debt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Debts": {
      "main": [
        [
          {
            "node": "Format Debt Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Debt": {
      "main": [
        [
          {
            "node": "Format Debt Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pay Debt": {
      "main": [
        [
          {
            "node": "Format Debt Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Settle Debt": {
      "main": [
        [
          {
            "node": "Format Debt Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Debt": {
      "main": [
        [
          {
            "node": "Format Debt Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Debt Response": {
      "main": [
        [
          {
            "node": "Respond Debts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Recurring Webhook": {
      "main": [
        [
          {
            "node": "Route Recurring Action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route Recurring Action": {
      "main": [
        [
          {
            "node": "Get Recurring",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Add Recurring",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Pay Recurring",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Pause Recurring",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Delete Recurring",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Recurring": {
      "main": [
        [
          {
            "node": "Format Recurring Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Recurring": {
      "main": [
        [
          {
            "node": "Format Recurring Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pay Recurring": {
      "main": [
        [
          {
            "node": "Format Recurring Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pause Recurring": {
      "main": [
        [
          {
            "node": "Format Recurring Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Recurring": {
      "main": [
        [
          {
            "node": "Format Recurring Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Recurring Response": {
      "main": [
        [
          {
            "node": "Respond Recurring",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Settings Webhook": {
      "main": [
        [
          {
            "node": "Route Settings Action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route Settings Action": {
      "main": [
        [
          {
            "node": "Get Settings",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Set Mode",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Set Currency",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Set Budget",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Settings": {
      "main": [
        [
          {
            "node": "Format Settings Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Mode": {
      "main": [
        [
          {
            "node": "Format Settings Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Currency": {
      "main": [
        [
          {
            "node": "Format Settings Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Budget": {
      "main": [
        [
          {
            "node": "Format Settings Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Settings Response": {
      "main": [
        [
          {
            "node": "Respond Settings",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Budget Webhook": {
      "main": [
        [
          {
            "node": "Route Budget Action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route Budget Action": {
      "main": [
        [
          {
            "node": "Get Budget",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Set Budget New",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Budget": {
      "main": [
        [
          {
            "node": "Format Budget Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Budget New": {
      "main": [
        [
          {
            "node": "Format Budget Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Budget Response": {
      "main": [
        [
          {
            "node": "Respond Budget",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Goals Webhook": {
      "main": [
        [
          {
            "node": "Route Goal Action",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Route Goal Action": {
      "main": [
        [
          {
            "node": "Get Goals",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Add Goal",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Deposit Goal",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Withdraw Goal",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Complete Goal",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Delete Goal",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Goals": {
      "main": [
        [
          {
            "node": "Format Goal Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Goal": {
      "main": [
        [
          {
            "node": "Format Goal Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Deposit Goal": {
      "main": [
        [
          {
            "node": "Format Goal Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Withdraw Goal": {
      "main": [
        [
          {
            "node": "Format Goal Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Complete Goal": {
      "main": [
        [
          {
            "node": "Format Goal Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Goal": {
      "main": [
        [
          {
            "node": "Format Goal Response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Goal Response": {
      "main": [
        [
          {
            "node": "Respond Goals",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "instanceId": "3bd415084c202701a4e18d9b066a68ad477720c950e1c2cba4cb2537b78acc07"
  }
}