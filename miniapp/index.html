<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AIAccounter</title>
    
    <!-- Critical CSS inline for fast first paint -->
    <style>
        :root{--bg-main:#0a0a0f;--bg-card:#12121a;--text-primary:#fff;--text-secondary:#8b8b9e;--accent:#6366f1}
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif;background:var(--bg-main);color:var(--text-primary);min-height:100vh;overflow-x:hidden}
        .app{max-width:480px;margin:0 auto;min-height:100vh;position:relative}
        .screen{display:none;min-height:100vh;padding-bottom:80px}
        .screen.active{display:block}
        .loading-overlay{position:fixed;inset:0;background:var(--bg-main);display:flex;align-items:center;justify-content:center;z-index:9999;opacity:0;visibility:hidden;transition:opacity .3s}
        .loading-overlay.active{opacity:1;visibility:visible}
        .spinner-large{width:40px;height:40px;border:3px solid var(--bg-card);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
    </style>
    
    <!-- Theme -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme === 'auto' ? 'dark' : savedTheme);
        })();
    </script>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="style.css?v=2.1" as="style">
    <link rel="preload" href="app.js?v=1.9" as="script">
    
    <!-- Scripts -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="style.css?v=2.0">
    <link rel="stylesheet" href="onboarding.css?v=1.0">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0a0a0f">
</head>
<body>
    <div class="app">
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üè† HOME / DASHBOARD (REDESIGNED)
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="home-screen" class="screen active">
            <!-- Modern Header - Clickable Profile -->
            <header class="home-header">
                <div class="user-block clickable" onclick="switchScreen('profile')">
                    <div class="user-avatar-glow" id="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="header-greeting">
                        <h1 class="greeting-name" id="user-name" data-i18n="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h1>
                        <span class="user-level-badge" id="user-level-badge">
                            <i class="fas fa-star"></i>
                            <span id="user-level-text">–£—Ä. 1</span>
                        </span>
                    </div>
                    <i class="fas fa-chevron-right profile-arrow"></i>
                </div>
            </header>

            <!-- Main Balance Hero -->
            <section class="balance-hero">
                <div class="balance-label" data-i18n="total_balance">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                <div class="balance-amount" id="main-balance">0 —Å</div>
                <div class="balance-trend-pill" id="balance-trend">
                    <i class="fas fa-arrow-trend-up"></i> 0%
                </div>
                
                <div class="stats-floating-row">
                    <div class="stat-pill income">
                        <div class="pill-icon"><i class="fas fa-arrow-down"></i></div>
                        <div class="pill-data">
                            <span class="pill-label" data-i18n="income">–î–æ—Ö–æ–¥</span>
                            <span class="pill-value" id="total-income">0</span>
                        </div>
                    </div>
                    <div class="stat-pill expense">
                        <div class="pill-icon"><i class="fas fa-arrow-up"></i></div>
                        <div class="pill-data">
                            <span class="pill-label" data-i18n="expense">–†–∞—Å—Ö–æ–¥</span>
                            <span class="pill-value" id="total-expense">0</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Budget Widget -->
            <section class="budget-widget budget-widget-mini" id="budget-widget" onclick="switchScreen('budgets')">
                <div class="budget-widget-header">
                    <div class="budget-title">
                        <i class="fas fa-wallet"></i>
                        <span data-i18n="budget">–ë—é–¥–∂–µ—Ç</span>
                    </div>
                    <span class="budget-percentage" id="budget-percentage">0%</span>
                </div>
                <div class="budget-progress-container">
                    <div class="budget-progress-bar">
                        <div class="budget-progress-fill" id="budget-progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="budget-progress-info">
                        <span id="budget-spent">0</span>
                        <span class="budget-separator">/</span>
                        <span id="budget-total">0</span>
                    </div>
                </div>
                <!-- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–≥–¥–∞ –±—é–¥–∂–µ—Ç –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω -->
                <div class="budget-empty" id="budget-empty" style="display: none;">
                    <i class="fas fa-plus-circle"></i>
                    <span data-i18n="set_budget">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—é–¥–∂–µ—Ç</span>
                </div>
            </section>

            <!-- Quick Stats Cards -->
            <section class="stats-cards">
                <div class="stat-card">
                    <div class="stat-card-icon blue">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="stat-card-content">
                        <span class="stat-card-value" id="transactions-count">0</span>
                        <span class="stat-card-label" data-i18n="operations_count">–û–ø–µ—Ä–∞—Ü–∏–π</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-icon orange">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="stat-card-content">
                        <span class="stat-card-value" id="avg-daily">0</span>
                        <span class="stat-card-label" data-i18n="per_day">–í –¥–µ–Ω—å</span>
                    </div>
                </div>
                <div class="stat-card highlight">
                    <div class="stat-card-icon green">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="stat-card-content">
                        <span class="stat-card-value" id="savings-rate">0%</span>
                        <span class="stat-card-label" data-i18n="savings">–≠–∫–æ–Ω–æ–º–∏—è</span>
                    </div>
                    <div class="stat-card-trend" id="savings-rate-trend"></div>
                </div>
            </section>

            <!-- Recent Transactions -->
            <section class="section-modern">
                <div class="section-header-modern">
                    <h2 data-i18n="recent_operations">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                    <button class="btn-text" onclick="switchScreen('history')" data-i18n="all">–í—Å–µ</button>
                </div>
                <div id="recent-transactions" class="tx-list-modern">
                    <!-- Skeletons -->
                    <div class="tx-skeleton"></div>
                    <div class="tx-skeleton"></div>
                    <div class="tx-skeleton"></div>
                </div>
            </section>

            <!-- Top Categories -->
            <section class="section-modern">
                <div class="section-header-modern">
                    <h2 data-i18n="top_expenses">–¢–æ–ø —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                    <button class="btn-text" onclick="switchScreen('analytics')" data-i18n="analytics">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
                </div>
                <div id="home-top-categories" class="categories-list-modern">
                    <div class="empty-msg" data-i18n="no_data">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>
                </div>
            </section>
            
            <!-- Bottom Spacer -->
            <div style="height: 20px;"></div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üìä ANALYTICS
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="analytics-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="analytics">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
                <select id="analytics-period" class="select-minimal">
                    <option value="week" data-i18n="week">–ù–µ–¥–µ–ª—è</option>
                    <option value="month" selected data-i18n="month">–ú–µ—Å—è—Ü</option>
                    <option value="quarter" data-i18n="quarter">–ö–≤–∞—Ä—Ç–∞–ª</option>
                    <option value="year" data-i18n="year">–ì–æ–¥</option>
                </select>
            </header>

            <div class="screen-body">
                <!-- KPI Row -->
                <div class="kpi-row">
                    <div class="kpi-box">
                        <span class="kpi-icon income"><i class="fas fa-arrow-down"></i></span>
                        <span class="kpi-val" id="kpi-income">0</span>
                        <span class="kpi-lbl" data-i18n="incomes">–î–æ—Ö–æ–¥—ã</span>
                    </div>
                    <div class="kpi-box">
                        <span class="kpi-icon expense"><i class="fas fa-arrow-up"></i></span>
                        <span class="kpi-val" id="kpi-expense">0</span>
                        <span class="kpi-lbl" data-i18n="expenses">–†–∞—Å—Ö–æ–¥—ã</span>
                    </div>
                    <div class="kpi-box">
                        <span class="kpi-icon balance"><i class="fas fa-scale-balanced"></i></span>
                        <span class="kpi-val" id="kpi-savings">0</span>
                        <span class="kpi-lbl" data-i18n="balance">–ë–∞–ª–∞–Ω—Å</span>
                    </div>
                    <div class="kpi-box">
                        <span class="kpi-icon rate"><i class="fas fa-percent"></i></span>
                        <span class="kpi-val" id="kpi-rate">0%</span>
                        <span class="kpi-lbl" data-i18n="savings">–≠–∫–æ–Ω–æ–º–∏—è</span>
                    </div>
                </div>

                <!-- Charts -->
                <div class="chart-block">
                    <div class="chart-title"><i class="fas fa-chart-area"></i> <span data-i18n="dynamics">–î–∏–Ω–∞–º–∏–∫–∞</span></div>
                    <div class="chart-wrap">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>

                <div class="chart-block">
                    <div class="chart-title"><i class="fas fa-chart-pie"></i> <span data-i18n="by_categories">–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</span></div>
                    <div class="chart-wrap donut">
                        <canvas id="category-pie-chart"></canvas>
                    </div>
                </div>

                <!-- Categories List -->
                <div class="section-block">
                    <div class="section-head">
                        <h2><i class="fas fa-fire"></i> <span data-i18n="top_expenses">–¢–æ–ø —Ä–∞—Å—Ö–æ–¥–æ–≤</span></h2>
                        <span class="badge" id="top-categories-period-badge" data-i18n="month">–ú–µ—Å—è—Ü</span>
                    </div>
                    <div id="top-categories-list" class="cat-list"></div>
                </div>

                <!-- Trends Comparison -->
                <div class="section-block">
                    <div class="section-head">
                        <h2><i class="fas fa-chart-line"></i> <span data-i18n="trends">–¢—Ä–µ–Ω–¥—ã</span></h2>
                        <span class="badge" id="trends-period-badge" data-i18n="vs_last_month">vs –ø—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü</span>
                    </div>
                    <div id="trends-container" class="trends-container">
                        <div class="trends-grid">
                            <div class="trend-card">
                                <div class="trend-card-header">
                                    <span class="trend-label" data-i18n="expenses">–†–∞—Å—Ö–æ–¥—ã</span>
                                    <span class="trend-change" id="trend-expense-change">0%</span>
                                </div>
                                <div class="trend-values">
                                    <span class="trend-current" id="trend-expense-current">0 —Å</span>
                                    <span class="trend-prev">vs <span id="trend-expense-prev">0 —Å</span></span>
                                </div>
                                <div class="trend-bar-container">
                                    <div class="trend-bar" id="trend-expense-bar" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="trend-card">
                                <div class="trend-card-header">
                                    <span class="trend-label" data-i18n="incomes">–î–æ—Ö–æ–¥—ã</span>
                                    <span class="trend-change" id="trend-income-change">0%</span>
                                </div>
                                <div class="trend-values">
                                    <span class="trend-current" id="trend-income-current">0 —Å</span>
                                    <span class="trend-prev">vs <span id="trend-income-prev">0 —Å</span></span>
                                </div>
                                <div class="trend-bar-container">
                                    <div class="trend-bar income" id="trend-income-bar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="trend-projection">
                            <i class="fas fa-bullseye"></i>
                            <span data-i18n="month_forecast">–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∫–æ–Ω–µ—Ü –º–µ—Å—è—Ü–∞:</span> <strong id="projection-total">0 —Å</strong>
                            <span class="projection-days">(<span id="projection-days">0</span> <span data-i18n="days_left">–¥–Ω–µ–π –æ—Å—Ç–∞–ª–æ—Å—å</span>)</span>
                        </div>
                    </div>
                </div>

                <!-- Weekday Patterns -->
                <div class="section-block">
                    <div class="section-head">
                        <h2><i class="fas fa-calendar-week"></i> <span data-i18n="spending_by_day">–¢—Ä–∞—Ç—ã –ø–æ –¥–Ω—è–º</span></h2>
                    </div>
                    <div id="weekday-chart-container" class="weekday-chart-container">
                        <div class="weekday-bars" id="weekday-bars">
                            <!-- –ë–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </div>
                        <div class="weekday-insight" id="weekday-insight">
                            <i class="fas fa-lightbulb"></i>
                            <span id="weekday-insight-text" data-i18n="analyzing_patterns">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω—ã...</span>
                        </div>
                    </div>
                </div>

                <!-- Category Trends -->
                <div class="section-block">
                    <div class="section-head">
                        <h2><i class="fas fa-arrow-trend-up"></i> <span data-i18n="category_changes">–ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</span></h2>
                    </div>
                    <div id="category-trends-list" class="category-trends-list">
                        <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ JS -->
                    </div>
                </div>

                <!-- AI Insights (–≤ –∫–æ–Ω—Ü–µ) -->
                <div class="section-block ai-block">
                    <div class="section-head">
                        <h2><i class="fas fa-robot"></i> <span data-i18n="ai_insights">AI –ò–Ω—Å–∞–π—Ç—ã</span></h2>
                        <button class="btn-icon small" onclick="loadAIInsights()">
                            <i class="fas fa-rotate"></i>
                        </button>
                    </div>
                    <div id="ai-insights-container">
                        <div id="ai-loading" class="ai-loading" style="display:none;">
                            <div class="spinner-small"></div>
                            <span data-i18n="analyzing">–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...</span>
                        </div>
                        <div id="ai-insights-list" class="ai-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üìú HISTORY
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="history-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="history">–ò—Å—Ç–æ—Ä–∏—è</h1>
                <div class="header-actions">
                    <button class="btn-icon" onclick="showExportModal()">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="btn-icon" onclick="toggleFilters()">
                        <i class="fas fa-sliders"></i>
                    </button>
                </div>
            </header>

            <!-- Search Bar -->
            <div class="search-bar-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="history-search" class="search-input" data-i18n-placeholder="search_placeholder" placeholder="–ü–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é...">
                    <button class="search-clear-btn" id="search-clear-btn" onclick="clearSearch()" style="display: none;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Filters -->
            <div id="filters-panel" class="filters-panel collapsed">
                <div class="filter-grid">
                    <select id="history-type" class="select-filter">
                        <option value="all" data-i18n="all_types">–í—Å–µ —Ç–∏–ø—ã</option>
                        <option value="income" data-i18n="incomes">–î–æ—Ö–æ–¥—ã</option>
                        <option value="expense" data-i18n="expenses">–†–∞—Å—Ö–æ–¥—ã</option>
                    </select>
                    <select id="history-period" class="select-filter">
                        <option value="week" data-i18n="week">–ù–µ–¥–µ–ª—è</option>
                        <option value="month" selected data-i18n="month">–ú–µ—Å—è—Ü</option>
                        <option value="quarter" data-i18n="quarter">–ö–≤–∞—Ä—Ç–∞–ª</option>
                        <option value="year" data-i18n="year">–ì–æ–¥</option>
                        <option value="all" data-i18n="all_time">–í—Å—ë –≤—Ä–µ–º—è</option>
                    </select>
                    <select id="history-category" class="select-filter">
                        <option value="all" data-i18n="all_categories">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    </select>
                    <select id="history-sort" class="select-filter">
                        <option value="date_desc" data-i18n="sort_newest">–ù–æ–≤—ã–µ ‚Üì</option>
                        <option value="date_asc" data-i18n="sort_oldest">–°—Ç–∞—Ä—ã–µ ‚Üë</option>
                        <option value="amount_desc" data-i18n="sort_amount_desc">–°—É–º–º–∞ ‚Üì</option>
                        <option value="amount_asc" data-i18n="sort_amount_asc">–°—É–º–º–∞ ‚Üë</option>
                    </select>
                </div>
                <div class="filter-row">
                    <div class="filter-amount-group">
                        <input type="number" id="history-amount-min" class="input-filter" data-i18n-placeholder="from_amount" placeholder="–û—Ç —Å—É–º–º—ã">
                        <span class="filter-separator">‚Äî</span>
                        <input type="number" id="history-amount-max" class="input-filter" data-i18n-placeholder="to_amount" placeholder="–î–æ —Å—É–º–º—ã">
                    </div>
                    <button class="btn-reset-filters" onclick="resetFilters()">
                        <i class="fas fa-undo"></i> <span data-i18n="reset_filters">–°–±—Ä–æ—Å–∏—Ç—å</span>
                    </button>
                </div>
            </div>

            <!-- Active filters chips -->
            <div id="active-filters" class="active-filters-container" style="display: none;"></div>

            <div class="screen-body">
                <div id="transactions-history" class="tx-history"></div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üìÑ REPORTS
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="reports-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="reports">–û—Ç—á—ë—Ç—ã</h1>
                <div style="width: 40px;"></div>
            </header>
            <div class="screen-body">
                <div class="info-box">
                    <i class="fas fa-circle-info"></i>
                    <p data-i18n="reports_info">–û—Ç—á—ë—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ PDF.</p>
                </div>
                <div id="reports-list" class="reports-list">
                    <div class="empty-state">
                        <i class="fas fa-file-lines"></i>
                        <h3 data-i18n="no_reports">–ù–µ—Ç –æ—Ç—á—ë—Ç–æ–≤</h3>
                        <p data-i18n="request_report">–ó–∞–ø—Ä–æ—Å–∏—Ç–µ –æ—Ç—á—ë—Ç –≤ Telegram –±–æ—Ç–µ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             ‚öôÔ∏è SETTINGS
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üë§ PROFILE (NEW)
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="profile-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('home')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="profile">–ü—Ä–æ—Ñ–∏–ª—å</h1>
                <div style="width: 40px;"></div>
            </header>
            <div class="screen-body">
                
                <!-- Gamification Card -->
                <div class="profile-gamification-card">
                    <div class="profile-avatar-section">
                        <div class="profile-avatar-large">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="profile-user-info">
                            <h2 id="profile-username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                            <div class="profile-level-badge">
                                <span class="level-icon">‚≠ê</span>
                                <span id="profile-level-name">–ù–æ–≤–∏—á–æ–∫</span>
                                <span class="level-number" id="profile-level-num">(–£—Ä. 1)</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-xp-section">
                        <div class="xp-bar-container">
                            <div class="xp-bar-fill" id="profile-xp-bar" style="width: 0%"></div>
                        </div>
                        <div class="xp-info">
                            <span id="profile-xp-text">0 / 100 XP</span>
                        </div>
                    </div>
                    
                    <div class="profile-stats-row">
                        <div class="profile-stat">
                            <span class="stat-icon">üî•</span>
                            <span class="stat-value" id="profile-streak">0</span>
                            <span class="stat-label" data-i18n="streak_days">–¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</span>
                        </div>
                        <div class="profile-stat">
                            <span class="stat-icon">üèÜ</span>
                            <span class="stat-value" id="profile-achievements">0</span>
                            <span class="stat-label" data-i18n="achievements_unlocked">–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</span>
                        </div>
                        <div class="profile-stat">
                            <span class="stat-icon">üìù</span>
                            <span class="stat-value" id="profile-transactions">0</span>
                            <span class="stat-label" data-i18n="total_entries">–∑–∞–ø–∏—Å–µ–π</span>
                        </div>
                    </div>
                    
                    <div class="profile-action-buttons">
                        <button class="btn-achievements" onclick="switchScreen('achievements')">
                            <i class="fas fa-trophy"></i>
                            <span data-i18n="all_achievements">–í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <button class="btn-achievements" onclick="switchScreen('leaderboard')">
                            <i class="fas fa-medal"></i>
                            <span data-i18n="leaderboard">–õ–∏–¥–µ—Ä–±–æ—Ä–¥</span>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <!-- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è -->
                <div class="daily-quests-card" id="daily-quests-card">
                    <div class="daily-quests-header">
                        <h3><span class="quest-icon">üìã</span> <span data-i18n="daily_quests">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</span></h3>
                        <span class="daily-quests-bonus" id="daily-bonus-badge" style="display:none">+25 XP</span>
                    </div>
                    <div class="daily-quests-list" id="daily-quests-list">
                        <!-- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    <div class="daily-quests-footer" id="daily-quests-footer" style="display:none">
                        <span class="all-completed-text" data-i18n="all_quests_completed">‚ú® –í—Å–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!</span>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ -->
                <div class="settings-group">
                    <h3 data-i18n="account">–ê–∫–∫–∞—É–Ω—Ç</h3>
                    
                    <div class="setting-row">
                        <div class="setting-left">
                            <i class="fas fa-user-circle"></i>
                            <div>
                                <span class="setting-title" data-i18n="mode">–†–µ–∂–∏–º</span>
                                <span class="setting-desc" id="profile-usage-type-desc" data-i18n="personal_finances">–õ–∏—á–Ω—ã–µ —Ñ–∏–Ω–∞–Ω—Å—ã</span>
                            </div>
                        </div>
                        <select id="profile-usage-type-select" class="select-setting" onchange="updateUsageType(this.value)">
                            <option value="personal" data-i18n="personal">–õ–∏—á–Ω—ã–π</option>
                            <option value="business" data-i18n="business">–ë–∏–∑–Ω–µ—Å</option>
                        </select>
                    </div>

                    <div class="setting-row">
                        <div class="setting-left">
                            <i class="fas fa-coins"></i>
                            <div>
                                <span class="setting-title" data-i18n="currency">–í–∞–ª—é—Ç–∞</span>
                                <span class="setting-desc" data-i18n="main_currency">–û—Å–Ω–æ–≤–Ω–∞—è –≤–∞–ª—é—Ç–∞</span>
                            </div>
                        </div>
                        <select id="profile-currency-select" class="select-setting" onchange="updateCurrency(this.value)">
                            <option value="KGS">KGS (—Å–æ–º)</option>
                            <option value="USD">USD ($)</option>
                            <option value="EUR">EUR (‚Ç¨)</option>
                            <option value="RUB">RUB (‚ÇΩ)</option>
                        </select>
                    </div>
                </div>

                <!-- –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ -->
                <div class="settings-group">
                    <h3 data-i18n="appearance">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
                    
                    <div class="setting-row">
                        <div class="setting-left">
                            <i class="fas fa-globe"></i>
                            <div>
                                <span class="setting-title" data-i18n="language">–Ø–∑—ã–∫</span>
                                <span class="setting-desc" id="profile-current-language-name">–†—É—Å—Å–∫–∏–π</span>
                            </div>
                        </div>
                        <select id="profile-language-select" class="select-setting" onchange="changeLanguage(this.value)">
                            <option value="ru">RU –†—É—Å—Å–∫–∏–π</option>
                            <option value="en">EN English</option>
                            <option value="ky">KG –ö—ã—Ä–≥—ã–∑—á–∞</option>
                        </select>
                    </div>
                    
                    <div class="setting-row">
                        <div class="setting-left">
                            <i class="fas fa-palette"></i>
                            <div>
                                <span class="setting-title" data-i18n="theme">–¢–µ–º–∞</span>
                                <span class="setting-desc" data-i18n="color_scheme">–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞</span>
                            </div>
                        </div>
                        <select id="profile-theme-select" class="select-setting" onchange="updateTheme(this.value)">
                            <option value="auto" data-i18n="auto">–ê–≤—Ç–æ</option>
                            <option value="dark" data-i18n="dark">–¢—ë–º–Ω–∞—è</option>
                            <option value="light" data-i18n="light">–°–≤–µ—Ç–ª–∞—è</option>
                        </select>
                    </div>

                    <div class="setting-row">
                        <div class="setting-left">
                            <i class="fas fa-calendar-alt"></i>
                            <div>
                                <span class="setting-title" data-i18n="default_period">–ü–µ—Ä–∏–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</span>
                                <span class="setting-desc" data-i18n="on_home_screen">–ù–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ</span>
                            </div>
                        </div>
                        <select id="profile-default-period" class="select-setting" onchange="updateDefaultPeriod(this.value)">
                            <option value="day" data-i18n="day">–î–µ–Ω—å</option>
                            <option value="week" selected data-i18n="week">–ù–µ–¥–µ–ª—è</option>
                            <option value="month" data-i18n="month">–ú–µ—Å—è—Ü</option>
                            <option value="year" data-i18n="year">–ì–æ–¥</option>
                        </select>
                    </div>
                </div>

                <!-- –î–∞–Ω–Ω—ã–µ -->
                <div class="settings-group">
                    <h3 data-i18n="data">–î–∞–Ω–Ω—ã–µ</h3>
                    
                    <div class="setting-row clickable" onclick="clearCache()">
                        <div class="setting-left">
                            <i class="fas fa-trash-alt"></i>
                            <div>
                                <span class="setting-title" data-i18n="clear_cache">–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à</span>
                                <span class="setting-desc" data-i18n="delete_local_data">–£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <!-- –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ -->
                <div class="settings-group">
                    <h3 data-i18n="about">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
                    <div class="setting-row">
                        <div class="setting-left">
                            <i class="fas fa-info-circle"></i>
                            <div>
                                <span class="setting-title">AIAccounter</span>
                                <span class="setting-desc" data-i18n="smart_finance">–£–º–Ω—ã–π —É—á—ë—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤</span>
                            </div>
                        </div>
                        <span class="version-tag">v1.3</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üèÜ ACHIEVEMENTS
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="achievements-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('profile')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="achievements">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h1>
                <div style="width: 40px;"></div>
            </header>
            <div class="screen-body">
                <div class="achievements-stats">
                    <div class="achievements-progress-ring">
                        <svg viewBox="0 0 100 100">
                            <circle class="ring-bg" cx="50" cy="50" r="45"/>
                            <circle class="ring-fill" id="achievements-ring" cx="50" cy="50" r="45" 
                                    stroke-dasharray="283" stroke-dashoffset="283"/>
                        </svg>
                        <div class="ring-text">
                            <span id="achievements-count">0/0</span>
                        </div>
                    </div>
                </div>
                
                <div class="achievements-filter">
                    <button class="filter-btn active" data-category="all" onclick="filterAchievements('all')">
                        <span data-i18n="all">–í—Å–µ</span>
                    </button>
                    <button class="filter-btn" data-category="unlocked" onclick="filterAchievements('unlocked')">
                        <span data-i18n="unlocked">–û—Ç–∫—Ä—ã—Ç—ã–µ</span>
                    </button>
                    <button class="filter-btn" data-category="locked" onclick="filterAchievements('locked')">
                        <span data-i18n="locked">–ó–∞–∫—Ä—ã—Ç—ã–µ</span>
                    </button>
                </div>
                
                <div class="achievements-list" id="achievements-list">
                    <!-- Achievements will be rendered here -->
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üèÜ LEADERBOARD
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="leaderboard-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('profile')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="leaderboard">–õ–∏–¥–µ—Ä–±–æ—Ä–¥</h1>
                <div style="width: 40px;"></div>
            </header>
            <div class="screen-body">
                <!-- –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <div class="leaderboard-user-position" id="leaderboard-user-card">
                    <div class="position-badge" id="user-position-badge">#1</div>
                    <div class="position-info">
                        <span class="position-label" data-i18n="your_position">–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è</span>
                        <span class="position-level" id="user-position-level">–£—Ä. 1</span>
                    </div>
                    <div class="position-xp" id="user-position-xp">0 XP</div>
                </div>

                <!-- –§–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞ -->
                <div class="leaderboard-period-filter">
                    <button class="period-btn active" data-period="week" onclick="loadLeaderboard('week')">
                        <span data-i18n="week">–ù–µ–¥–µ–ª—è</span>
                    </button>
                    <button class="period-btn" data-period="month" onclick="loadLeaderboard('month')">
                        <span data-i18n="month">–ú–µ—Å—è—Ü</span>
                    </button>
                    <button class="period-btn" data-period="all" onclick="loadLeaderboard('all')">
                        <span data-i18n="all_time">–í—Å—ë –≤—Ä–µ–º—è</span>
                    </button>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ –ª–∏–¥–µ—Ä–æ–≤ -->
                <div class="leaderboard-list" id="leaderboard-list">
                    <!-- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üìÅ MORE (RENAMED FROM SETTINGS)
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="settings-screen" class="screen">
            <header class="screen-header">
                <h1 data-i18n="more">–ï—â—ë</h1>
            </header>
            <div class="screen-body">
                
                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–∞–º–∏ -->
                <div class="settings-group">
                    <h3 data-i18n="management">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                    
                    <div class="setting-row clickable" onclick="switchScreen('budgets')">
                        <div class="setting-left">
                            <i class="fas fa-wallet"></i>
                            <div>
                                <span class="setting-title" data-i18n="budgets">–ë—é–¥–∂–µ—Ç—ã</span>
                                <span class="setting-desc" data-i18n="monthly_limits">–ú–µ—Å—è—á–Ω—ã–µ –ª–∏–º–∏—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    
                    <div class="setting-row clickable" onclick="switchScreen('categories')">
                        <div class="setting-left">
                            <i class="fas fa-tags"></i>
                            <div>
                                <span class="setting-title" data-i18n="categories">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
                                <span class="setting-desc" data-i18n="configure_categories">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>

                    <div class="setting-row clickable" onclick="switchScreen('recurring')">
                        <div class="setting-left">
                            <i class="fas fa-sync-alt"></i>
                            <div>
                                <span class="setting-title" data-i18n="subscriptions">–ü–æ–¥–ø–∏—Å–∫–∏</span>
                                <span class="setting-desc" data-i18n="regular_payments">–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>

                    <div class="setting-row clickable" onclick="switchScreen('debts')">
                        <div class="setting-left">
                            <i class="fas fa-handshake"></i>
                            <div>
                                <span class="setting-title" data-i18n="debts">–î–æ–ª–≥–∏</span>
                                <span class="setting-desc" data-i18n="debts_management">–£—á—ë—Ç –∑–∞–π–º–æ–≤</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>

                    <div class="setting-row clickable" onclick="switchScreen('goals')">
                        <div class="setting-left">
                            <i class="fas fa-bullseye"></i>
                            <div>
                                <span class="setting-title" data-i18n="goals">–¶–µ–ª–∏</span>
                                <span class="setting-desc" data-i18n="savings_goals">–ù–∞–∫–æ–ø–ª–µ–Ω–∏—è –Ω–∞ —Ü–µ–ª–∏</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>

                <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="settings-group">
                    <h3 data-i18n="quick_actions">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    
                    <div class="setting-row clickable" onclick="showExportModal()">
                        <div class="setting-left">
                            <i class="fas fa-file-export"></i>
                            <div>
                                <span class="setting-title" data-i18n="export_data">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</span>
                                <span class="setting-desc" data-i18n="download_csv_excel">–°–∫–∞—á–∞—Ç—å CSV/Excel</span>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üìÅ CATEGORIES
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="categories-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('settings')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="categories">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h1>
                <button class="btn-icon" onclick="openAddCategoryModal()">
                    <i class="fas fa-plus"></i>
                </button>
            </header>
            <div class="screen-body">
                <!-- Type Toggle -->
                <div class="category-type-toggle">
                    <button class="type-btn active" data-type="expense" onclick="switchCategoryTab('expense')">
                        <i class="fas fa-arrow-up"></i>
                        <span data-i18n="expenses">–†–∞—Å—Ö–æ–¥—ã</span>
                    </button>
                    <button class="type-btn" data-type="income" onclick="switchCategoryTab('income')">
                        <i class="fas fa-arrow-down"></i>
                        <span data-i18n="incomes">–î–æ—Ö–æ–¥—ã</span>
                    </button>
                </div>

                <!-- Default Categories -->
                <div class="cat-section">
                    <div class="cat-section-header">
                        <div class="section-title">
                            <i class="fas fa-lock"></i>
                            <span data-i18n="default_categories">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ</span>
                        </div>
                        <span class="section-count" id="default-categories-count">0</span>
                    </div>
                    <div id="default-categories-list" class="categories-grid"></div>
                </div>

                <!-- User Categories -->
                <div class="cat-section">
                    <div class="cat-section-header">
                        <div class="section-title">
                            <i class="fas fa-user"></i>
                            <span data-i18n="my_categories">–ú–æ–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
                        </div>
                        <span class="section-count" id="user-categories-count">0</span>
                    </div>
                    <div id="user-categories-list" class="categories-grid"></div>
                    <div id="no-user-categories" class="empty-user-cats" style="display:none;">
                        <i class="fas fa-plus-circle"></i>
                        <span data-i18n="click_to_add">–ù–∞–∂–º–∏—Ç–µ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Export Modal -->
        <div id="export-modal" class="modal">
            <div class="modal-backdrop" onclick="closeExportModal()"></div>
            <div class="modal-box">
                <div class="modal-head">
                    <h3 data-i18n="export_transactions">–≠–∫—Å–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h3>
                    <button class="btn-icon" onclick="closeExportModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <div class="export-options">
                    <div class="form-field">
                        <label data-i18n="file_format">–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞</label>
                        <div class="export-format-selector">
                            <label class="format-option">
                                <input type="radio" name="export-format" value="xlsx" checked>
                                <span class="format-label">
                                    <i class="fas fa-file-excel"></i>
                                    <span>Excel (.xlsx)</span>
                                </span>
                            </label>
                            <label class="format-option">
                                <input type="radio" name="export-format" value="csv">
                                <span class="format-label">
                                    <i class="fas fa-file-csv"></i>
                                    <span>CSV (.csv)</span>
                                </span>
                            </label>
                        </div>
                    </div>
                    <div class="form-field">
                        <label data-i18n="period">–ü–µ—Ä–∏–æ–¥</label>
                        <select id="export-period" class="select-filter">
                            <option value="week" data-i18n="last_week">–ü–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è</option>
                            <option value="month" selected data-i18n="last_month">–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü</option>
                            <option value="quarter" data-i18n="last_3_months">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞</option>
                            <option value="year" data-i18n="last_year">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≥–æ–¥</option>
                            <option value="all" data-i18n="all_time">–í—Å—ë –≤—Ä–µ–º—è</option>
                            <option value="custom" data-i18n="custom_period">–°–≤–æ–π –ø–µ—Ä–∏–æ–¥</option>
                        </select>
                    </div>
                    <div id="export-custom-dates" class="form-field" style="display: none;">
                        <div class="date-range-row">
                            <div class="date-input-group">
                                <label data-i18n="from_date">–°</label>
                                <input type="date" id="export-date-start">
                            </div>
                            <div class="date-input-group">
                                <label data-i18n="to_date">–ü–æ</label>
                                <input type="date" id="export-date-end">
                            </div>
                        </div>
                    </div>
                    <div class="form-field">
                        <label data-i18n="operation_type">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–π</label>
                        <select id="export-type" class="select-filter">
                            <option value="all" selected data-i18n="all_operations">–í—Å–µ</option>
                            <option value="income" data-i18n="only_income">–¢–æ–ª—å–∫–æ –¥–æ—Ö–æ–¥—ã</option>
                            <option value="expense" data-i18n="only_expenses">–¢–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥—ã</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn secondary" onclick="closeExportModal()" data-i18n="cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="button" class="btn primary" onclick="downloadExport()">
                            <i class="fas fa-download"></i> <span data-i18n="download">–°–∫–∞—á–∞—Ç—å</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Category Modal -->
        <div id="add-category-modal" class="modal">
            <div class="modal-backdrop" onclick="closeAddCategoryModal()"></div>
            <div class="modal-box">
                <div class="modal-head">
                    <h3 data-i18n="new_category">–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</h3>
                    <button class="btn-icon" onclick="closeAddCategoryModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <form id="add-category-form" onsubmit="submitAddCategory(event)">
                    <div class="form-field">
                        <label data-i18n="category_name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="new-category-name" data-i18n-placeholder="category_name_placeholder" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–æ—Ñ–µ" required maxlength="50">
                    </div>
                    <div class="form-field">
                        <label data-i18n="category_type">–¢–∏–ø</label>
                        <div class="type-selector">
                            <label class="type-option">
                                <input type="radio" name="cat-type" value="expense" checked>
                                <span class="type-label expense">
                                    <i class="fas fa-arrow-up"></i> –†–∞—Å—Ö–æ–¥
                                </span>
                            </label>
                            <label class="type-option">
                                <input type="radio" name="cat-type" value="income">
                                <span class="type-label income">
                                    <i class="fas fa-arrow-down"></i> –î–æ—Ö–æ–¥
                                </span>
                            </label>
                        </div>
                        <input type="hidden" id="new-category-type" value="expense">
                    </div>
                    <div class="form-field">
                        <label>–ò–∫–æ–Ω–∫–∞</label>
                        <div class="emoji-picker-grid" id="emoji-picker">
                            <button type="button" class="emoji selected" data-emoji="üìÅ">üìÅ</button>
                            <button type="button" class="emoji" data-emoji="üçï">üçï</button>
                            <button type="button" class="emoji" data-emoji="‚òï">‚òï</button>
                            <button type="button" class="emoji" data-emoji="üöï">üöï</button>
                            <button type="button" class="emoji" data-emoji="üè†">üè†</button>
                            <button type="button" class="emoji" data-emoji="üíä">üíä</button>
                            <button type="button" class="emoji" data-emoji="üéÆ">üéÆ</button>
                            <button type="button" class="emoji" data-emoji="üìö">üìö</button>
                            <button type="button" class="emoji" data-emoji="üéµ">üéµ</button>
                            <button type="button" class="emoji" data-emoji="‚úàÔ∏è">‚úàÔ∏è</button>
                            <button type="button" class="emoji" data-emoji="üíº">üíº</button>
                            <button type="button" class="emoji" data-emoji="üí∞">üí∞</button>
                            <button type="button" class="emoji" data-emoji="üéÅ">üéÅ</button>
                            <button type="button" class="emoji" data-emoji="üõí">üõí</button>
                            <button type="button" class="emoji" data-emoji="üí°">üí°</button>
                            <button type="button" class="emoji" data-emoji="üì±">üì±</button>
                        </div>
                        <input type="hidden" id="new-category-icon" value="üìÅ">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn secondary" onclick="closeAddCategoryModal()" data-i18n="cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn primary">
                            <i class="fas fa-plus"></i> <span data-i18n="add">–î–æ–±–∞–≤–∏—Ç—å</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üîÑ RECURRING
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="recurring-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('settings')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="subscriptions">–ü–æ–¥–ø–∏—Å–∫–∏</h1>
                <button class="btn-icon" onclick="openAddRecurringModal()">
                    <i class="fas fa-plus"></i>
                </button>
            </header>
            <div class="screen-body">
                <div class="summary-row">
                    <div class="summary-box">
                        <div class="summary-icon upcoming"><i class="fas fa-clock"></i></div>
                        <div class="summary-data">
                            <span class="summary-label" data-i18n="days_30">30 –¥–Ω–µ–π</span>
                            <span class="summary-value" id="recurring-upcoming-total">0 —Å</span>
                        </div>
                    </div>
                    <div class="summary-box">
                        <div class="summary-icon active"><i class="fas fa-repeat"></i></div>
                        <div class="summary-data">
                            <span class="summary-label" data-i18n="active_count">–ê–∫—Ç–∏–≤–Ω—ã—Ö</span>
                            <span class="summary-value" id="recurring-active-count">0</span>
                        </div>
                    </div>
                </div>
                
                <div id="recurring-list" class="recurring-list"></div>
                <div id="recurring-empty" class="empty-state" style="display:none;">
                    <i class="fas fa-calendar-check"></i>
                    <h3 data-i18n="no_subscriptions">–ù–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫</h3>
                    <p data-i18n="add_recurring_hint">–î–æ–±–∞–≤—å—Ç–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø–ª–∞—Ç–µ–∂–∏</p>
                    <button class="btn primary" onclick="openAddRecurringModal()">
                        <i class="fas fa-plus"></i> <span data-i18n="add">–î–æ–±–∞–≤–∏—Ç—å</span>
                    </button>
                </div>
                <div id="recurring-loading" class="loading-state" style="display:none;">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Recurring Modal -->
        <div id="recurring-modal" class="modal">
            <div class="modal-backdrop" onclick="closeRecurringModal()"></div>
            <div class="modal-box large">
                <div class="modal-head">
                    <h3 id="recurring-modal-title" data-i18n="new_subscription">–ù–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞</h3>
                    <button class="btn-icon" onclick="closeRecurringModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <form id="recurring-form" onsubmit="submitRecurring(event)">
                    <input type="hidden" id="recurring-edit-id" value="">
                    
                    <div class="form-field">
                        <label data-i18n="category_name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="recurring-name" data-i18n-placeholder="netflix_spotify" placeholder="Netflix, Spotify..." required>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label data-i18n="amount">–°—É–º–º–∞</label>
                            <input type="number" id="recurring-amount" placeholder="0" required min="1" step="0.01">
                        </div>
                        <div class="form-field">
                            <label data-i18n="currency">–í–∞–ª—é—Ç–∞</label>
                            <select id="recurring-currency">
                                <option value="KGS">KGS</option>
                                <option value="USD">USD</option>
                                <option value="EUR">EUR</option>
                                <option value="RUB">RUB</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-field">
                        <label data-i18n="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select id="recurring-category">
                            <option value="–ü–æ–¥–ø–∏—Å–∫–∏">–ü–æ–¥–ø–∏—Å–∫–∏</option>
                            <option value="–ñ–∏–ª—å—ë">–ñ–∏–ª—å—ë</option>
                            <option value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                            <option value="–°–≤—è–∑—å">–°–≤—è–∑—å</option>
                            <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label data-i18n="frequency">–ß–∞—Å—Ç–æ—Ç–∞</label>
                            <select id="recurring-frequency">
                                <option value="monthly" data-i18n="monthly">–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                                <option value="weekly" data-i18n="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                                <option value="yearly" data-i18n="yearly">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
                            </select>
                        </div>
                        <div class="form-field">
                            <label data-i18n="next_payment">–°–ª–µ–¥. –ø–ª–∞—Ç—ë–∂</label>
                            <input type="date" id="recurring-next-date" required>
                        </div>
                    </div>
                    <div class="form-field">
                        <label data-i18n="remind_days">–ù–∞–ø–æ–º–Ω–∏—Ç—å –∑–∞ (–¥–Ω–µ–π)</label>
                        <input type="number" id="recurring-reminder-days" value="3" min="0" max="30">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn secondary" onclick="closeRecurringModal()" data-i18n="cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn primary" id="recurring-submit-btn" data-i18n="add">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üí∞ DEBTS
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="debts-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('settings')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="debts">–î–æ–ª–≥–∏</h1>
                <button class="btn-icon" onclick="openAddDebtModal()">
                    <i class="fas fa-plus"></i>
                </button>
            </header>
            <div class="screen-body">
                <div class="debt-summary">
                    <div class="debt-box positive">
                        <i class="fas fa-arrow-down"></i>
                        <span class="debt-label" data-i18n="owe_me">–ú–Ω–µ –¥–æ–ª–∂–Ω—ã</span>
                        <span class="debt-value" id="debt-given-total">0 —Å</span>
                    </div>
                    <div class="debt-box negative">
                        <i class="fas fa-arrow-up"></i>
                        <span class="debt-label" data-i18n="i_owe">–Ø –¥–æ–ª–∂–µ–Ω</span>
                        <span class="debt-value" id="debt-received-total">0 —Å</span>
                    </div>
                    <div class="debt-box neutral">
                        <i class="fas fa-scale-balanced"></i>
                        <span class="debt-label" data-i18n="net_balance">–ë–∞–ª–∞–Ω—Å</span>
                        <span class="debt-value" id="debt-net-balance">0 —Å</span>
                    </div>
                </div>

                <div class="tab-bar compact">
                    <button class="tab active" data-filter="all" data-i18n="all">–í—Å–µ</button>
                    <button class="tab" data-filter="given" data-i18n="owe_me">–ú–Ω–µ –¥–æ–ª–∂–Ω—ã</button>
                    <button class="tab" data-filter="received" data-i18n="i_owe">–Ø –¥–æ–ª–∂–µ–Ω</button>
                </div>

                <div id="debts-list" class="debts-list"></div>
                <div id="debts-empty" class="empty-state" style="display:none;">
                    <i class="fas fa-hand-holding-dollar"></i>
                    <h3 data-i18n="no_debts">–ù–µ—Ç –¥–æ–ª–≥–æ–≤</h3>
                    <p data-i18n="record_debts">–ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –∫—Ç–æ –∫–æ–º—É –¥–æ–ª–∂–µ–Ω</p>
                    <button class="btn primary" onclick="openAddDebtModal()">
                        <i class="fas fa-plus"></i> <span data-i18n="add">–î–æ–±–∞–≤–∏—Ç—å</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Debt Modal -->
        <div id="debt-modal" class="modal">
            <div class="modal-backdrop" onclick="closeDebtModal()"></div>
            <div class="modal-box large">
                <div class="modal-head">
                    <h3 id="debt-modal-title" data-i18n="new_debt">–ù–æ–≤—ã–π –¥–æ–ª–≥</h3>
                    <button class="btn-icon" onclick="closeDebtModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <form id="debt-form" onsubmit="submitDebt(event)">
                    <input type="hidden" id="debt-edit-id" value="">
                    
                    <div class="form-field">
                        <label data-i18n="type">–¢–∏–ø</label>
                        <div class="toggle-row">
                            <button type="button" class="toggle-btn active" data-type="given">
                                <i class="fas fa-arrow-down"></i> <span data-i18n="owe_me">–ú–Ω–µ –¥–æ–ª–∂–Ω—ã</span>
                            </button>
                            <button type="button" class="toggle-btn" data-type="received">
                                <i class="fas fa-arrow-up"></i> <span data-i18n="i_owe">–Ø –¥–æ–ª–∂–µ–Ω</span>
                            </button>
                        </div>
                        <input type="hidden" id="debt-type" value="given">
                    </div>
                    <div class="form-field">
                        <label data-i18n="who">–ö—Ç–æ</label>
                        <input type="text" id="debt-person" data-i18n-placeholder="name" placeholder="–ò–º—è..." required>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label data-i18n="amount">–°—É–º–º–∞</label>
                            <input type="number" id="debt-amount" placeholder="0" required min="1" step="0.01">
                        </div>
                        <div class="form-field">
                            <label data-i18n="currency">–í–∞–ª—é—Ç–∞</label>
                            <select id="debt-currency">
                                <option value="KGS">KGS</option>
                                <option value="USD">USD</option>
                                <option value="EUR">EUR</option>
                                <option value="RUB">RUB</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-field">
                        <label data-i18n="due_date">–°—Ä–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="date" id="debt-due-date">
                    </div>
                    <div class="form-field">
                        <label data-i18n="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                        <textarea id="debt-description" data-i18n-placeholder="for_what" placeholder="–ó–∞ —á—Ç–æ..." rows="2"></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn secondary" onclick="closeDebtModal()" data-i18n="cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn primary" id="debt-submit-btn" data-i18n="add">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Debt Payment Modal -->
        <div id="debt-payment-modal" class="modal">
            <div class="modal-backdrop" onclick="closeDebtPaymentModal()"></div>
            <div class="modal-box">
                <div class="modal-head">
                    <h3 data-i18n="partial_return">–ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç</h3>
                    <button class="btn-icon" onclick="closeDebtPaymentModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <form id="debt-payment-form" onsubmit="submitDebtPayment(event)">
                    <input type="hidden" id="debt-payment-id" value="">
                    <div class="form-field">
                        <label data-i18n="amount">–°—É–º–º–∞</label>
                        <input type="number" id="debt-payment-amount" placeholder="0" required min="1" step="0.01">
                        <small id="debt-remaining-hint"><span data-i18n="remaining">–û—Å—Ç–∞—Ç–æ–∫</span>: 0</small>
                    </div>
                    <div class="form-field">
                        <label data-i18n="comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                        <input type="text" id="debt-payment-note" placeholder="...">
                    </div>
                    <div class="form-field checkbox">
                        <label>
                            <input type="checkbox" id="debt-create-transaction" checked>
                            <span data-i18n="create_transaction">–°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</span>
                        </label>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn secondary" onclick="closeDebtPaymentModal()" data-i18n="cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn primary" data-i18n="make_payment">–í–Ω–µ—Å—Ç–∏</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Budget Modal -->
        
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üéØ SAVINGS GOALS
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="goals-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('settings')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="goals">–¶–µ–ª–∏</h1>
                <button class="btn-icon" onclick="openGoalModal()">
                    <i class="fas fa-plus"></i>
                </button>
            </header>
            <div class="screen-body">
                <!-- Goals Summary -->
                <div class="goals-summary">
                    <div class="goal-stat-box">
                        <i class="fas fa-bullseye"></i>
                        <span class="goal-stat-label" data-i18n="active_goals">–ê–∫—Ç–∏–≤–Ω—ã–µ</span>
                        <span class="goal-stat-value" id="goals-active-count">0</span>
                    </div>
                    <div class="goal-stat-box">
                        <i class="fas fa-piggy-bank"></i>
                        <span class="goal-stat-label" data-i18n="total_saved">–ù–∞–∫–æ–ø–ª–µ–Ω–æ</span>
                        <span class="goal-stat-value" id="goals-total-saved">0 —Å</span>
                    </div>
                    <div class="goal-stat-box highlight">
                        <i class="fas fa-chart-line"></i>
                        <span class="goal-stat-label" data-i18n="overall_progress">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                        <span class="goal-stat-value" id="goals-overall-progress">0%</span>
                    </div>
                </div>

                <!-- Tab Filter -->
                <div class="tab-bar compact">
                    <button class="tab active" data-filter="active" onclick="filterGoals('active')" data-i18n="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                    <button class="tab" data-filter="completed" onclick="filterGoals('completed')" data-i18n="achieved">–î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ</button>
                    <button class="tab" data-filter="all" onclick="filterGoals('all')" data-i18n="all">–í—Å–µ</button>
                </div>

                <!-- Goals List -->
                <div id="goals-list" class="goals-list"></div>
                
                <!-- Empty State -->
                <div id="goals-empty" class="empty-state" style="display:none;">
                    <i class="fas fa-bullseye"></i>
                    <h3 data-i18n="no_goals">–ù–µ—Ç —Ü–µ–ª–µ–π</h3>
                    <p data-i18n="create_first_goal">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é —Ü–µ–ª—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è</p>
                    <button class="btn primary" onclick="openGoalModal()">
                        <i class="fas fa-plus"></i> <span data-i18n="create_goal">–°–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Goal Modal (Create/Edit) -->
        <div id="goal-modal" class="modal">
            <div class="modal-backdrop" onclick="closeGoalModal()"></div>
            <div class="modal-box large">
                <div class="modal-head">
                    <h3 id="goal-modal-title" data-i18n="new_goal">–ù–æ–≤–∞—è —Ü–µ–ª—å</h3>
                    <button class="btn-icon" onclick="closeGoalModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <form id="goal-form" onsubmit="submitGoal(event)">
                    <input type="hidden" id="goal-edit-id" value="">
                    
                    <div class="form-field">
                        <label data-i18n="goal_name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏</label>
                        <input type="text" id="goal-name" data-i18n-placeholder="goal_name_placeholder" placeholder="iPhone 16 Pro Max" required maxlength="100">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-field">
                            <label data-i18n="target_amount">–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞</label>
                            <input type="number" id="goal-target" placeholder="100000" required min="1" step="0.01">
                        </div>
                        <div class="form-field">
                            <label data-i18n="currency">–í–∞–ª—é—Ç–∞</label>
                            <select id="goal-currency">
                                <option value="KGS">KGS</option>
                                <option value="USD">USD</option>
                                <option value="EUR">EUR</option>
                                <option value="RUB">RUB</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-field">
                        <label data-i18n="initial_amount">–ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="number" id="goal-initial" placeholder="0" min="0" step="0.01">
                    </div>
                    
                    <div class="form-field">
                        <label data-i18n="deadline">–î–µ–¥–ª–∞–π–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="date" id="goal-deadline">
                    </div>
                    
                    <div class="form-field">
                        <label data-i18n="icon_and_color">–ò–∫–æ–Ω–∫–∞ –∏ —Ü–≤–µ—Ç</label>
                        <div class="icon-color-picker">
                            <div class="icon-picker">
                                <button type="button" class="icon-btn active" data-icon="üéØ">üéØ</button>
                                <button type="button" class="icon-btn" data-icon="üè†">üè†</button>
                                <button type="button" class="icon-btn" data-icon="üöó">üöó</button>
                                <button type="button" class="icon-btn" data-icon="‚úàÔ∏è">‚úàÔ∏è</button>
                                <button type="button" class="icon-btn" data-icon="üì±">üì±</button>
                                <button type="button" class="icon-btn" data-icon="üíª">üíª</button>
                                <button type="button" class="icon-btn" data-icon="üéì">üéì</button>
                                <button type="button" class="icon-btn" data-icon="üíç">üíç</button>
                                <button type="button" class="icon-btn" data-icon="üéÅ">üéÅ</button>
                                <button type="button" class="icon-btn" data-icon="üí∞">üí∞</button>
                            </div>
                            <input type="hidden" id="goal-icon" value="üéØ">
                            <div class="color-picker">
                                <button type="button" class="color-btn active" data-color="#6366F1" style="background:#6366F1"></button>
                                <button type="button" class="color-btn" data-color="#8B5CF6" style="background:#8B5CF6"></button>
                                <button type="button" class="color-btn" data-color="#EC4899" style="background:#EC4899"></button>
                                <button type="button" class="color-btn" data-color="#EF4444" style="background:#EF4444"></button>
                                <button type="button" class="color-btn" data-color="#F59E0B" style="background:#F59E0B"></button>
                                <button type="button" class="color-btn" data-color="#10B981" style="background:#10B981"></button>
                                <button type="button" class="color-btn" data-color="#06B6D4" style="background:#06B6D4"></button>
                                <button type="button" class="color-btn" data-color="#3B82F6" style="background:#3B82F6"></button>
                            </div>
                            <input type="hidden" id="goal-color" value="#6366F1">
                        </div>
                    </div>
                    
                    <div class="form-field">
                        <label data-i18n="description">–û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <textarea id="goal-description" placeholder="..." rows="2" maxlength="500"></textarea>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn secondary" onclick="closeGoalModal()" data-i18n="cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn primary" id="goal-submit-btn" data-i18n="create">–°–æ–∑–¥–∞—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Goal Detail Modal -->
        <div id="goal-detail-modal" class="modal">
            <div class="modal-backdrop" onclick="closeGoalDetailModal()"></div>
            <div class="modal-box large">
                <div class="modal-head">
                    <h3 id="goal-detail-title">–¶–µ–ª—å</h3>
                    <button class="btn-icon" onclick="closeGoalDetailModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <div class="goal-detail-content">
                    <div class="goal-detail-hero" id="goal-detail-hero">
                        <span class="goal-icon" id="goal-detail-icon">üéØ</span>
                        <div class="goal-amounts">
                            <span class="goal-current" id="goal-detail-current">0</span>
                            <span class="goal-separator">/</span>
                            <span class="goal-target" id="goal-detail-target">0 —Å</span>
                        </div>
                        <div class="goal-progress-bar large">
                            <div class="goal-progress-fill" id="goal-detail-progress" style="width: 0%"></div>
                        </div>
                        <span class="goal-progress-text" id="goal-detail-percent">0%</span>
                    </div>
                    
                    <div class="goal-detail-info">
                        <div class="goal-info-row" id="goal-detail-deadline-row" style="display:none;">
                            <i class="fas fa-calendar"></i>
                            <span data-i18n="deadline">–î–µ–¥–ª–∞–π–Ω</span>
                            <strong id="goal-detail-deadline">-</strong>
                        </div>
                        <div class="goal-info-row" id="goal-detail-monthly-row" style="display:none;">
                            <i class="fas fa-calculator"></i>
                            <span data-i18n="monthly_target">–í –º–µ—Å—è—Ü –Ω—É–∂–Ω–æ</span>
                            <strong id="goal-detail-monthly">0 —Å</strong>
                        </div>
                        <div class="goal-info-row">
                            <i class="fas fa-coins"></i>
                            <span data-i18n="remaining">–û—Å—Ç–∞–ª–æ—Å—å</span>
                            <strong id="goal-detail-remaining">0 —Å</strong>
                        </div>
                    </div>
                    
                    <!-- Quick Deposit -->
                    <div class="goal-quick-deposit">
                        <h4 data-i18n="add_funds">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</h4>
                        <div class="quick-deposit-row">
                            <input type="number" id="goal-deposit-amount" placeholder="1000" min="1">
                            <button class="btn primary" onclick="quickDepositGoal()">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="quick-deposit-presets">
                            <button class="preset-btn" onclick="setDepositAmount(500)">500</button>
                            <button class="preset-btn" onclick="setDepositAmount(1000)">1000</button>
                            <button class="preset-btn" onclick="setDepositAmount(5000)">5000</button>
                            <button class="preset-btn" onclick="setDepositAmount(10000)">10000</button>
                        </div>
                    </div>
                    
                    <!-- History -->
                    <div class="goal-history">
                        <h4 data-i18n="history">–ò—Å—Ç–æ—Ä–∏—è</h4>
                        <div id="goal-contributions-list" class="contributions-list"></div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn danger small" onclick="deleteCurrentGoal()">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button type="button" class="btn secondary" onclick="editCurrentGoal()" data-i18n="edit">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button type="button" class="btn success" id="goal-complete-btn" onclick="completeCurrentGoal()" data-i18n="mark_achieved">–¶–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞</button>
                </div>
            </div>
        </div>

        <!-- Budget Modal -->
        <div id="budget-modal" class="modal">
            <div class="modal-backdrop" onclick="closeBudgetModal()"></div>
            <div class="modal-box">
                <div class="modal-head">
                    <h3 id="budget-modal-title">–ë—é–¥–∂–µ—Ç –Ω–∞ –¥–µ–∫–∞–±—Ä—å</h3>
                    <button class="btn-icon" onclick="closeBudgetModal()"><i class="fas fa-xmark"></i></button>
                </div>
                <form id="budget-form" onsubmit="submitBudget(event)">
                    <input type="hidden" id="budget-edit-month" value="">
                    
                    <div class="form-field">
                        <label data-i18n="budget_amount">–°—É–º–º–∞ –±—é–¥–∂–µ—Ç–∞</label>
                        <div class="input-with-suffix">
                            <input type="number" id="budget-amount-input" placeholder="0" required min="1" step="1">
                            <span class="input-suffix" id="budget-currency-suffix">—Å–æ–º</span>
                        </div>
                    </div>
                    
                    <div class="budget-presets-section">
                        <label data-i18n="quick_select">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä:</label>
                        <div class="budget-preset-buttons">
                            <button type="button" class="budget-preset-btn" data-amount="30000">30 000</button>
                            <button type="button" class="budget-preset-btn" data-amount="50000">50 000</button>
                            <button type="button" class="budget-preset-btn" data-amount="100000">100 000</button>
                            <button type="button" class="budget-preset-btn" data-amount="150000">150 000</button>
                            <button type="button" class="budget-preset-btn" data-amount="200000">200 000</button>
                        </div>
                    </div>
                    
                    <div class="budget-hint" id="budget-hint" style="display: none;">
                        <i class="fas fa-lightbulb"></i>
                        <span data-i18n="last_month_hint">–í –ø—Ä–æ—à–ª–æ–º –º–µ—Å—è—Ü–µ:</span> <strong id="budget-last-month">0 —Å</strong>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn secondary" onclick="closeBudgetModal()" data-i18n="cancel">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn primary" id="budget-submit-btn">
                            <i class="fas fa-check"></i> <span data-i18n="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             üí∞ BUDGETS SCREEN
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="budgets-screen" class="screen">
            <header class="screen-header">
                <button class="btn-back" onclick="switchScreen('settings')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 data-i18n="budgets">–ë—é–¥–∂–µ—Ç—ã</h1>
                <button class="btn-icon" onclick="openBudgetModal()">
                    <i class="fas fa-plus"></i>
                </button>
            </header>
            <div class="screen-body">
                <!-- –¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü -->
                <div class="budget-current-card" id="budget-current-card">
                    <div class="budget-card-header">
                        <div class="budget-card-title">
                            <i class="fas fa-calendar"></i>
                            <span id="budget-current-month">–î–µ–∫–∞–±—Ä—å 2025</span>
                        </div>
                        <span class="budget-card-status" id="budget-current-status" data-i18n="budget_normal">‚úÖ –í –Ω–æ—Ä–º–µ</span>
                    </div>
                    <div class="budget-card-progress">
                        <div class="budget-card-bar">
                            <div class="budget-card-fill" id="budget-current-fill" style="width: 0%"></div>
                        </div>
                        <div class="budget-card-numbers">
                            <span id="budget-current-spent">0 —Å</span>
                            <span id="budget-current-total">/ 0 —Å</span>
                        </div>
                    </div>
                    <div class="budget-card-footer">
                        <div class="budget-card-stat">
                            <span class="stat-label" data-i18n="budget_remaining">–û—Å—Ç–∞–ª–æ—Å—å</span>
                            <span class="stat-value" id="budget-current-remaining">0 —Å</span>
                        </div>
                        <div class="budget-card-stat">
                            <span class="stat-label" data-i18n="budget_used">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</span>
                            <span class="stat-value" id="budget-current-percent">0%</span>
                        </div>
                        <button class="btn-sm" onclick="openBudgetModal()">
                            <i class="fas fa-pen"></i> <span data-i18n="change">–ò–∑–º–µ–Ω–∏—Ç—å</span>
                        </button>
                    </div>
                </div>
                
                <!-- –ò—Å—Ç–æ—Ä–∏—è –±—é–¥–∂–µ—Ç–æ–≤ -->
                <div class="section-block">
                    <div class="section-head">
                        <h2><i class="fas fa-history"></i> <span data-i18n="budget_history">–ò—Å—Ç–æ—Ä–∏—è</span></h2>
                    </div>
                    <div id="budgets-history-list" class="budgets-history-list">
                        <div class="empty-state small">
                            <i class="fas fa-calendar-check"></i>
                            <p data-i18n="budget_history_hint">–ò—Å—Ç–æ—Ä–∏—è –±—é–¥–∂–µ—Ç–æ–≤ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             BOTTOM NAV
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-screen="home">
                <i class="fas fa-house"></i>
                <span data-i18n="nav_home">–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="nav-btn" data-screen="analytics">
                <i class="fas fa-chart-pie"></i>
                <span data-i18n="nav_analytics">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
            </button>
            <button class="nav-btn" data-screen="history">
                <i class="fas fa-clock-rotate-left"></i>
                <span data-i18n="nav_history">–ò—Å—Ç–æ—Ä–∏—è</span>
            </button>
            <button class="nav-btn" data-screen="reports">
                <i class="fas fa-file-lines"></i>
                <span data-i18n="reports">–û—Ç—á—ë—Ç—ã</span>
            </button>
            <button class="nav-btn" data-screen="settings">
                <i class="fas fa-ellipsis"></i>
                <span data-i18n="more">–ï—â—ë</span>
            </button>
        </nav>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner-large"></div>
            <span data-i18n="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <!-- Scripts -->
    <script src="i18n.js?v=1.1"></script>
    <script src="miniapp-config.js?v=1.2"></script>
    <script src="websocket.js?v=1.2"></script>
    <script src="api-helper.js?v=1.4"></script>
    <script src="onboarding.js?v=1.0"></script>
    <script src="app.js?v=1.9"></script>
</body>
</html>
