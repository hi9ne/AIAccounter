<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Accounter - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ AI Accounter</h1>
            <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫</p>
            <p class="version">v2.3.0 - Notifications & Recurring Payments</p>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('add')">‚ûï –î–æ–±–∞–≤–∏—Ç—å</div>
            <div class="tab" onclick="switchTab('stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div class="tab" onclick="switchTab('subscriptions')">üîî –ü–æ–¥–ø–∏—Å–∫–∏</div>
            <div class="tab" onclick="switchTab('notifications')">ÔøΩ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
            <div class="tab" onclick="switchTab('budget')">üí∞ –ë—é–¥–∂–µ—Ç</div>
            <div class="tab" onclick="switchTab('history')">ÔøΩ –ò—Å—Ç–æ—Ä–∏—è</div>
        </div>

        <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ -->
        <div id="add-tab" class="tab-content active">
            <div class="quick-actions">
                <div class="quick-action" onclick="quickAdd('income')">
                    <div class="icon">üí∞</div>
                    <div class="text">–î–æ—Ö–æ–¥</div>
                </div>
                <div class="quick-action" onclick="quickAdd('expense')">
                    <div class="icon">üí∏</div>
                    <div class="text">–†–∞—Å—Ö–æ–¥</div>
                </div>
            </div>

            <form id="transaction-form">
                <div class="form-group">
                    <label>–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏</label>
                    <select id="operation-type" required>
                        <option value="income">üí∞ –î–æ—Ö–æ–¥</option>
                        <option value="expense">üí∏ –†–∞—Å—Ö–æ–¥</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–°—É–º–º–∞</label>
                    <div class="form-row">
                        <div class="form-group" style="flex: 2;">
                            <input type="number" id="amount" placeholder="0" required step="0.01">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <select id="currency" required>
                                <option value="KGS">üá∞üá¨ –°–æ–º</option>
                                <option value="USD">üá∫üá∏ USD</option>
                                <option value="EUR">üá™üá∫ EUR</option>
                                <option value="RUB">üá∑üá∫ RUB</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <div class="category-grid" id="category-grid">
                        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>

                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <div class="voice-input">
                        <textarea id="description" placeholder="–û–ø–∏—à–∏—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é..." rows="3"></textarea>
                        <button type="button" class="voice-btn" onclick="startVoiceInput()">üé§</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>–î–∞—Ç–∞</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group">
                        <label>–í—Ä–µ–º—è</label>
                        <input type="time" id="time" required>
                    </div>
                </div>

                <button type="submit" class="btn btn-success">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div id="stats-tab" class="tab-content">
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-label">–î–æ—Ö–æ–¥—ã –∑–∞ –º–µ—Å—è—Ü</span>
                    <span class="stat-value positive" id="monthly-income">0 —Å</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–†–∞—Å—Ö–æ–¥—ã –∑–∞ –º–µ—Å—è—Ü</span>
                    <span class="stat-value negative" id="monthly-expenses">0 —Å</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ü—Ä–∏–±—ã–ª—å</span>
                    <span class="stat-value" id="profit">0 —Å</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</span>
                    <span class="stat-value" id="transactions-count">0</span>
                </div>
            </div>

            <button class="btn" onclick="refreshStats()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>

        <!-- –ü–æ–¥–ø–∏—Å–∫–∏ -->
        <div id="subscriptions-tab" class="tab-content">
            <div class="section-header">
                <h2>üîî –í–∞—à–∏ –ø–æ–¥–ø–∏—Å–∫–∏</h2>
                <button class="btn-icon" onclick="showAddSubscription()">‚ûï</button>
            </div>

            <div id="subscriptions-list" class="subscriptions-list">
                <!-- –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                <div class="empty-state">
                    <div class="empty-icon">üì≠</div>
                    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥–ø–∏—Å–æ–∫</p>
                    <button class="btn" onclick="showAddSubscription()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
                </div>
            </div>

            <div class="subscriptions-total">
                <span>üí∞ –ò—Ç–æ–≥–æ –≤ –º–µ—Å—è—Ü:</span>
                <span id="subscriptions-total-amount">0 —Å</span>
            </div>

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div id="add-subscription-form" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>‚ûï –ù–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞</h3>
                        <button class="btn-close" onclick="hideAddSubscription()">‚úñ</button>
                    </div>
                    <form id="subscription-form">
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                            <input type="text" id="sub-title" placeholder="Netflix, Spotify..." required>
                        </div>
                        <div class="form-group">
                            <label>–°—É–º–º–∞</label>
                            <div class="form-row">
                                <input type="number" id="sub-amount" placeholder="0" required step="0.01" style="flex: 2;">
                                <select id="sub-currency" required style="flex: 1;">
                                    <option value="KGS">üá∞üá¨ –°–æ–º</option>
                                    <option value="USD">üá∫üá∏ USD</option>
                                    <option value="EUR">üá™üá∫ EUR</option>
                                    <option value="RUB">üá∑üá∫ RUB</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                            <select id="sub-category" required>
                                <option value="–ø–æ–¥–ø–∏—Å–∫–∏">üì± –ü–æ–¥–ø–∏—Å–∫–∏</option>
                                <option value="–∞—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞">üè¢ –ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞</option>
                                <option value="–Ω–∞–ª–æ–≥–∏">üìã –ù–∞–ª–æ–≥–∏</option>
                                <option value="–∑–∞—Ä–ø–ª–∞—Ç–∞">üíº –ó–∞—Ä–ø–ª–∞—Ç–∞</option>
                                <option value="–ø—Ä–æ—á–µ–µ">üì¶ –ü—Ä–æ—á–µ–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å</label>
                            <select id="sub-frequency" required>
                                <option value="monthly">üìÖ –ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                                <option value="weekly">üìÜ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                                <option value="yearly">üóìÔ∏è –ï–∂–µ–≥–æ–¥–Ω–æ</option>
                                <option value="daily">üìã –ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>–ù–∞–ø–æ–º–Ω–∏—Ç—å –∑–∞ (–¥–Ω–µ–π)</label>
                            <input type="number" id="sub-remind" value="3" min="0" max="30">
                        </div>
                        <div class="form-group checkbox">
                            <label>
                                <input type="checkbox" id="sub-auto-create">
                                –°–æ–∑–¥–∞–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                            </label>
                        </div>
                        <button type="submit" class="btn btn-success">üíæ –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="notifications-tab" class="tab-content">
            <div class="section-header">
                <h2>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
                <button class="btn-icon" onclick="markAllAsRead()">‚úîÔ∏è –í—Å—ë –ø—Ä–æ—á–∏—Ç–∞–Ω–æ</button>
            </div>

            <div class="notifications-filter">
                <button class="filter-btn active" onclick="filterNotifications('all')">–í—Å–µ</button>
                <button class="filter-btn" onclick="filterNotifications('unread')">–ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ</button>
                <button class="filter-btn" onclick="filterNotifications('urgent')">–°—Ä–æ—á–Ω—ã–µ</button>
            </div>

            <div id="notifications-list" class="notifications-list">
                <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                <div class="empty-state">
                    <div class="empty-icon">üîï</div>
                    <p>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ—Ç</p>
                </div>
            </div>

            <button class="btn" onclick="loadNotifications()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
        </div>

        <!-- –ë—é–¥–∂–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑ -->
        <div id="budget-tab" class="tab-content">
            <div class="section-header">
                <h2>üí∞ –ü—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞</h2>
                <button class="btn-icon" onclick="refreshBudget()">üîÑ</button>
            </div>

            <div class="budget-card">
                <div class="budget-header">
                    <h3>–û–∫—Ç—è–±—Ä—å 2025</h3>
                    <span class="budget-status" id="budget-status">‚úÖ –í —Ä–∞–º–∫–∞—Ö</span>
                </div>

                <div class="budget-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="budget-progress" style="width: 0%"></div>
                    </div>
                    <div class="progress-labels">
                        <span id="budget-spent">0 —Å</span>
                        <span id="budget-total">/ 0 —Å</span>
                    </div>
                </div>

                <div class="budget-stats">
                    <div class="stat-row">
                        <span>üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:</span>
                        <span id="budget-percentage">0%</span>
                    </div>
                    <div class="stat-row">
                        <span>üìÖ –û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π:</span>
                        <span id="budget-days-left">0</span>
                    </div>
                    <div class="stat-row">
                        <span>üíµ –û—Å—Ç–∞—Ç–æ–∫:</span>
                        <span id="budget-remaining">0 —Å</span>
                    </div>
                    <div class="stat-row">
                        <span>üìà –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∫–æ–Ω–µ—Ü –º–µ—Å—è—Ü–∞:</span>
                        <span id="budget-forecast">0 —Å</span>
                    </div>
                </div>

                <div class="budget-recommendations">
                    <h4>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h4>
                    <ul id="budget-tips">
                        <li>–°—Ä–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥ –≤ –¥–µ–Ω—å: <strong id="daily-avg">0 —Å</strong></li>
                        <li>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ª–∏–º–∏—Ç: <strong id="daily-limit">0 —Å</strong>/–¥–µ–Ω—å</li>
                        <li id="budget-advice">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–≤–µ—Ç–æ–≤</li>
                    </ul>
                </div>
            </div>

            <div class="alert-settings">
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤</h3>
                <div class="form-group">
                    <label>–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –ø—Ä–∏ (%)</label>
                    <input type="number" id="alert-warning" value="80" min="0" max="100">
                </div>
                <div class="form-group">
                    <label>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ (%)</label>
                    <input type="number" id="alert-critical" value="100" min="0" max="150">
                </div>
                <button class="btn" onclick="saveAlertSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>
        </div>

        <!-- –ò—Å—Ç–æ—Ä–∏—è -->
        <div id="history-tab" class="tab-content">
            <div class="form-row">
                <div class="form-group">
                    <select id="history-filter">
                        <option value="all">–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</option>
                        <option value="income">–¢–æ–ª—å–∫–æ –¥–æ—Ö–æ–¥—ã</option>
                        <option value="expense">–¢–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥—ã</option>
                    </select>
                </div>
                <div class="form-group">
                    <select id="history-period">
                        <option value="week">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                        <option value="month">–ó–∞ –º–µ—Å—è—Ü</option>
                        <option value="year">–ó–∞ –≥–æ–¥</option>
                    </select>
                </div>
            </div>

            <div id="history-list">
                <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>

            <button class="btn" onclick="loadHistory()">üìã –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
        </div>

        <!-- –û—Ç—á—ë—Ç—ã -->
        <div id="reports-tab" class="tab-content">
            <div class="quick-actions">
                <div class="quick-action" onclick="generateReport('pdf')">
                    <div class="icon">üìÑ</div>
                    <div class="text">PDF –æ—Ç—á—ë—Ç</div>
                </div>
                <div class="quick-action" onclick="generateReport('excel')">
                    <div class="icon">üìä</div>
                    <div class="text">Excel –æ—Ç—á—ë—Ç</div>
                </div>
            </div>

            <div class="form-group">
                <label>–ü–µ—Ä–∏–æ–¥ –æ—Ç—á—ë—Ç–∞</label>
                <select id="report-period">
                    <option value="month">–¢–µ–∫—É—â–∏–π –º–µ—Å—è—Ü</option>
                    <option value="quarter">–¢–µ–∫—É—â–∏–π –∫–≤–∞—Ä—Ç–∞–ª</option>
                    <option value="year">–¢–µ–∫—É—â–∏–π –≥–æ–¥</option>
                </select>
            </div>

            <button class="btn" onclick="generateReport('pdf')">üìÑ –°–æ–∑–¥–∞—Ç—å PDF</button>
            <button class="btn btn-secondary" onclick="generateReport('excel')">üìä –°–æ–∑–¥–∞—Ç—å Excel</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
