# üîß HOTFIX: –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å v2.5 - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞–ª—é—Ç –≤ –æ—Ç—á—ë—Ç–∞—Ö

**–î–∞—Ç–∞:** 06 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.5.0-hotfix  
**–¢–∏–ø:** Bug Fix + Enhancement

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (–∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ v2.0-v2.4) –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã:

### ‚ùå –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–ª–æ:

1. **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç (Get Daily Stats)** –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª –≤–∞–ª—é—Ç—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
   - –ü—Ä–æ–±–ª–µ–º–∞: `expenses_detail` –Ω–µ –≤–∫–ª—é—á–∞–ª –ø–æ–ª–µ `currency`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: "–ü—Ä–æ–¥—É–∫—Ç—ã: 1500" –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –≤–∞–ª—é—Ç—ã
   - –û–∂–∏–¥–∞–µ–º–æ–µ: "–ü—Ä–æ–¥—É–∫—Ç—ã: 1500 KGS" –∏–ª–∏ "–ö–∞—Ñ–µ: 50 USD"

2. **ExchangeRates_Daily.json** –∏–º–µ–ª placeholder credentials
   - –í–æ—Ä–∫—Ñ–ª–æ—É –Ω–µ –º–æ–≥ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω Get Daily Stats SQL

**–§–∞–π–ª:** `AnaliziFinance.json` (node: Get Daily Stats)

**–ë—ã–ª–æ:**
```sql
json_agg(
  json_build_object(
    'category', category,
    'amount', amount,
    'description', description
  ) ORDER BY amount DESC
) as expenses_detail
```

**–°—Ç–∞–ª–æ:**
```sql
json_agg(
  json_build_object(
    'category', category,
    'amount', amount,
    'currency', currency,  -- ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
    'description', description
  ) ORDER BY amount DESC
) as expenses_detail
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤ –æ—Ç—á—ë—Ç–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞–ª—é—Ç–µ
- AI Agent –º–æ–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å: "–ü—Ä–æ–¥—É–∫—Ç—ã: 1500 KGS", "–ö–∞—Ñ–µ: 50 USD"

### 2. –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã Get Weekly Data –∏ Get Monthly Data

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ –≤–∫–ª—é—á–∞–ª–∏ –ø–æ–ª–µ `currency` –≤ –≤—ã–±–æ—Ä–∫–µ

–ó–∞–ø—Ä–æ—Å—ã —É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–±–∏—Ä–∞–ª–∏ `currency` –∏–∑ —Ç–∞–±–ª–∏—Ü expenses/income:
```sql
SELECT 
  DATE(date) as expense_date,
  category,
  SUM(amount) as daily_total,
  currency,  -- ‚úÖ –£–ñ–ï –ë–´–õ–û
  COUNT(*) as transaction_count
FROM expenses
...
```

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è.

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã credentials –≤ ExchangeRates_Daily.json

**–§–∞–π–ª:** `ExchangeRates_Daily.json`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- Postgres credential: `"id": "3CGZzcUsaAWp8nrl"` (–≤–º–µ—Å—Ç–æ placeholder)
- Telegram credential: `"id": "WabnlnnS7XdATC3n"` (–≤–º–µ—Å—Ç–æ placeholder)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–æ—Ä–∫—Ñ–ª–æ—É –≥–æ—Ç–æ–≤ –∫ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –°–º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 10:00

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–§–∞–π–ª:** `docs/FEATURES_PLAN_v2.5.md`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Å–µ–∫—Ü–∏—è "–≠–¢–ê–ü 4: –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å"
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (v2.0-v2.4)"
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã"
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```markdown
## üí± –≠–¢–ê–ü 4: –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å - –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ò –£–õ–£–ß–®–ï–ù–ò–Ø

### ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (v2.0-v2.4)
1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
2. AI Agent ‚úÖ
3. –û–ø–µ—Ä–∞—Ü–∏–∏ CRUD ‚úÖ
4. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚úÖ
5. Onboarding ‚úÖ
6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚úÖ

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–ï–õ–´ (—á—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç)
1. –û—Ç—á—ë—Ç—ã –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–∞–ª—é—Ç—É ‚ùå ‚Üí ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
2. –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –æ—Ç—á—ë—Ç–∞—Ö ‚ùå ‚Üí üîú v2.6
3. –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è ‚ùå ‚Üí ‚úÖ –ì–û–¢–û–í–û
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
üìä –û—Ç—á—ë—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è

üí∏ –†–∞—Å—Ö–æ–¥—ã –∑–∞ —Å–µ–≥–æ–¥–Ω—è: (5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
  ‚Ä¢ –ö–∞—Ñ–µ: 50
  ‚Ä¢ –¢–∞–∫—Å–∏: 500
  ‚Ä¢ –ü—Ä–æ–¥—É–∫—Ç—ã: 4000
  ‚Ä¢ –ê–ø—Ç–µ–∫–∞: 20
  ‚Ä¢ –°–≤—è–∑—å: 400
```
‚ùå **–ù–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–∏–µ –≤–∞–ª—é—Ç—ã!**

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
üìä –û—Ç—á—ë—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è

üí∏ –†–∞—Å—Ö–æ–¥—ã –∑–∞ —Å–µ–≥–æ–¥–Ω—è: (5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
  ‚Ä¢ –ö–∞—Ñ–µ: 50 USD üíµ
  ‚Ä¢ –¢–∞–∫—Å–∏: 500 RUB üí∑
  ‚Ä¢ –ü—Ä–æ–¥—É–∫—Ç—ã: 4,000 KGS üá∞üá¨
  ‚Ä¢ –ê–ø—Ç–µ–∫–∞: 20 EUR üí∂
  ‚Ä¢ –°–≤—è–∑—å: 400 KGS üá∞üá¨
```
‚úÖ **–¢–µ–ø–µ—Ä—å –≤—Å—ë —è—Å–Ω–æ!**

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```bash
# 1. –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö
"–ü–æ—Ç—Ä–∞—Ç–∏–ª 50 –¥–æ–ª–ª–∞—Ä–æ–≤ –Ω–∞ –∫–∞—Ñ–µ"
‚Üí ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: 50 USD

"–ü–æ—Ç—Ä–∞—Ç–∏–ª 500 —Ä—É–±–ª–µ–π –Ω–∞ —Ç–∞–∫—Å–∏"
‚Üí ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: 500 RUB

"–ü–æ—Ç—Ä–∞—Ç–∏–ª 4000 –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã"
‚Üí ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: 4000 KGS (preferred_currency)

# 2. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç
"–û—Ç—á—ë—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è"
‚Üí ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –≤–∞–ª—é—Ç–∞–º–∏:
     ‚Ä¢ –ö–∞—Ñ–µ: 50 USD
     ‚Ä¢ –¢–∞–∫—Å–∏: 500 RUB
     ‚Ä¢ –ü—Ä–æ–¥—É–∫—Ç—ã: 4,000 KGS
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –∫—É—Ä—Å—ã
"–ü–æ–∫–∞–∂–∏ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç"
‚Üí ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –∏–∑ exchange_rates

# 2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª—é—Ç—É
"–°–∫–æ–ª—å–∫–æ 100 –¥–æ–ª–ª–∞—Ä–æ–≤ –≤ —Å–æ–º–∞—Ö?"
‚Üí ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç get_exchange_rate() –∏ convert_amount()
‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "8,880 —Å–æ–º (–∫—É—Ä—Å: 1 USD = 88.80 KGS)"
```

---

## üìù Checklist –∏–∑–º–µ–Ω–µ–Ω–∏–π

- [x] –û–±–Ω–æ–≤–ª—ë–Ω SQL –∑–∞–ø—Ä–æ—Å Get Daily Stats (–¥–æ–±–∞–≤–ª–µ–Ω–æ `currency`)
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã Get Weekly Data –∏ Get Monthly Data (—É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã credentials –≤ ExchangeRates_Daily.json
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è FEATURES_PLAN_v2.5.md
- [x] –°–æ–∑–¥–∞–Ω HOTFIX_MULTICURRENCY_v2.5.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ (v2.6)

### –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Auto-conversion –≤ –æ—Ç—á—ë—Ç–∞—Ö (1 —á–∞—Å)**
   - –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `show_original_currency` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
   - –ï—Å–ª–∏ FALSE - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –≤ preferred_currency
   - –ü—Ä–∏–º–µ—Ä: "–ö–∞—Ñ–µ: 50 USD (4,440 —Å–æ–º)"

2. **–ê–∫—Ç–∏–≤–∞—Ü–∏—è ExchangeRates workflow (30 –º–∏–Ω)**
   - –í–∫–ª—é—á–∏—Ç—å ExchangeRates_Daily.json
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

3. **Analytics API multi-currency (1 —á–∞—Å)**
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `preferred_currency` –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö
   - Auto-conversion –≤ JSON –æ—Ç–≤–µ—Ç–∞—Ö
   - Breakdown –ø–æ –≤–∞–ª—é—Ç–∞–º

**–ò—Ç–æ–≥–æ v2.6:** ~2.5 —á–∞—Å–∞

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `docs/MULTICURRENCY_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `docs/RELEASE_v2.1.md` - –∏–∑–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏
- `docs/FEATURES_PLAN_v2.5.md` - –ø–ª–∞–Ω –Ω–æ–≤—ã—Ö —Ñ–∏—á
- `migrations/add_currency_field.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- `migrations/add_exchange_rates.sql` - —Ç–∞–±–ª–∏—Ü–∞ –∫—É—Ä—Å–æ–≤
- `migrations/add_preferred_currency.sql` - –≤–∞–ª—é—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üë• –ê–≤—Ç–æ—Ä—ã

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** GitHub Copilot + hi9ne  
**–î–∞—Ç–∞:** 06 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

**üéâ –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**
