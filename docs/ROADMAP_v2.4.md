# üöÄ AIAccounter v2.4.0 - Multi-tenancy & Analytics
 
**–°—Ç–∞—Ç—É—Å:** üìã Planning  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** High

---

## üéØ –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å —Ä–µ–ª–∏–∑–∞

**–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å AIAccounter –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**

### –î–ª—è –∫–æ–≥–æ:
- üë• **–°–µ–º—å–∏** - —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º–µ–π–Ω—ã–º –±—é–¥–∂–µ—Ç–æ–º
- üè¢ **–ú–∞–ª—ã–π –±–∏–∑–Ω–µ—Å** - –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —Ä–∞–∑–Ω—ã–µ —Ä–æ–ª–∏
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∏** - –≥–ª—É–±–æ–∫–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- üíº **–§—Ä–∏–ª–∞–Ω—Å–µ—Ä—ã** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö –∏ –±–∏–∑–Ω–µ—Å-—Ä–∞—Å—Ö–æ–¥–æ–≤

---

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. üë• Multi-tenancy (–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞)

#### 1.1 Workspaces (–†–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞)
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ workspace:
- üè† –õ–∏—á–Ω—ã–π –±—é–¥–∂–µ—Ç
- üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç
- üíº –ë–∏–∑–Ω–µ—Å –ò–ü "–ò–º—è"
- üéØ –ü—Ä–æ–µ–∫—Ç "–ù–∞–∑–≤–∞–Ω–∏–µ"
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –°–æ–∑–¥–∞—Ç—å workspace
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É workspace
- –ü—Ä–∏–≥–ª–∞—à–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –£–¥–∞–ª–∏—Ç—å workspace

#### 1.2 –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**–†–æ–ª–∏:**
- üëë **Owner** - —Å–æ–∑–¥–∞—Ç–µ–ª—å, –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- üõ†Ô∏è **Admin** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úèÔ∏è **Editor** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üëÅÔ∏è **Viewer** - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ü—Ä–∞–≤–∞:**
| –î–µ–π—Å—Ç–≤–∏–µ | Owner | Admin | Editor | Viewer |
|----------|-------|-------|--------|--------|
| –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |
| –£–¥–∞–ª–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –ü—Ä–∏–≥–ª–∞—à–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –£–ø—Ä–∞–≤–ª—è—Ç—å —Ä–æ–ª—è–º–∏ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ workspace | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| –£–¥–∞–ª–∏—Ç—å workspace | ‚úÖ | ‚ùå | ‚ùå | ‚ùå |
| –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |
| –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå |

#### 1.3 –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

**Flow:**
1. Owner —Å–æ–∑–¥–∞—ë—Ç invite link: `https://t.me/bot?start=invite_ABC123`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ
3. –ë–æ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ workspace
4. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è - –¥–æ—Å—Ç—É–ø –æ—Ç–∫—Ä—ã—Ç

**–õ–∏–º–∏—Ç—ã:**
- Free: –¥–æ 3 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- Premium: –¥–æ 10 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- Business: –¥–æ 50 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

#### 1.4 Audit Log (–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π)
```
üïê 31.10.2025 14:30 | üë§ –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ (Editor)
    ‚ûï –î–æ–±–∞–≤–∏–ª —Ä–∞—Å—Ö–æ–¥: 500 —Å –Ω–∞ "–ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è"

üïê 31.10.2025 15:45 | üë§ –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ (Admin)
    üë• –ü—Ä–∏–≥–ª–∞—Å–∏–ª–∞ –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞: @username

üïê 31.10.2025 16:00 | üë§ –ü–µ—Ç—Ä –ò–≤–∞–Ω–æ–≤ (Owner)
    ‚öôÔ∏è –ò–∑–º–µ–Ω–∏–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—é–¥–∂–µ—Ç–∞: –ª–∏–º–∏—Ç 50,000 —Å ‚Üí 60,000 —Å
```

---

### 2. üìä Advanced Analytics (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)

#### 2.1 –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ (Chart.js)

**–¢–∏–ø—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤:**

1. **Line Chart** - –î–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
   ```
   üìà –î–æ—Ö–æ–¥—ã vs –†–∞—Å—Ö–æ–¥—ã
   [–ì—Ä–∞—Ñ–∏–∫ –ª–∏–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤]
   ```

2. **Bar Chart** - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   ```
   üìä –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤
   [–°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞]
   ```

3. **Pie Chart** - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
   ```
   ü•ß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
   [–ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏]
   ```

4. **Stacked Bar** - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –º–µ—Å—è—Ü–∞–º
   ```
   üìä –†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   [–ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–æ–ª–±—á–∞—Ç–∞—è –∑–∞ –≥–æ–¥]
   ```

5. **Heatmap** - –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Ç—Ä–∞—Ç
   ```
   üî• –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ç—Ä–∞—Ç
   [–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ø–æ –¥–Ω—è–º –º–µ—Å—è—Ü–∞]
   ```

#### 2.2 –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

**–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üí∞ –ë–∞–ª–∞–Ω—Å: 45,000 —Å ‚ñ≤ +15%            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìä –≠—Ç–æ—Ç –º–µ—Å—è—Ü:                         ‚îÇ
‚îÇ   –î–æ—Ö–æ–¥—ã:   60,000 —Å                   ‚îÇ
‚îÇ   –†–∞—Å—Ö–æ–¥—ã:  35,000 —Å                   ‚îÇ
‚îÇ   –ü—Ä–∏–±—ã–ª—å:  25,000 —Å (42%)             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üî• –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤:             ‚îÇ
‚îÇ   1. –ü—Ä–æ–¥—É–∫—Ç—ã   12,000 —Å (34%)         ‚îÇ
‚îÇ   2. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç   8,500 —Å (24%)         ‚îÇ
‚îÇ   3. –ê—Ä–µ–Ω–¥–∞      7,000 —Å (20%)         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìà –¢—Ä–µ–Ω–¥: ‚ñ≤ –†–∞—Å—Ö–æ–¥—ã —Ä–∞—Å—Ç—É—Ç –Ω–∞ 5% –º/–º  ‚îÇ
‚îÇ üí° –°–æ–≤–µ—Ç: –°–æ–∫—Ä–∞—Ç–∏—Ç–µ "–†–µ—Å—Ç–æ—Ä–∞–Ω—ã" –Ω–∞ 20%‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 2.3 –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ (ML)

**–ê–ª–≥–æ—Ä–∏—Ç–º—ã:**
- Linear Regression –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤
- Prophet –æ—Ç Facebook –¥–ª—è —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏
- ARIMA –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤

**–ü—Ä–æ–≥–Ω–æ–∑—ã:**
```
üîÆ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –Ω–æ—è–±—Ä—å 2025:
   –î–æ—Ö–æ–¥—ã:   58,000 ¬± 3,000 —Å (95% CI)
   –†–∞—Å—Ö–æ–¥—ã:  37,000 ¬± 2,500 —Å (95% CI)
   –ü—Ä–∏–±—ã–ª—å:  21,000 ¬± 4,000 —Å
   
   –°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ü—Ä–∏–±—ã–ª—å –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å—Å—è –Ω–∞ 16%
   –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
```

#### 2.4 –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤

**–ü—Ä–∏–º–µ—Ä—ã:**
```
üìä –û–∫—Ç—è–±—Ä—å 2025 vs –°–µ–Ω—Ç—è–±—Ä—å 2025:
   –î–æ—Ö–æ–¥—ã:   ‚ñ≤ +5,000 —Å (+9%)
   –†–∞—Å—Ö–æ–¥—ã:  ‚ñ≤ +3,200 —Å (+10%)
   –ü—Ä–∏–±—ã–ª—å:  ‚ñ≤ +1,800 —Å (+8%)

üìä –û–∫—Ç—è–±—Ä—å 2025 vs –û–∫—Ç—è–±—Ä—å 2024:
   –î–æ—Ö–æ–¥—ã:   ‚ñ≤ +12,000 —Å (+25%)
   –†–∞—Å—Ö–æ–¥—ã:  ‚ñ≤ +8,500 —Å (+32%)
   –ü—Ä–∏–±—ã–ª—å:  ‚ñ≤ +3,500 —Å (+16%)
```

---

### 3. üìÑ Export & Reports (–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤)

#### 3.1 PDF Reports

**–¢–∏–ø—ã –æ—Ç—á—ë—Ç–æ–≤:**

1. **Monthly Report** - –ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç
   ```
   üìÑ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç –∑–∞ –æ–∫—Ç—è–±—Ä—å 2025
   
   1. –†–µ–∑—é–º–µ
      - –î–æ—Ö–æ–¥—ã: 60,000 —Å
      - –†–∞—Å—Ö–æ–¥—ã: 35,000 —Å
      - –ü—Ä–∏–±—ã–ª—å: 25,000 —Å (42%)
   
   2. –ì—Ä–∞—Ñ–∏–∫–∏
      - –î–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü
      - –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   
   3. –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è
      - –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
      - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   
   4. –í—ã–≤–æ–¥—ã
      - –¢—Ä–µ–Ω–¥—ã
      - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   ```

2. **Annual Report** - –ì–æ–¥–æ–≤–æ–π –æ—Ç—á—ë—Ç
   ```
   üìÑ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∏—Ç–æ–≥–∏ 2025 –≥–æ–¥–∞
   
   - –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ –º–µ—Å—è—Ü–∞–º
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Q1-Q4
   - –¢–û–ü-10 —Ç—Ä–∞—Ç –≥–æ–¥–∞
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   ```

3. **Tax Report** - –ù–∞–ª–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç
   ```
   üìÑ –û—Ç—á—ë—Ç –¥–ª—è –Ω–∞–ª–æ–≥–æ–≤–æ–π (–ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω)
   
   - –î–æ—Ö–æ–¥—ã –ø–æ –∫–≤–∞—Ä—Ç–∞–ª–∞–º
   - –ù–î–° (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
   - –ü–∞—Ç–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
   - –ì–æ—Ç–æ–≤ –¥–ª—è –ø–æ–¥–∞—á–∏ –≤ –ì–ù–°
   ```

#### 3.2 Excel Export

**–§–æ—Ä–º–∞—Ç:**
```
–õ–∏—Å—Ç 1: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
| –î–∞—Ç–∞       | –¢–∏–ø    | –ö–∞—Ç–µ–≥–æ—Ä–∏—è  | –°—É–º–º–∞ | –í–∞–ª—é—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|------------|-------|--------|----------|
| 31.10.2025 | –†–∞—Å—Ö–æ–¥ | –ü—Ä–æ–¥—É–∫—Ç—ã   | 500   | KGS    | –ù–∞—Ä–æ–¥–Ω—ã–π |
| 30.10.2025 | –î–æ—Ö–æ–¥  | –ó–∞—Ä–ø–ª–∞—Ç–∞   | 50000 | KGS    | –û–∫—Ç—è–±—Ä—å  |

–õ–∏—Å—Ç 2: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
[–°–≤–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –≥—Ä–∞—Ñ–∏–∫–∏]

–õ–∏—Å—Ç 3: –ë—é–¥–∂–µ—Ç
[–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º]
```

#### 3.3 CSV Export

**–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å 1C, Excel, Google Sheets:**
```csv
date,type,category,amount,currency,description,workspace
2025-10-31,expense,–ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è,500,KGS,"–ù–∞—Ä–æ–¥–Ω—ã–π",–õ–∏—á–Ω—ã–π
2025-10-30,income,–ó–∞—Ä–ø–ª–∞—Ç–∞,50000,KGS,"–û–∫—Ç—è–±—Ä—å",–õ–∏—á–Ω—ã–π
```

---

### 4. üé® UI/UX Improvements

#### 4.1 –ù–æ–≤—ã–µ –≤–∫–ª–∞–¥–∫–∏ Mini App

**–î–æ–±–∞–≤–∏—Ç—å:**
- üìä **Analytics** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥
- üë• **Team** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π
- ‚öôÔ∏è **Settings** - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- üìÑ **Reports** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤

**–ò—Ç–æ–≥–æ –≤–∫–ª–∞–¥–æ–∫:** 10
```
1. ‚ûï Add         - –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
2. üìä Stats       - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ç–µ–∫—É—â–∞—è)
3. üîî Subscriptions - –ü–æ–¥–ø–∏—Å–∫–∏ (v2.3)
4. üîî Notifications - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (v2.3)
5. üí∞ Budget      - –ë—é–¥–∂–µ—Ç –∏ –ø—Ä–æ–≥–Ω–æ–∑ (v2.3)
6. üìú History     - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
7. üìä Analytics   - –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚≠ê NEW
8. üë• Team        - –ö–æ–º–∞–Ω–¥–∞ –∏ —Ä–æ–ª–∏ ‚≠ê NEW
9. üìÑ Reports     - –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ ‚≠ê NEW
10. ‚öôÔ∏è Settings   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚≠ê NEW
```

#### 4.2 Dark Mode

**–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–µ–º–∞:**
- üåû Light Mode (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üåô Dark Mode
- üîÑ Auto (–ø–æ —Å–∏—Å—Ç–µ–º–µ)

#### 4.3 –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–£–ª—É—á—à–µ–Ω–∏—è:**
- Swipe gestures –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- Pull-to-refresh
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (offline mode)

---

## üóÑÔ∏è Database Changes

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (7 —Ç–∞–±–ª–∏—Ü)

#### 1. workspaces
```sql
CREATE TABLE workspaces (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    currency VARCHAR(3) DEFAULT 'KGS',
    owner_id BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. workspace_members
```sql
CREATE TABLE workspace_members (
    id SERIAL PRIMARY KEY,
    workspace_id INTEGER REFERENCES workspaces(id) ON DELETE CASCADE,
    user_id BIGINT NOT NULL,
    role VARCHAR(20) NOT NULL, -- owner, admin, editor, viewer
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(workspace_id, user_id)
);
```

#### 3. workspace_invites
```sql
CREATE TABLE workspace_invites (
    id SERIAL PRIMARY KEY,
    workspace_id INTEGER REFERENCES workspaces(id) ON DELETE CASCADE,
    invite_code VARCHAR(50) UNIQUE NOT NULL,
    role VARCHAR(20) DEFAULT 'viewer',
    created_by BIGINT NOT NULL,
    expires_at TIMESTAMP,
    max_uses INTEGER DEFAULT 1,
    used_count INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 4. audit_logs
```sql
CREATE TABLE audit_logs (
    id SERIAL PRIMARY KEY,
    workspace_id INTEGER REFERENCES workspaces(id) ON DELETE CASCADE,
    user_id BIGINT NOT NULL,
    action_type VARCHAR(50) NOT NULL,
    entity_type VARCHAR(50), -- transaction, budget, member, etc.
    entity_id INTEGER,
    changes JSONB,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 5. analytics_cache
```sql
CREATE TABLE analytics_cache (
    id SERIAL PRIMARY KEY,
    workspace_id INTEGER REFERENCES workspaces(id) ON DELETE CASCADE,
    cache_key VARCHAR(200) NOT NULL,
    cache_data JSONB NOT NULL,
    expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(workspace_id, cache_key)
);
```

#### 6. reports
```sql
CREATE TABLE reports (
    id SERIAL PRIMARY KEY,
    workspace_id INTEGER REFERENCES workspaces(id) ON DELETE CASCADE,
    user_id BIGINT NOT NULL,
    report_type VARCHAR(50) NOT NULL, -- monthly, annual, tax
    format VARCHAR(10) NOT NULL, -- pdf, excel, csv
    parameters JSONB,
    file_url TEXT,
    status VARCHAR(20) DEFAULT 'pending', -- pending, processing, ready, failed
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);
```

#### 7. user_preferences
```sql
CREATE TABLE user_preferences (
    id SERIAL PRIMARY KEY,
    user_id BIGINT UNIQUE NOT NULL,
    theme VARCHAR(20) DEFAULT 'light', -- light, dark, auto
    language VARCHAR(10) DEFAULT 'ru',
    timezone VARCHAR(50) DEFAULT 'Asia/Bishkek',
    default_workspace_id INTEGER REFERENCES workspaces(id),
    notification_settings JSONB DEFAULT '{"email": true, "telegram": true}',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü

#### –î–æ–±–∞–≤–∏—Ç—å workspace_id –≤–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã:
```sql
ALTER TABLE income ADD COLUMN workspace_id INTEGER REFERENCES workspaces(id);
ALTER TABLE expenses ADD COLUMN workspace_id INTEGER REFERENCES workspaces(id);
ALTER TABLE budgets ADD COLUMN workspace_id INTEGER REFERENCES workspaces(id);
ALTER TABLE recurring_payments ADD COLUMN workspace_id INTEGER REFERENCES workspaces(id);
ALTER TABLE notifications ADD COLUMN workspace_id INTEGER REFERENCES workspaces(id);

-- –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_income_workspace ON income(workspace_id);
CREATE INDEX idx_expenses_workspace ON expenses(workspace_id);
CREATE INDEX idx_budgets_workspace ON budgets(workspace_id);
```

---

## ü§ñ New AI Tools

### 1. Workspace Management
```javascript
{
  name: "Create_workspace",
  description: "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ",
  parameters: {
    name: "string",
    description: "string (optional)",
    currency: "string (default: KGS)"
  }
}
```

### 2. Team Management
```javascript
{
  name: "Invite_member",
  description: "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ workspace",
  parameters: {
    workspace_id: "integer",
    role: "owner|admin|editor|viewer"
  }
}
```

### 3. Analytics
```javascript
{
  name: "Get_analytics",
  description: "–ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏",
  parameters: {
    workspace_id: "integer",
    chart_type: "line|bar|pie|stacked|heatmap",
    period: "week|month|quarter|year"
  }
}
```

### 4. Reports
```javascript
{
  name: "Generate_report",
  description: "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç",
  parameters: {
    workspace_id: "integer",
    report_type: "monthly|annual|tax",
    format: "pdf|excel|csv",
    period: "string (YYYY-MM)"
  }
}
```

### 5. Forecasting
```javascript
{
  name: "Get_forecast",
  description: "–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ ML",
  parameters: {
    workspace_id: "integer",
    months_ahead: "integer (1-12)",
    confidence_level: "float (0.9-0.99)"
  }
}
```

---

## üîÑ n8n Workflows

### 1. Report_Generator.json
**Trigger:** Webhook –∏–ª–∏ Schedule  
**–§—É–Ω–∫—Ü–∏—è:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF/Excel –æ—Ç—á—ë—Ç–æ–≤  
**–ù–æ–¥—ã:**
1. Webhook/Schedule Trigger
2. Get report parameters
3. Fetch data from DB
4. Generate PDF (using Puppeteer)
5. Upload to Supabase Storage
6. Send notification to user

### 2. Analytics_Cache_Updater.json
**Trigger:** Schedule (–∫–∞–∂–¥—ã–π —á–∞—Å)  
**–§—É–Ω–∫—Ü–∏—è:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏  
**–ù–æ–¥—ã:**
1. Schedule Trigger (hourly)
2. Loop all active workspaces
3. Calculate analytics metrics
4. Update analytics_cache table
5. Log completion

### 3. ML_Forecast_Updater.json
**Trigger:** Schedule (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ 03:00)  
**–§—É–Ω–∫—Ü–∏—è:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ML –ø—Ä–æ–≥–Ω–æ–∑–æ–≤  
**–ù–æ–¥—ã:**
1. Schedule Trigger (daily)
2. Get historical data
3. Call Python ML service (Flask API)
4. Store predictions
5. Send summary to admins

---

## üì± Mini App Updates

### New Components:

#### 1. Chart.js Integration
```html
<canvas id="income-expense-chart"></canvas>
<canvas id="category-pie-chart"></canvas>
<canvas id="trend-line-chart"></canvas>
```

#### 2. Team Management UI
```html
<div class="team-tab">
  <h2>–£—á–∞—Å—Ç–Ω–∏–∫–∏ (5)</h2>
  <div class="member-list">
    <!-- Member cards -->
  </div>
  <button onclick="inviteMember()">‚ûï –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</button>
</div>
```

#### 3. Reports Generation
```html
<div class="reports-tab">
  <h2>–û—Ç—á—ë—Ç—ã</h2>
  <select id="report-type">
    <option value="monthly">–ú–µ—Å—è—á–Ω—ã–π</option>
    <option value="annual">–ì–æ–¥–æ–≤–æ–π</option>
    <option value="tax">–ù–∞–ª–æ–≥–æ–≤—ã–π</option>
  </select>
  <select id="report-format">
    <option value="pdf">PDF</option>
    <option value="excel">Excel</option>
    <option value="csv">CSV</option>
  </select>
  <button onclick="generateReport()">üìÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
</div>
```

---

## üß™ Testing Plan

### Unit Tests
- [ ] Workspace CRUD operations
- [ ] Role-based access control (RBAC)
- [ ] Invite link generation
- [ ] PDF generation
- [ ] Analytics calculations
- [ ] ML forecasting

### Integration Tests
- [ ] Multi-user workflow
- [ ] Report generation end-to-end
- [ ] Chart.js rendering
- [ ] Export to Excel/CSV

### Load Tests
- [ ] 100 concurrent users
- [ ] 1000 workspaces
- [ ] Large dataset analytics (10k+ transactions)

---

## üìä Metrics & KPIs

**Success Criteria:**
- ‚úÖ Workspaces created: >100
- ‚úÖ Team invites accepted: >50%
- ‚úÖ Reports generated: >500/month
- ‚úÖ Chart views: >1000/day
- ‚úÖ User retention: >70%

**Performance:**
- Chart rendering: <1s
- PDF generation: <5s
- Analytics query: <2s
- Forecast calculation: <10s

---

## üöÄ Roadmap

### Phase 1: Foundation (Weeks 1-2)
- [ ] Database schema migration
- [ ] Workspace CRUD API
- [ ] RBAC implementation
- [ ] Basic team management

### Phase 2: Analytics (Weeks 3-4)
- [ ] Chart.js integration
- [ ] Dashboard UI
- [ ] Analytics API endpoints
- [ ] Caching layer

### Phase 3: Reports (Weeks 5-6)
- [ ] PDF generation (Puppeteer)
- [ ] Excel export (ExcelJS)
- [ ] CSV export
- [ ] Report scheduling

### Phase 4: ML & Forecasting (Weeks 7-8)
- [ ] Python ML service setup
- [ ] Model training pipeline
- [ ] Forecast API integration
- [ ] UI for predictions

### Phase 5: Testing & Polish (Weeks 9-10)
- [ ] Full testing suite
- [ ] Bug fixes
- [ ] Performance optimization
- [ ] Documentation

### Phase 6: Release (Week 11)
- [ ] Final QA
- [ ] Deployment
- [ ] User training materials
- [ ] Launch announcement

---

## üí∞ Monetization (Optional)

### Pricing Tiers:

**Free:**
- 1 workspace
- 3 team members
- Basic analytics
- Monthly reports

**Premium ($4.99/month):**
- 3 workspaces
- 10 team members
- Advanced analytics
- All report types
- Export to Excel/CSV
- ML forecasting

**Business ($14.99/month):**
- Unlimited workspaces
- 50 team members
- Priority support
- Custom reports
- API access
- White-label option

---

## üîó Dependencies

### New Libraries:
- **Chart.js** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- **Puppeteer** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
- **ExcelJS** - —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel
- **Python Flask** - ML service (Prophet/ARIMA)
- **scikit-learn** - –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- **pandas** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### External Services:
- **Supabase Storage** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ PDF/Excel —Ñ–∞–π–ª–æ–≤
- **Redis** (optional) - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **ML Service** - –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ Python

---

## üìù Documentation Plan

### New Docs:
- [ ] WORKSPACE_GUIDE.md - —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–º–∞–Ω–¥–∞–º–∏
- [ ] ANALYTICS_GUIDE.md - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- [ ] REPORTS_GUIDE.md - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- [ ] ML_FORECAST_GUIDE.md - –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ML
- [ ] RBAC_GUIDE.md - —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- [ ] API_v2.4_REFERENCE.md - –Ω–æ–≤—ã–µ API endpoints

---

## üéØ Success Metrics

**Technical:**
- Code coverage: >80%
- API response time: <200ms (p95)
- PDF generation: <5s
- Zero critical bugs

**Business:**
- 200+ new workspaces created
- 100+ teams with >2 members
- 1000+ reports generated
- 90% user satisfaction

---

## üîÆ Future Ideas (v2.5.0+)

- üè¶ Bank integrations (Demir Bank, KICB)
- üì± Mobile app (React Native)
- üîÑ Automatic transaction categorization (ML)
- üåç Multi-language support
- üí≥ Expense scanning (OCR for receipts)
- ü§ñ Telegram Bot improvements (inline keyboards)
- üìä Custom dashboard widgets
- üîî Advanced notification rules
- üí∞ Cryptocurrency support
- üîê Two-factor authentication (2FA)

---

**v2.4.0 –±—É–¥–µ—Ç –ú–û–©–ù–´–ú —Ä–µ–ª–∏–∑–æ–º! üöÄ**

Estimated timeline: **10-11 –Ω–µ–¥–µ–ª—å** (2.5 –º–µ—Å—è—Ü–∞)  
Estimated effort: **~200 —á–∞—Å–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**

Ready to start? üéâ
