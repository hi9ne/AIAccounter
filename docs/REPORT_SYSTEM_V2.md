# –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤

## üéâ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥–µ–ª–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:

### ‚ùå –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ø—Ä–æ–±–ª–µ–º–Ω–∞—è)
- –°–ª–æ–∂–Ω—ã–π Helper AI Financer workflow
- Execute Workflow Tool —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –ø–µ—Ä–µ–¥–∞—á–∏ user_id
- –ó–∞–ø—É—Ç–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å Is Schedule?
- AI –Ω–µ –º–æ–≥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ—á—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### ‚úÖ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ø—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è)
- **Report Generator** - –ø—Ä–æ—Å—Ç–æ–π webhook workflow
- –ü—Ä—è–º–æ–π HTTP Request –≤–º–µ—Å—Ç–æ Execute Workflow
- –ü–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö AI –∞–≥–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –æ–¥–∏–Ω workflow

## üìÇ –§–∞–π–ª—ã

### 1. Report Generator.json
–ù–æ–≤—ã–π workflow –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ Webhook –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ Telegram (—á–µ—Ä–µ–∑ AI Financer)
- ‚úÖ Schedule —Ç—Ä–∏–≥–≥–µ—Ä—ã: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ (21:00), –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ (–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 21:00), –µ–∂–µ–º–µ—Å—è—á–Ω–æ (1 —á–∏—Å–ª–æ 09:00)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö—Ä–∞—Å–∏–≤–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Å —ç–º–æ–¥–∑–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram

**Endpoints:**
- `POST /webhook/generate-report`
  ```json
  {
    "user_id": 123456,
    "telegram_chat_id": 123456,
    "period_type": "today|week|month"
  }
  ```

### 2. Ai Financer.json (–æ–±–Ω–æ–≤–ª–µ–Ω)
–ì–ª–∞–≤–Ω—ã–π workflow - –∑–∞–º–µ–Ω–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Generate Report

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω: `@n8n/n8n-nodes-langchain.toolWorkflow`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω: `@n8n/n8n-nodes-langchain.toolHttpRequest`
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- ‚úÖ AI —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–∏–æ–¥ (today/week/month)

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –æ—Ç—á–µ—Ç –≤ Telegram

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–æ—Ç—á–µ—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è"
2. AI Financer —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
3. AI –≤—ã–∑—ã–≤–∞–µ—Ç Generate Report tool —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `period: "today"`
4. HTTP Request –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ webhook Report Generator
5. Report Generator:
   - –í—ã—á–∏—Å–ª—è–µ—Ç –ø–µ—Ä–∏–æ–¥ (—Å–µ–≥–æ–¥–Ω—è = 00:00 - 23:59)
   - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram
6. AI –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ –≥–æ–≤–æ—Ä–∏—Ç: "‚úÖ –û—Ç—á–µ—Ç –≥–æ—Ç–æ–≤–∏—Ç—Å—è, —Å–µ–π—á–∞—Å –æ—Ç–ø—Ä–∞–≤–ª—é!"
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç—á–µ—Ç –≤ Telegram

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

1. Schedule Trigger —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, Daily 21:00)
2. Get Active Users - –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   - Prepare Schedule Data - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ—Ç—á–µ—Ç–∞ (today/week/month)
   - Calculate Period - –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–∞—Ç—ã
   - Get Report Data - –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
   - Has Data? - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ù–ï–¢ - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç)
   - –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ï–°–¢–¨ - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram

## üìä –§–æ—Ä–º–∞—Ç—ã –æ—Ç—á–µ—Ç–æ–≤

### –° –¥–∞–Ω–Ω—ã–º–∏
```
üìä –û—Ç—á–µ—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è

üí∞ –î–æ—Ö–æ–¥—ã: 50000 KGS
üí∏ –†–∞—Å—Ö–æ–¥—ã: 15000 KGS
‚öñÔ∏è –ë–∞–ª–∞–Ω—Å: +35000 KGS

üìà –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–π: 12
   ‚Ä¢ –î–æ—Ö–æ–¥–æ–≤: 2
   ‚Ä¢ –†–∞—Å—Ö–æ–¥–æ–≤: 10
```

### –ë–µ–∑ –¥–∞–Ω–Ω—ã—Ö
```
üìä –û—Ç—á–µ—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è

ü§∑‚Äç‚ôÇÔ∏è –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∑–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö.

–î–æ–±–∞–≤—å—Ç–µ –¥–æ—Ö–æ–¥—ã –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥—ã, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—Ç—á–µ—Ç!
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç workflows
1. –û—Ç–∫—Ä–æ–π—Ç–µ n8n
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `Report Generator.json`
3. –ó–∞–º–µ–Ω–∏—Ç–µ `Ai Financer.json`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ n8n —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:
```
N8N_WEBHOOK_URL=https://your-n8n-domain.com
```

–ò–ª–∏ –∑–∞–º–µ–Ω–∏—Ç–µ –≤ AI Financer workflow:
```javascript
"url": "https://your-n8n-domain.com/webhook/generate-report"
```

### –®–∞–≥ 3: –ê–∫—Ç–∏–≤–∞—Ü–∏—è
1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ Report Generator workflow
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ Ai Financer workflow
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ: –Ω–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É "–æ—Ç—á–µ—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è"

## üéØ –†–∞—Å–ø–∏—Å–∞–Ω–∏—è

- **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ**: 21:00 (–ø–µ—Ä–∏–æ–¥: —Å–µ–≥–æ–¥–Ω—è)
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ**: –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 21:00 (–ø–µ—Ä–∏–æ–¥: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)
- **–ï–∂–µ–º–µ—Å—è—á–Ω–æ**: 1 —á–∏—Å–ª–æ 09:00 (–ø–µ—Ä–∏–æ–¥: —Å –Ω–∞—á–∞–ª–∞ –º–µ—Å—è—Ü–∞)

**–í–∞–∂–Ω–æ**: –û—Ç—á–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥!

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—Ç—á–µ—Ç –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Report Generator –∞–∫—Ç–∏–≤–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook URL –≤ AI Financer
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ Report Generator - –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ users —Å telegram_chat_id

### AI –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç Generate Report
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç AI Financer
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ tool description –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —è–≤–Ω–æ: "—Å–æ–∑–¥–∞–π –æ—Ç—á–µ—Ç –∑–∞ —Å–µ–≥–æ–¥–Ω—è"

### Schedule –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Report Generator –∞–∫—Ç–∏–≤–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ timezone n8n (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å UTC+6 –¥–ª—è –ë–∏—à–∫–µ–∫–∞)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ —Ç–∞–±–ª–∏—Ü–µ users –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
–û—Ç–∫—Ä–æ–π—Ç–µ Report Generator workflow –∏ –∏–∑–º–µ–Ω–∏—Ç–µ schedule —Ç—Ä–∏–≥–≥–µ—Ä—ã:
- Daily Report (21:00) - –∏–∑–º–µ–Ω–∏—Ç–µ —á–∞—Å
- Weekly Report (Sun 21:00) - –∏–∑–º–µ–Ω–∏—Ç–µ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –∏ —á–∞—Å
- Monthly Report (1st 09:00) - –∏–∑–º–µ–Ω–∏—Ç–µ –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ –∏ —á–∞—Å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
–í Calculate Period node –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π case:
```javascript
case 'custom_period':
  startDate = new Date('2025-01-01');
  endDate = new Date('2025-01-31');
  periodName = '—è–Ω–≤–∞—Ä—å 2025';
  break;
```

### –£–ª—É—á—à–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ò–∑–º–µ–Ω–∏—Ç–µ Format Report node - –¥–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≥—Ä–∞—Ñ–∏–∫–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ —Ç.–¥.
