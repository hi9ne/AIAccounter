# ‚úÖ MiniApp - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. –°–æ–∑–¥–∞–Ω API Helper (`api-helper.js`)
‚úÖ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FastAPI
‚úÖ –í—Å–µ 44 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ —É–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤
‚úÖ Error handling

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`miniapp-config.js`)
‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ FastAPI (`mode: 'api'`)
‚úÖ baseUrl: `http://localhost:8000/api/v1`
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ n8n –¥–ª—è fallback

### 3. –û–±–Ω–æ–≤–ª—ë–Ω app.js
‚úÖ `loadDashboard()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `api.getOverview()`
‚úÖ `loadWorkspaces()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `api.getWorkspaces()` –∏ `api.createWorkspace()`
‚úÖ `loadBalance()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `api.getOverview()`
‚úÖ `loadQuickStats()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `api.getIncomeExpenseStats()`
‚úÖ `loadRecentTransactions()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `api.getExpenses()` –∏ `api.getIncome()`
‚úÖ `submitTransaction()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `api.createExpense()` / `api.createIncome()`

### 4. –°–æ–∑–¥–∞–Ω HTTP —Å–µ—Ä–≤–µ—Ä (`server.py`)
‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 5173
‚úÖ CORS –≤–∫–ª—é—á—ë–Ω
‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫: `python server.py`

---

## üéØ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### ‚úÖ –ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (35 —Ä–∞—Å—Ö–æ–¥–æ–≤ + 15 –¥–æ—Ö–æ–¥–æ–≤)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∞–ª—é—Ç (5 –≤–∞–ª—é—Ç)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- Health check

### ‚è≥ –° –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω):
- Dashboard (–±–∞–ª–∞–Ω—Å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤/–¥–æ—Ö–æ–¥–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- Workspace management
- –û—Ç—á—ë—Ç—ã

---

## üöÄ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞:

**Terminal 1 - Backend:**
```bash
cd backend
.\venv\Scripts\Activate.ps1
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**Terminal 2 - MiniApp:**
```bash
cd miniapp
python server.py
```

### 2. –û—Ç–∫—Ä—ã—Ç—å MiniApp:
http://localhost:5173/index.html

### 3. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –±–µ–∑ —Ç–æ–∫–µ–Ω–∞:

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const categories = await api.getAllCategories();
console.log('–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:', categories);

// –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å—ã
const rates = await api.getRates();
console.log('–ö—É—Ä—Å—ã:', rates);
```

### 5. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ç–æ–∫–µ–Ω–æ–º:

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î**
```sql
INSERT INTO users (user_id, telegram_chat_id, first_name, username)
VALUES (999999, 999999, 'Test', 'testuser');
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ Swagger**
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:8000/docs
2. POST /api/v1/auth/telegram
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `access_token`

**–í–∞—Ä–∏–∞–Ω—Ç –í: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏**
```javascript
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
api.setToken('–≤–∞—à_jwt_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å');

// –¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
const user = await api.getCurrentUser();
console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', user);

const workspaces = await api.getWorkspaces();
console.log('Workspaces:', workspaces);

// –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Ö–æ–¥
const expense = await api.createExpense({
    amount: 1000,
    currency: 'KGS',
    category: 'food',
    description: '–¢–µ—Å—Ç–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥',
    date: '2025-11-12'
});
console.log('–†–∞—Å—Ö–æ–¥ —Å–æ–∑–¥–∞–Ω:', expense);
```

---

## üîß –ß—Ç–æ –µ—â—ë –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å:

### –í app.js –æ—Å—Ç–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å:

1. **loadAnalytics()** - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.getCategoryAnalytics()`
   - –û–±–Ω–æ–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ Chart.js

2. **loadTeam()** - –∫–æ–º–∞–Ω–¥–∞ workspace
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.getWorkspaceMembers()`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.createInvite()`

3. **loadReports()** - –æ—Ç—á—ë—Ç—ã
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.getReports()`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.generateReport()`

4. **loadHistory()** - –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.getExpenses()` + `api.getIncome()`

5. **loadSettings()** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.getCurrentUser()`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `api.updateUser()`

---

## üìä –°—Ç–∞—Ç—É—Å —Ñ—É–Ω–∫—Ü–∏–π:

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | API –ú–µ—Ç–æ–¥ |
|---------|--------|-----------|
| loadDashboard | ‚úÖ –ì–æ—Ç–æ–≤–æ | api.getOverview() |
| loadWorkspaces | ‚úÖ –ì–æ—Ç–æ–≤–æ | api.getWorkspaces() |
| loadBalance | ‚úÖ –ì–æ—Ç–æ–≤–æ | api.getOverview() |
| loadQuickStats | ‚úÖ –ì–æ—Ç–æ–≤–æ | api.getIncomeExpenseStats() |
| loadRecentTransactions | ‚úÖ –ì–æ—Ç–æ–≤–æ | api.getExpenses() + api.getIncome() |
| submitTransaction | ‚úÖ –ì–æ—Ç–æ–≤–æ | api.createExpense/Income() |
| loadAnalytics | ‚è≥ TODO | api.getCategoryAnalytics() |
| loadTeam | ‚è≥ TODO | api.getWorkspaceMembers() |
| loadReports | ‚è≥ TODO | api.getReports() |
| loadHistory | ‚è≥ TODO | api.getExpenses() |
| loadSettings | ‚è≥ TODO | api.getCurrentUser() |

---

## üé® UI —Ä–∞–±–æ—Ç–∞–µ—Ç:

‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Dashboard)
‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥/–¥–æ—Ö–æ–¥
‚úÖ –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚úÖ –í—ã–±–æ—Ä –≤–∞–ª—é—Ç—ã
‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚úÖ –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ù–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Ç–æ–∫–µ–Ω–æ–º –≤—Ä—É—á–Ω—É—é
2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞** - –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—ã–µ webhook
3. **–ì—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã** - –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å –Ω–∞ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
4. **Team –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å API –≤—ã–∑–æ–≤—ã
5. **Reports –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å API –≤—ã–∑–æ–≤—ã

---

## üìù –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π:

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ):
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram WebApp
- [ ] –û–±–Ω–æ–≤–∏—Ç—å loadAnalytics()
- [ ] –û–±–Ω–æ–≤–∏—Ç—å loadTeam()

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ):
- [ ] –û–±–Ω–æ–≤–∏—Ç—å loadHistory()
- [ ] –û–±–Ω–æ–≤–∏—Ç—å loadReports()
- [ ] –û–±–Ω–æ–≤–∏—Ç—å loadSettings()

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ):
- [ ] –î–æ–±–∞–≤–∏—Ç—å refresh —Ç–æ–∫–µ–Ω–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å offline mode
- [ ] –£–ª—É—á—à–∏—Ç—å error handling
- [ ] –î–æ–±–∞–≤–∏—Ç—å loading states
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üéâ –ò—Ç–æ–≥–æ:

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç!**

–í—ã –º–æ–∂–µ—Ç–µ:
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –≤–∞–ª—é—Ç—ã
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –∏ –¥–æ—Ö–æ–¥—ã (—Å —Ç–æ–∫–µ–Ω–æ–º)
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å dashboard (—Å —Ç–æ–∫–µ–Ω–æ–º)
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—Å —Ç–æ–∫–µ–Ω–æ–º)

**–ó–∞–ø—É—â–µ–Ω–æ:**
- üöÄ Backend: http://localhost:8000
- üìö Swagger: http://localhost:8000/docs
- üì± MiniApp: http://localhost:5173/index.html

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram!
