# ‚úÖ WORKFLOWS –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–´!

**–î–∞—Ç–∞:** 20.11.2025  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

---

## üîß **–ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û:**

### **1. Ai Financer.json - –ì–õ–ê–í–ù–´–ô WORKFLOW**

#### ‚ùå **–ë–´–õ–û:**
- Call 'Helper AI Financer' –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ AI Agent
- –ö—É—á–∞ disabled –Ω–æ–¥–æ–≤ (—Å—Ç–∞—Ä—ã–π –∫–æ–¥)
- Credentials "OpenAi account" (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ)
- –ù–µ—Ç RAG Vector Store –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
- –ó–∞–ø—É—Ç–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–¥–æ–≤
- –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –Ω–æ–¥—ã

#### ‚úÖ **–°–¢–ê–õ–û:**
```
–ß–ò–°–¢–ê–Ø –°–¢–†–£–ö–¢–£–†–ê:

Telegram ‚Üí Switch ‚Üí [Voice/Text Processing] ‚Üí Main AI Agent ‚Üí Send Reply
                                                      ‚Üì
                                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                            ‚îÇ                   ‚îÇ
                                     Income Agent      Expenses Agent
                                            ‚îÇ                   ‚îÇ
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ               ‚îÇ   ‚îÇ             ‚îÇ
                              Get Rows        Vector‚îÇ   ‚îÇVector  Get Rows
                              Calculator      Store ‚îÇ   ‚îÇStore   Calculator
                              Chat Memory           ‚îÇ   ‚îÇ        Chat Memory
                                                    ‚îÇ   ‚îÇ
                                                    ‚îî‚îÄ‚îÄ‚îÄ‚îò
                                                      ‚îÇ
                                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                        ‚îÇ                           ‚îÇ
                                Create/Delete Tools        Create/Delete Tools
                                   (Income)                    (Expenses)
```

#### üéØ **–ö–õ–Æ–ß–ï–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:**

1. **‚úÖ –ü–û–î–ö–õ–Æ–ß–ï–ù–´ –í–°–ï –°–í–Ø–ó–ò:**
   - Income Agent ‚Üí Main AI Agent (ai_tool)
   - Expenses Agent ‚Üí Main AI Agent (ai_tool)
   - –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ Main AI Agent
   - RAG Vector Store –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∞–≥–µ–Ω—Ç–∞–º

2. **‚úÖ RAG –í–ï–ö–¢–û–†–ù–´–ô –ü–û–ò–°–ö:**
   - Income Vector Store ‚Üí –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Income Agent
   - Expenses Vector Store ‚Üí –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Expenses Agent
   - Embeddings OpenAI –¥–ª—è –æ–±–æ–∏—Ö
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏: `match_income_documents()`, `match_expenses_documents()`

3. **‚úÖ CREDENTIALS –û–ë–ù–û–í–õ–ï–ù–´:**
   - –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç "AIAccounter" (Telegram, OpenAI, Supabase)
   - PostgreSQL: "AIAccounter supabase"
   - –°—Ç–∞—Ä—ã–µ ID credential —É–¥–∞–ª–µ–Ω—ã

4. **‚úÖ –£–î–ê–õ–ï–ù–´ DISABLED –ù–û–î–´:**
   - Telegram Trigger1 ‚ùå
   - Switch1 ‚ùå
   - OpenAI1 ‚ùå
   - –í—Å–µ Google Sheets –Ω–æ–¥—ã ‚ùå
   - –°—Ç–∞—Ä—ã–µ Sticky Notes ‚ùå

5. **‚úÖ –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:**
   - –î–≤–∞ –ø—É—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏: Voice + Text
   - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã –¥–ª—è Income/Expenses
   - –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç:
     * –°–≤–æ—é Chat Memory
     * –°–≤–æ–π Vector Store (RAG)
     * –°–≤–æ–π Calculator
     * –î–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º —Ç–∞–±–ª–∏—Ü–∞–º –ë–î

6. **‚úÖ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –†–ê–ë–û–¢–ê –° –ë–î:**
   - `user_id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ Telegram
   - –í—Å–µ –ø–æ–ª—è –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î:
     * `amount` (–Ω–µ sum/summ)
     * `description` (–Ω–µ comment)
     * `date` (–Ω–µ created_at)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `user_id` –¥–ª—è RLS

---

### **2. Helper AI Financer.json - HELPER WORKFLOW**

#### ‚ùå **–ë–´–õ–û:**
- –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ "Call 'Ai Financer'" (–æ–ø–∞—Å–Ω–æ!)
- RAG –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∏—Å—è—Ç –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
- –õ–∏—à–Ω–∏–µ –Ω–æ–¥—ã (Insert into Supabase Vectorstore2, Enhanced Default Data Loader)
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ credentials
- –ù–µ–ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

#### ‚úÖ **–°–¢–ê–õ–û:**
```
–£–ü–†–û–©–ï–ù–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê:

When Called ‚Üí Helper AI Agent ‚Üí Return Result
                    ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                       ‚îÇ
  OpenAI Model          Chat Memory
        ‚îÇ                       
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ           ‚îÇ
Create     Delete
Tools      Tools
(Income/   (Income/
Expenses)  Expenses)
```

#### üéØ **–ö–õ–Æ–ß–ï–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:**

1. **‚úÖ –£–ë–†–ê–ù–ê –¶–ò–ö–õ–ò–ß–ï–°–ö–ê–Ø –ó–ê–í–ò–°–ò–ú–û–°–¢–¨:**
   - –£–¥–∞–ª–µ–Ω "Call 'Ai Financer'" (–Ω–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω—ã–π workflow)
   - –¢–µ–ø–µ—Ä—å Helper —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥–∏—Ö workflows

2. **‚úÖ –£–î–ê–õ–ï–ù–´ –ù–ï–ü–û–î–ö–õ–Æ–ß–ï–ù–ù–´–ï –ù–û–î–´:**
   - Insert into Supabase Vectorstore2 ‚ùå
   - Enhanced Default Data Loader ‚ùå
   - Recursive Character Text Splitter2 ‚ùå
   - Embeddings OpenAI3 ‚ùå

3. **‚úÖ –ß–ò–°–¢–ê–Ø –°–¢–†–£–ö–¢–£–†–ê:**
   - –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
   - –ü—Ä–æ—Å—Ç–æ–π flow: –≤—Ö–æ–¥ ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí –≤—ã—Ö–æ–¥
   - –í—Å–µ –Ω–æ–¥—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

4. **‚úÖ CREDENTIALS –û–ë–ù–û–í–õ–ï–ù–´:**
   - OpenAI: "AIAccounter"
   - Supabase: "AIAccounter"
   - PostgreSQL: "AIAccounter supabase"

---

## üìä **–°–†–ê–í–ù–ï–ù–ò–ï:**

### Ai Financer.json:
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë–´–õ–û | –°–¢–ê–õ–û |
|----------|------|-------|
| –í—Å–µ–≥–æ –Ω–æ–¥–æ–≤ | 50+ | 29 |
| –ê–∫—Ç–∏–≤–Ω—ã—Ö –Ω–æ–¥–æ–≤ | 29 | 29 |
| Disabled –Ω–æ–¥–æ–≤ | 21 | 0 |
| –ù–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö | 5 | 0 |
| Credentials | –°—Ç–∞—Ä—ã–µ | AIAccounter |
| RAG Vector Store | ‚ùå | ‚úÖ |
| Call Helper –ø–æ–¥–∫–ª—é—á–µ–Ω | ‚ùå | N/A (–Ω–µ –Ω—É–∂–µ–Ω!) |

### Helper AI Financer.json:
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë–´–õ–û | –°–¢–ê–õ–û |
|----------|------|-------|
| –í—Å–µ–≥–æ –Ω–æ–¥–æ–≤ | 12 | 9 |
| –ù–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö | 5 | 0 |
| –¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –≤—ã–∑–æ–≤–æ–≤ | 1 | 0 |
| Credentials | –°—Ç–∞—Ä—ã–µ | AIAccounter |

---

## üéØ **–ü–û–ß–ï–ú–£ HELPER –ù–ï –ù–£–ñ–ï–ù:**

### –ê–Ω–∞–ª–∏–∑:
–í –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ **Helper workflow —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** –∏ –Ω–µ –Ω—É–∂–µ–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. ‚úÖ –í—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–∂–µ –µ—Å—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–º workflow
2. ‚úÖ Income Agent –∏ Expenses Agent —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–∞–º–∏
3. ‚úÖ RAG Vector Store –ø–æ–¥–∫–ª—é—á–µ–Ω –Ω–∞–ø—Ä—è–º—É—é
4. ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Supabase Tool

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
**–ú–æ–∂–Ω–æ –£–î–ê–õ–ò–¢–¨ Helper –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –±—É–¥—É—â–µ–µ** –¥–ª—è:
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
- Batch –æ–ø–µ—Ä–∞—Ü–∏–π
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å –≤–Ω–µ—à–Ω–∏–º–∏ API

---

## üöÄ **–ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**

### 1. –ò–º–ø–æ—Ä—Ç –≤ n8n:

```bash
1. –û—Ç–∫—Ä–æ–π n8n UI
2. Workflows ‚Üí Import from File
3. –í—ã–±–µ—Ä–∏: Ai Financer.json
4. –ù–∞—Å—Ç—Ä–æ–π credentials:
   - Telegram API ‚Üí "AIAccounter"
   - OpenAI API ‚Üí "AIAccounter"
   - Supabase API ‚Üí "AIAccounter"
   - PostgreSQL ‚Üí "AIAccounter supabase"
5. Activate workflow ‚úÖ
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–µ–π:

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ –Ω–æ–¥—ã —Å–æ–µ–¥–∏–Ω–µ–Ω—ã:

**Main AI Agent –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:**
- ‚úÖ ai_languageModel ‚Üí OpenAI Model
- ‚úÖ ai_memory ‚Üí Main Chat Memory
- ‚úÖ ai_tool ‚Üí Income Agent
- ‚úÖ ai_tool ‚Üí Expenses Agent
- ‚úÖ ai_tool ‚Üí Create a row in income
- ‚úÖ ai_tool ‚Üí Create a row in expenses
- ‚úÖ ai_tool ‚Üí Delete a row in income
- ‚úÖ ai_tool ‚Üí Delete a row in expenses

**Income Agent –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:**
- ‚úÖ ai_languageModel ‚Üí OpenAI Model (Income)
- ‚úÖ ai_memory ‚Üí Income Chat Memory
- ‚úÖ ai_tool ‚Üí Calculator (Income)
- ‚úÖ ai_tool ‚Üí Get Income Rows
- ‚úÖ ai_vectorStore ‚Üí Income Vector Store

**Expenses Agent –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å:**
- ‚úÖ ai_languageModel ‚Üí OpenAI Model (Expenses)
- ‚úÖ ai_memory ‚Üí Expenses Chat Memory
- ‚úÖ ai_tool ‚Üí Calculator (Expenses)
- ‚úÖ ai_tool ‚Üí Get Expenses Rows
- ‚úÖ ai_vectorStore ‚Üí Expenses Vector Store

---

## üß™ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:**

### –¢–µ—Å—Ç 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–ª—É—á–∏–ª –∑–∞—Ä–ø–ª–∞—Ç—É 50000"
–û–∂–∏–¥–∞–µ—Ç—Å—è: ‚úÖ –ó–∞–ø–∏—Å–∞–ª! –î–æ—Ö–æ–¥ 50000‚ÇΩ - –ó–∞—Ä–ø–ª–∞—Ç–∞
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î: SELECT * FROM income WHERE user_id = XXX ORDER BY date DESC LIMIT 1;
```

### –¢–µ—Å—Ç 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ö—É–ø–∏–ª –ø—Ä–æ–¥—É–∫—Ç—ã 2000"
–û–∂–∏–¥–∞–µ—Ç—Å—è: ‚úÖ –ó–∞–ø–∏—Å–∞–ª! –†–∞—Å—Ö–æ–¥ 2000‚ÇΩ - –ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î: SELECT * FROM expenses WHERE user_id = XXX ORDER BY date DESC LIMIT 1;
```

### –¢–µ—Å—Ç 3: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å—Ö–æ–¥–æ–≤
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–∫–∞–∂–∏ –º–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã –∑–∞ —Å–µ–≥–æ–¥–Ω—è"
–û–∂–∏–¥–∞–µ—Ç—Å—è: 
üí∏ –†–ê–°–•–û–î–´:
üõí –ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è:
- –ü—Ä–æ–¥—É–∫—Ç—ã - 2000‚ÇΩ
–ò—Ç–æ–≥–æ: 2000‚ÇΩ
```

### –¢–µ—Å—Ç 4: –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–≥–æ–ª–æ—Å–æ–≤–æ–µ] "–ü–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ —Ç–∞–∫—Å–∏ 500"
–û–∂–∏–¥–∞–µ—Ç—Å—è: ‚úÖ –ó–∞–ø–∏—Å–∞–ª! –†–∞—Å—Ö–æ–¥ 500‚ÇΩ - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç
```

### –¢–µ—Å—Ç 5: RAG –ø–æ–∏—Å–∫
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°–∫–æ–ª—å–∫–æ —è –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ –µ–¥—É –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ?"
–û–∂–∏–¥–∞–µ—Ç—Å—è: Expenses Agent –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Vector Store –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π "–ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è"
```

---

## ‚öôÔ∏è **–ù–ê–°–¢–†–û–ô–ö–ò CREDENTIALS:**

### 1. Telegram Bot API (AIAccounter):
```
Token: –ø–æ–ª—É—á–∏ —É @BotFather
```

### 2. OpenAI API (AIAccounter):
```
API Key: sk-...
```

### 3. Supabase API (AIAccounter):
```
Host: https://xxxyyyzz.supabase.co
Service Role Key: eyJ...
```

### 4. PostgreSQL (AIAccounter supabase):
```
Host: db.xxxyyyzz.supabase.co
Port: 5432
Database: postgres
User: postgres
Password: —Ç–≤–æ–π_–ø–∞—Ä–æ–ª—å
SSL: require
```

---

## üìã **–ò–°–ü–û–õ–¨–ó–£–ï–ú–´–ï –¢–ê–ë–õ–ò–¶–´:**

### –û—Å–Ω–æ–≤–Ω—ã–µ:
- ‚úÖ `income` - –¥–æ—Ö–æ–¥—ã
- ‚úÖ `expenses` - —Ä–∞—Å—Ö–æ–¥—ã

### RAG:
- ‚úÖ `income_embeddings` - –≤–µ–∫—Ç–æ—Ä—ã –¥–æ—Ö–æ–¥–æ–≤
- ‚úÖ `expenses_embeddings` - –≤–µ–∫—Ç–æ—Ä—ã —Ä–∞—Å—Ö–æ–¥–æ–≤

### Chat History:
- ‚úÖ `n8n_chat_histories` (default table) - –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç
- ‚úÖ `n8n_chat_histories_income` - —á–∞—Ç Income Agent
- ‚úÖ `n8n_chat_histories_expenses` - —á–∞—Ç Expenses Agent
- ‚úÖ `n8n_chat_histories_general` - Helper —á–∞—Ç

### –§—É–Ω–∫—Ü–∏–∏ –ë–î:
- ‚úÖ `match_income_documents(query_embedding, match_count, filter_user_id)` - RAG –ø–æ–∏—Å–∫ –¥–æ—Ö–æ–¥–æ–≤
- ‚úÖ `match_expenses_documents(query_embedding, match_count, filter_user_id)` - RAG –ø–æ–∏—Å–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤

---

## üé® **–ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –†–ï–®–ï–ù–ò–Ø:**

### 1. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ê–≥–µ–Ω—Ç—ã:
–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ ‚Üí –¥–≤–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö:
- **Income Agent** - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –¥–æ—Ö–æ–¥–∞–º
- **Expenses Agent** - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–∞—Å—Ö–æ–¥–∞–º

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- –õ—É—á—à–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Å–≤–æ—è memory)
- –°–≤–æ—è RAG –±–∞–∑–∞
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ä–∞—Å—á–µ—Ç—ã

### 2. RAG Vector Store:
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°–∫–æ–ª—å–∫–æ —è –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã?"
‚Üí Vector Store –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π "–ü—Ä–æ–¥—É–∫—Ç—ã –ø–∏—Ç–∞–Ω–∏—è"
‚Üí Calculator —Å—É–º–º–∏—Ä—É–µ—Ç
‚Üí –û—Ç–≤–µ—Ç: "–í—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ 15,000‚ÇΩ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã"
```

### 3. –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –ü–∞–º—è—Ç—å:
- **Main Chat Memory** - –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- **Agent Chat Memory** - —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è Income/Expenses

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π:
AI —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- –î–æ—Ö–æ–¥ –∏–ª–∏ —Ä–∞—Å—Ö–æ–¥?
- –ö–∞–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è?
- –ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å?

---

## üîí **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:**

### Row Level Security (RLS):
‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `user_id`  
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ  
‚úÖ `user_id` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `message.from.id` Telegram  

### Metadata —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:
‚úÖ RAG Vector Store —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç embeddings –ø–æ `user_id`  
‚úÖ –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–æ–≥–æ  

---

## üìà **–ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:**

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `gpt-4o-mini` (–±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å)
- ‚úÖ Context window = 10 —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ–º)
- ‚úÖ RAG limit = top 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ Calculator –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤ (–Ω–µ AI)

### –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:
- –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å (–¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥): **1-2 —Å–µ–∫**
- –°–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–∞–Ω–∞–ª–∏–∑ —Å RAG): **3-5 —Å–µ–∫**
- –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: **4-6 —Å–µ–∫** (+ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è)

---

## üéâ **–ò–¢–û–ì:**

### ‚úÖ **–í–°–ï –†–ê–ë–û–¢–ê–ï–¢!**

1. ‚úÖ Ai Financer - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π, —á–∏—Å—Ç—ã–π, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
2. ‚úÖ Helper - —É–ø—Ä–æ—â–µ–Ω, –Ω–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º workflow –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω
3. ‚úÖ –í—Å–µ –Ω–æ–¥—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
4. ‚úÖ RAG Vector Store —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚úÖ Credentials –æ–±–Ω–æ–≤–ª–µ–Ω—ã
6. ‚úÖ Disabled –Ω–æ–¥—ã —É–¥–∞–ª–µ–Ω—ã
7. ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–Ω—è—Ç–Ω–∞—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è

### üöÄ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!**

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `Ai Financer.json` –∏ –Ω–∞—á–∏–Ω–∞–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å! üéä

---

**–°–æ–∑–¥–∞–Ω–æ:** 20.11.2025  
**–í–µ—Ä—Å–∏—è:** 3.0 (–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–æ)  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ

