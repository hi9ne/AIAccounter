# ü§ñ AI Tools Documentation v2.3.0

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ AI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º –¥–ª—è AnaliziFinance.json workflow.

---

## üìã –°–ü–ò–°–û–ö –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í v2.3.0

### –ù–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (6 —à—Ç—É–∫):
1. **Create_recurring_payment** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø–ª–∞—Ç–µ–∂–µ–π
2. **List_recurring_payments** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫
3. **Cancel_recurring_payment** - –æ—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
4. **Get_budget_forecast** - –ø—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞
5. **Get_notifications** - –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. **Configure_alerts** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## 1Ô∏è‚É£ Create_recurring_payment

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –ø–ª–∞—Ç–µ–∂ (–∞—Ä–µ–Ω–¥–∞, –ø–æ–¥–ø–∏—Å–∫–∏, –∑–∞—Ä–ø–ª–∞—Ç–∞)

**–¢–∏–ø:** Postgres Tool

**SQL Query:**
```sql
SELECT create_recurring_payment(
    {{ $('Telegram Bot Trigger').first().json.message.from.id }},
    '{{ $fromAI('title') }}',
    {{ $fromAI('amount', 'number') }},
    '{{ $fromAI('currency') }}',
    '{{ $fromAI('category') }}',
    '{{ $fromAI('frequency') }}',
    '{{ $fromAI('start_date') }}'::DATE,
    {{ $fromAI('description') || 'NULL' }},
    '{{ $fromAI('transaction_type') }}',
    {{ $fromAI('interval_value', 'number') || 1 }},
    {{ $fromAI('remind_days', 'number') || 3 }},
    {{ $fromAI('auto_create', 'boolean') || false }}
) as recurring_id;
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI:**
- `title` (string) - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä "Netflix Premium")
- `amount` (number) - —Å—É–º–º–∞
- `currency` (string) - –≤–∞–ª—é—Ç–∞ (KGS/USD/EUR/RUB)
- `category` (string) - –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- `frequency` (string) - —á–∞—Å—Ç–æ—Ç–∞: **daily, weekly, monthly, yearly**
- `start_date` (string) - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- `description` (string, optional) - –æ–ø–∏—Å–∞–Ω–∏–µ
- `transaction_type` (string) - —Ç–∏–ø: **expense** –∏–ª–∏ **income**
- `interval_value` (number, optional) - –∫–∞–∂–¥—ã–µ N –ø–µ—Ä–∏–æ–¥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `remind_days` (number, optional) - –∑–∞ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –Ω–∞–ø–æ–º–Ω–∏—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)
- `auto_create` (boolean, optional) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é false)

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```
‚úÖ "–î–æ–±–∞–≤—å –ø–æ–¥–ø–∏—Å–∫—É Netflix $12.99 –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü"
‚úÖ "–°–æ–∑–¥–∞–π –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –∞—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞ 15000 —Å–æ–º 1-–≥–æ —á–∏—Å–ª–∞ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞"
‚úÖ "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Spotify Premium 169 —Ä—É–±–ª–µ–π –µ–∂–µ–º–µ—Å—è—á–Ω–æ"
‚úÖ "–ó–∞—Ä–ø–ª–∞—Ç–∞ 50000 —Å–æ–º –∫–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏ —Å –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–æ–º"
‚úÖ "–ù–∞–ª–æ–≥–∏ 5000 –µ–≤—Ä–æ –∫–∞–∂–¥—ã–π –∫–≤–∞—Ä—Ç–∞–ª (–∫–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞)"
```

**AI –¥–æ–ª–∂–µ–Ω —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å:**
- –ù–∞–∑–≤–∞–Ω–∏–µ: "Netflix", "–ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞", "Spotify Premium", "–ó–∞—Ä–ø–ª–∞—Ç–∞", "–ù–∞–ª–æ–≥–∏"
- –°—É–º–º—É –∏ –≤–∞–ª—é—Ç—É
- –ß–∞—Å—Ç–æ—Ç—É: "–∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü" ‚Üí monthly, "–∫–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏" ‚Üí weekly + interval_value=2
- –ö–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- transaction_type: "–ø–æ–¥–ø–∏—Å–∫–∞/–∞—Ä–µ–Ω–¥–∞" ‚Üí expense, "–∑–∞—Ä–ø–ª–∞—Ç–∞" ‚Üí income

**–û—Ç–≤–µ—Ç AI:**
```
‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!
üìÖ Netflix Premium - $12.99 / –º–µ—Å—è—Ü
üîî –ù–∞–ø–æ–º–Ω—é –∑–∞ 3 –¥–Ω—è –¥–æ –ø–ª–∞—Ç–µ–∂–∞
üìÜ –°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞—Ç–µ–∂: 1 –¥–µ–∫–∞–±—Ä—è 2025
```

---

## 2Ô∏è‚É£ List_recurring_payments

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø–ª–∞—Ç–µ–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–¢–∏–ø:** Postgres Tool

**SQL Query:**
```sql
SELECT 
    id,
    title,
    amount,
    currency,
    category,
    frequency,
    next_payment_date,
    remind_days_before,
    auto_create,
    transaction_type
FROM recurring_payments
WHERE user_id = {{ $('Telegram Bot Trigger').first().json.message.from.id }}
    AND is_active = TRUE
ORDER BY next_payment_date ASC;
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI:** –ù–µ—Ç (–±–µ—Ä–µ—Ç user_id –∏–∑ Telegram)

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
‚úÖ "–ü–æ–∫–∞–∂–∏ –º–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏"
‚úÖ "–ö–∞–∫–∏–µ —É –º–µ–Ω—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø–ª–∞—Ç–µ–∂–∏?"
‚úÖ "–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π"
‚úÖ "–ß—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ?"
```

**–û—Ç–≤–µ—Ç AI (–ø—Ä–∏–º–µ—Ä):**
```
üìã –í–∞—à–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø–ª–∞—Ç–µ–∂–∏:

1. üí∏ –ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞ - 15,000 —Å
   üìÖ –ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü
   üìÜ –°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞—Ç–µ–∂: 1 –Ω–æ—è–±—Ä—è 2025
   
2. üí∏ Netflix Premium - $12.99
   üìÖ –ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü
   üìÜ –°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞—Ç–µ–∂: 15 –Ω–æ—è–±—Ä—è 2025
   
3. üí∞ –ó–∞—Ä–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º - 50,000 —Å
   üìÖ –ö–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏
   üìÜ –°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞—Ç–µ–∂: 5 –Ω–æ—è–±—Ä—è 2025
   ‚ö° –ê–≤—Ç–æ–ø–ª–∞—Ç–µ–∂ –≤–∫–ª—é—á–µ–Ω

üí∞ –ò—Ç–æ–≥–æ –≤ –º–µ—Å—è—Ü: ~82,500 —Å–æ–º
```

---

## 3Ô∏è‚É£ Cancel_recurring_payment

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–º–µ–Ω—è–µ—Ç (–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç) –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–π—Å—è –ø–ª–∞—Ç–µ–∂

**–¢–∏–ø:** Postgres Tool

**SQL Query:**
```sql
UPDATE recurring_payments
SET is_active = FALSE, updated_at = NOW()
WHERE id = {{ $fromAI('recurring_id', 'number') }}
    AND user_id = {{ $('Telegram Bot Trigger').first().json.message.from.id }}
RETURNING id, title, amount, currency;
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI:**
- `recurring_id` (number) - ID –ø–æ–¥–ø–∏—Å–∫–∏ (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞)

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
‚úÖ "–û—Ç–º–µ–Ω–∏ –ø–æ–¥–ø–∏—Å–∫—É Netflix"
‚úÖ "–£–¥–∞–ª–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–æ –∞—Ä–µ–Ω–¥—É"
‚úÖ "–û—Å—Ç–∞–Ω–æ–≤–∏ –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂ –Ω–æ–º–µ—Ä 3"
‚úÖ "–î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π –ø–æ–¥–ø–∏—Å–∫—É 15"
```

**AI –¥–æ–ª–∂–µ–Ω:**
- –°–Ω–∞—á–∞–ª–∞ –≤—ã–∑–≤–∞—Ç—å List_recurring_payments, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ ID –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª "–æ—Ç–º–µ–Ω–∏ Netflix" - –Ω–∞–π—Ç–∏ ID –ø–ª–∞—Ç–µ–∂–∞ —Å title —Å–æ–¥–µ—Ä–∂–∞—â–∏–º "Netflix"
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–ª –Ω–æ–º–µ—Ä "–ø–æ–¥–ø–∏—Å–∫—É 3" - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 3-–π —ç–ª–µ–º–µ–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞

**–û—Ç–≤–µ—Ç AI:**
```
‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞
‚ùå Netflix Premium ($12.99/–º–µ—Å) –±–æ–ª—å—à–µ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
üí° –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –±–æ–ª—å—à–µ –Ω–µ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å
```

---

## 4Ô∏è‚É£ Get_budget_forecast

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–∏—Ö —Ç—Ä–∞—Ç

**–¢–∏–ø:** Postgres Tool

**SQL Query:**
```sql
SELECT * FROM get_budget_forecast(
    {{ $('Telegram Bot Trigger').first().json.message.from.id }}
);
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI:** –ù–µ—Ç

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `current_spent` - —É–∂–µ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ
- `budget_amount` - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç
- `percentage_used` - –ø—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `projected_spending` - –ø—Ä–æ–≥–Ω–æ–∑ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞
- `remaining` - –æ—Å—Ç–∞—Ç–æ–∫ –±—é–¥–∂–µ—Ç–∞
- `days_remaining` - –¥–Ω–µ–π –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞
- `daily_average` - —Å—Ä–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥ –≤ –¥–µ–Ω—å
- `recommended_daily_limit` - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç
- `forecast_status` - —Å—Ç–∞—Ç—É—Å: ok, warning, critical

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
‚úÖ "–°–∫–æ–ª—å–∫–æ –º–Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞?"
‚úÖ "–ü–æ–∫–∞–∂–∏ –ø—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞"
‚úÖ "–°–∫–æ–ª—å–∫–æ —è –º–æ–≥—É —Ç—Ä–∞—Ç–∏—Ç—å –≤ –¥–µ–Ω—å?"
‚úÖ "–•–≤–∞—Ç–∏—Ç –ª–∏ –º–Ω–µ –¥–µ–Ω–µ–≥ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞?"
‚úÖ "–ö–∞–∫–æ–π –ø—Ä–æ–≥–Ω–æ–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤?"
```

**–û—Ç–≤–µ—Ç AI (–ø—Ä–∏–º–µ—Ä):**
```
üí∞ –ü—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞ –Ω–∞ –æ–∫—Ç—è–±—Ä—å 2025:

üìä –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 32,500 –∏–∑ 50,000 —Å–æ–º (65%)
üìÖ –û—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π: 7
üíµ –û—Å—Ç–∞—Ç–æ–∫: 17,500 —Å–æ–º

üìà –ü—Ä–æ–≥–Ω–æ–∑ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞: ~51,000 —Å–æ–º
‚ö†Ô∏è –û–∂–∏–¥–∞–µ—Ç—Å—è –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ –Ω–∞ 2%

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
   ‚Ä¢ –°—Ä–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥ –≤ –¥–µ–Ω—å: 1,083 —Å–æ–º
   ‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ª–∏–º–∏—Ç: 2,500 —Å–æ–º/–¥–µ–Ω—å
   ‚Ä¢ –°–æ–∫—Ä–∞—Ç–∏—Ç–µ —Ç—Ä–∞—Ç—ã –Ω–∞ 1,000 —Å–æ–º
```

**–ï—Å–ª–∏ forecast_status = 'critical':**
```
üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ï–í–´–®–ï–ù–ò–ï!
–ü—Ä–æ–≥–Ω–æ–∑: 62,000 –∏–∑ 50,000 —Å–æ–º (+24%)
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã!
```

---

## 5Ô∏è‚É£ Get_notifications

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–¢–∏–ø:** Postgres Tool

**SQL Query:**
```sql
SELECT 
    id,
    notification_type,
    title,
    message,
    priority,
    created_at,
    is_read,
    related_category
FROM notifications
WHERE user_id = {{ $('Telegram Bot Trigger').first().json.message.from.id }}
    AND is_sent = TRUE
ORDER BY 
    CASE priority
        WHEN 'urgent' THEN 1
        WHEN 'high' THEN 2
        WHEN 'normal' THEN 3
        ELSE 4
    END,
    created_at DESC
LIMIT {{ $fromAI('limit', 'number') || 10 }};
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI:**
- `limit` (number, optional) - —Å–∫–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–∫–∞–∑–∞—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)

**–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- `budget_warning` - 80% –±—é–¥–∂–µ—Ç–∞
- `budget_exceeded` - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞
- `limit_warning` - 80% –ª–∏–º–∏—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `limit_exceeded` - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
- `recurring_reminder` - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø–ª–∞—Ç–µ–∂–µ
- `unusual_spending` - –Ω–µ–æ–±—ã—á–Ω–∞—è —Ç—Ä–∞—Ç–∞
- `weekly_report` - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
- `monthly_summary` - –º–µ—Å—è—á–Ω–∞—è —Å–≤–æ–¥–∫–∞

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
‚úÖ "–ü–æ–∫–∞–∂–∏ –º–æ–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
‚úÖ "–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"
‚úÖ "–ö–∞–∫–∏–µ –∞–ª–µ—Ä—Ç—ã?"
‚úÖ "–ü–æ–∫–∞–∂–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π"
```

**–û—Ç–≤–µ—Ç AI:**
```
üîî –í–∞—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

üö® –°–†–û–ß–ù–û (—Å–µ–≥–æ–¥–Ω—è, 14:30)
   üí∞ –ë—é–¥–∂–µ—Ç –ø—Ä–µ–≤—ã—à–µ–Ω –Ω–∞ 5%
   –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 52,500 –∏–∑ 50,000 —Å–æ–º

‚ö†Ô∏è –í–ê–ñ–ù–û (–≤—á–µ—Ä–∞, 18:00)
   üí∞ –ù–µ–æ–±—ã—á–Ω–∞—è —Ç—Ä–∞—Ç–∞
   15,000 —Å–æ–º –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü—Ä–æ–¥—É–∫—Ç—ã"
   (–æ–±—ã—á–Ω–æ ~5,000 —Å–æ–º)

üîî –û–±—ã—á–Ω–æ–µ (28 –æ–∫—Ç, 20:00)
   üìä –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
   –†–∞—Å—Ö–æ–¥—ã –∑–∞ –Ω–µ–¥–µ–ª—é: 12,500 —Å–æ–º
```

---

## 6Ô∏è‚É£ Configure_alerts

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –±—é–¥–∂–µ—Ç–µ –∏ –ª–∏–º–∏—Ç–∞—Ö

**–¢–∏–ø:** Postgres Tool

**SQL Query:**
```sql
INSERT INTO budget_alerts_config (
    user_id, 
    budget_warning_threshold,
    budget_critical_threshold,
    category_warning_threshold,
    category_critical_threshold,
    max_alerts_per_day
) VALUES (
    {{ $('Telegram Bot Trigger').first().json.message.from.id }},
    {{ $fromAI('budget_warning', 'number') || 80 }},
    {{ $fromAI('budget_critical', 'number') || 100 }},
    {{ $fromAI('category_warning', 'number') || 80 }},
    {{ $fromAI('category_critical', 'number') || 100 }},
    {{ $fromAI('max_alerts', 'number') || 5 }}
)
ON CONFLICT (user_id) 
DO UPDATE SET
    budget_warning_threshold = EXCLUDED.budget_warning_threshold,
    budget_critical_threshold = EXCLUDED.budget_critical_threshold,
    category_warning_threshold = EXCLUDED.category_warning_threshold,
    category_critical_threshold = EXCLUDED.category_critical_threshold,
    max_alerts_per_day = EXCLUDED.max_alerts_per_day,
    updated_at = NOW()
RETURNING *;
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã AI:**
- `budget_warning` (number, optional) - –ø–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±—é–¥–∂–µ—Ç–∞ –≤ % (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 80)
- `budget_critical` (number, optional) - –ø–æ—Ä–æ–≥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –±—é–¥–∂–µ—Ç–∞ –≤ % (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
- `category_warning` (number, optional) - –ø–æ—Ä–æ–≥ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 80)
- `category_critical` (number, optional) - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
- `max_alerts` (number, optional) - –º–∞–∫—Å–∏–º—É–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
‚úÖ "–ù–∞—Å—Ç—Ä–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –ø—Ä–∏ 75% –±—é–¥–∂–µ—Ç–∞"
‚úÖ "–£—Å—Ç–∞–Ω–æ–≤–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ –Ω–∞ 90%"
‚úÖ "–£–≤–µ–¥–æ–º–ª—è–π –º–µ–Ω—è –ø—Ä–∏ 70% –±—é–¥–∂–µ—Ç–∞"
‚úÖ "–ù–µ –±–æ–ª—å—à–µ 3 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –¥–µ–Ω—å"
‚úÖ "–ê–ª–µ—Ä—Ç –ø—Ä–∏ 85% –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"
```

**AI –¥–æ–ª–∂–µ–Ω —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å:**
- "–ø—Ä–∏ 75%" ‚Üí budget_warning = 75
- "–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π 90%" ‚Üí budget_critical = 90
- "–Ω–µ –±–æ–ª—å—à–µ 3" ‚Üí max_alerts = 3

**–û—Ç–≤–µ—Ç AI:**
```
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω—ã!

‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: 75% –±—é–¥–∂–µ—Ç–∞
üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ: 100% –±—é–¥–∂–µ—Ç–∞
üìä –õ–∏–º–∏—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π: 80% / 100%
üîî –ú–∞–∫—Å–∏–º—É–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: 5 –≤ –¥–µ–Ω—å
```

---

## üìù SYSTEM MESSAGE –î–õ–Ø AI (–î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É)

–î–æ–±–∞–≤–∏—Ç—å –≤ System Message AnaliziFinance.json:

```markdown
## üîî –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–î–ü–ò–°–ö–ê–ú–ò –ò –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø–ú–ò (v2.3.0)

### –ü–û–í–¢–û–†–Ø–Æ–©–ò–ï–°–Ø –ü–õ–ê–¢–ï–ñ–ò:

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç –æ **–ø–æ–¥–ø–∏—Å–∫–∞—Ö, –∞—Ä–µ–Ω–¥–µ, —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö**:
- –ò—Å–ø–æ–ª—å–∑—É–π **Create_recurring_payment**
- –†–∞—Å–ø–æ–∑–Ω–∞–π —á–∞—Å—Ç–æ—Ç—É:
  * "–∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü", "–µ–∂–µ–º–µ—Å—è—á–Ω–æ" ‚Üí frequency: monthly
  * "–∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é", "–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ" ‚Üí frequency: weekly
  * "–∫–∞–∂–¥—ã–π –¥–µ–Ω—å" ‚Üí frequency: daily
  * "–∫–∞–∂–¥—ã–π –≥–æ–¥", "–µ–∂–µ–≥–æ–¥–Ω–æ" ‚Üí frequency: yearly
  * "–∫–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏" ‚Üí frequency: weekly, interval_value: 2
  * "–∫–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞", "–µ–∂–µ–∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ" ‚Üí frequency: monthly, interval_value: 3

**–ü—Ä–∏–º–µ—Ä—ã:**
- "–ü–æ–¥–ø–∏—Å–∫–∞ Netflix $12.99 –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü" 
  ‚Üí Create_recurring_payment(title="Netflix", amount=12.99, currency="USD", frequency="monthly")
  
- "–ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞ 15000 —Å–æ–º 1-–≥–æ —á–∏—Å–ª–∞"
  ‚Üí Create_recurring_payment(title="–ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞", amount=15000, frequency="monthly", start_date="2025-11-01")

**–°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫:**
- "–ü–æ–∫–∞–∂–∏ –º–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏" ‚Üí List_recurring_payments
- –í—ã–≤–µ–¥–∏ –∫—Ä–∞—Å–∏–≤–æ —Å –∏–∫–æ–Ω–∫–∞–º–∏ üìÖ üí∞ ‚ö°

**–û—Ç–º–µ–Ω–∞:**
- "–û—Ç–º–µ–Ω–∏ Netflix" ‚Üí –°–Ω–∞—á–∞–ª–∞ List_recurring_payments, –Ω–∞–π–¥–∏ ID, –ø–æ—Ç–æ–º Cancel_recurring_payment

### –ü–†–û–ì–ù–û–ó –ë–Æ–î–ñ–ï–¢–ê:

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ **–æ—Å—Ç–∞—Ç–æ–∫, –ø—Ä–æ–≥–Ω–æ–∑, "—Ö–≤–∞—Ç–∏—Ç –ª–∏ –¥–µ–Ω–µ–≥"**:
- –ò—Å–ø–æ–ª—å–∑—É–π **Get_budget_forecast**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π forecast_status:
  * 'ok' ‚Üí "–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ ‚úÖ"
  * 'warning' ‚Üí "–í–Ω–∏–º–∞–Ω–∏–µ! ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ"
  * 'critical' ‚Üí "–ö–†–ò–¢–ò–ß–ù–û! üö® –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±–æ–ª–µ–µ 10%"

**–ü—Ä–∏–º–µ—Ä—ã:**
- "–°–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞?"
  ‚Üí Get_budget_forecast + –∫—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏

- "–•–≤–∞—Ç–∏—Ç –ª–∏ –¥–µ–Ω–µ–≥?"
  ‚Üí –ü—Ä–æ–≤–µ—Ä—å projected_spending vs budget_amount

### –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø:

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç **"—á—Ç–æ –Ω–æ–≤–æ–≥–æ", "–∫–∞–∫–∏–µ –∞–ª–µ—Ä—Ç—ã"**:
- –ò—Å–ø–æ–ª—å–∑—É–π **Get_notifications**
- –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ priority: urgent ‚Üí high ‚Üí normal
- –ò—Å–ø–æ–ª—å–∑—É–π –∏–∫–æ–Ω–∫–∏:
  * üö® urgent
  * ‚ö†Ô∏è high  
  * üîî normal

### –ù–ê–°–¢–†–û–ô–ö–ê –ê–õ–ï–†–¢–û–í:

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç **–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
- –ò—Å–ø–æ–ª—å–∑—É–π **Configure_alerts**
- –†–∞—Å–ø–æ–∑–Ω–∞–π –ø—Ä–æ—Ü–µ–Ω—Ç—ã: "–ø—Ä–∏ 75%" ‚Üí 75, "–ø—Ä–∏ 80%" ‚Üí 80
- "–Ω–µ –±–æ–ª—å—à–µ N —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π" ‚Üí max_alerts: N

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê:

1. **user_id** –≤—Å–µ–≥–¥–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ Telegram: 
   `{{ $('Telegram Bot Trigger').first().json.message.from.id }}`
   
2. **–í–∞–ª—é—Ç–∞** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é KGS, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–∞

3. **–î–∞—Ç—ã** –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

4. **frequency** —Ç–æ–ª—å–∫–æ: daily, weekly, monthly, yearly

5. **transaction_type** —Ç–æ–ª—å–∫–æ: expense –∏–ª–∏ income

6. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è recurring payment –≤—ã–≤–µ–¥–∏:
   ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ
   üí∞ –°—É–º–º—É –∏ –≤–∞–ª—é—Ç—É
   üìÖ –ß–∞—Å—Ç–æ—Ç—É
   üìÜ –°–ª–µ–¥—É—é—â—É—é –¥–∞—Ç—É –ø–ª–∞—Ç–µ–∂–∞

7. –î–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞ –±—é–¥–∂–µ—Ç–∞ –ø–æ–∫–∞–∂–∏:
   - –¢–µ–∫—É—â–∏–µ —Ç—Ä–∞—Ç—ã / –±—é–¥–∂–µ—Ç (%)
   - –ü—Ä–æ–≥–Ω–æ–∑ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏
```

---

## üß™ –¢–ï–°–¢–û–í–´–ï –°–¶–ï–ù–ê–†–ò–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```
User: –î–æ–±–∞–≤—å –ø–æ–¥–ø–∏—Å–∫—É Netflix Premium $12.99 –µ–∂–µ–º–µ—Å—è—á–Ω–æ
AI: –í—ã–∑—ã–≤–∞–µ—Ç Create_recurring_payment
Bot: ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!
     üìÖ Netflix Premium - $12.99 / –º–µ—Å—è—Ü
     üîî –ù–∞–ø–æ–º–Ω—é –∑–∞ 3 –¥–Ω—è
     üìÜ –°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞—Ç–µ–∂: 1 –¥–µ–∫–∞–±—Ä—è 2025
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞
```
User: –°–∫–æ–ª—å–∫–æ –º–Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞?
AI: –í—ã–∑—ã–≤–∞–µ—Ç Get_budget_forecast
Bot: üí∞ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –æ–∫—Ç—è–±—Ä—å:
     –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 32,500 / 50,000 —Å–æ–º (65%)
     –û—Å—Ç–∞–ª–æ—Å—å: 7 –¥–Ω–µ–π
     –ü—Ä–æ–≥–Ω–æ–∑: ~51,000 —Å–æ–º (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –Ω–∞ 2%)
     
     üí° –†–µ–∫–æ–º–µ–Ω–¥—É—é —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Ç—Ä–∞—Ç—ã –Ω–∞ 1,000 —Å–æ–º
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫
```
User: –ü–æ–∫–∞–∂–∏ –º–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
AI: –í—ã–∑—ã–≤–∞–µ—Ç List_recurring_payments
Bot: üìã –í–∞—à–∏ –ø–æ–¥–ø–∏—Å–∫–∏:
     1. –ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞ - 15,000 —Å (1 –Ω–æ—è–±—Ä—è)
     2. Netflix - $12.99 (15 –Ω–æ—è–±—Ä—è)
     3. Spotify - 169 ‚ÇΩ (20 –Ω–æ—è–±—Ä—è)
     
     üí∞ –ò—Ç–æ–≥–æ: ~17,500 —Å–æ–º/–º–µ—Å—è—Ü
```

---

## üìä SUMMARY

**–ù–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:** 6  
**–ù–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:** 15+  
**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥:** 20+

**–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ AnaliziFinance.json** ‚úÖ
