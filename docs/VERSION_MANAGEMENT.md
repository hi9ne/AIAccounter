# Version Management & Cache Invalidation

## –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à

### 1. –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ

**–ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É API:**

```javascript
// –í miniapp/app.js (—Å—Ç—Ä–æ–∫–∞ ~5)
const APP_VERSION = '3.0.2'; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤–µ—Ä—Å–∏—é
```

**–ü—Ä–∏–º–µ—Ä—ã –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é:**
- –ò–∑–º–µ–Ω–∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫—ç—à–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ò–∑–º–µ–Ω–∏–ª–∏ API endpoints
- –ò–∑–º–µ–Ω–∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ –æ–±—ä–µ–∫—Ç—ã

**–ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ CSS/—Å—Ç–∏–ª—è—Ö
- –§–∏–∫—Å—ã –±–∞–≥–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç–µ/–ø–µ—Ä–µ–≤–æ–¥–∞—Ö

### 2. –î–µ–ø–ª–æ–π –Ω–∞ Cloudflare Pages

–ü–æ—Å–ª–µ push –≤ main –≤–µ—Ç–∫—É, Cloudflare Pages –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç.

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–¥–µ–ø–ª–æ–π:**
```bash
git commit --allow-empty -m "chore: force Cloudflare Pages redeploy"
git push
```

### 3. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞

**–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `localStorage.getItem('app_version')`
2. –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –∏–∑–º–µ–Ω–∏–ª–∞—Å—å ‚Üí –æ—á–∏—â–∞—é—Ç—Å—è –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –∫—ç—à–∏
3. –ù–æ–≤—ã–µ –∫—ç—à–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –≤–µ—Ä—Å–∏–∏

**–ü—Ä–∏–º–µ—Ä –∫–ª—é—á–µ–π –∫—ç—à–∞:**
```
–°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è: cache_dashboard:week:KGS
–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è:  cache_3.0.1_dashboard:week:KGS
```

**–ü—Ä–∏ —Å–º–µ–Ω–µ –≤–µ—Ä—Å–∏–∏:**
- –í—Å–µ –∫–ª—é—á–∏ –±–µ–∑ `3.0.1` —É–¥–∞–ª—è—é—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ
- –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

**–õ–æ–∫–∞–ª—å–Ω–æ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
python -m http.server 5500 --directory miniapp

# –û—Ç–∫—Ä—ã—Ç—å http://localhost:5500
# DevTools Console –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
# üöÄ AIAccounter v3.0.1 - Analytics Dashboard
```

**–ù–∞ –ø—Ä–æ–¥–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å https://aiaccounter.pages.dev
2. –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Console
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `üöÄ AIAccounter v3.0.X`
4. –ü—Ä–∏ —Å–º–µ–Ω–µ –≤–µ—Ä—Å–∏–∏ —É–≤–∏–¥–∏—Ç–µ: `üîÑ Version changed from 3.0.0 to 3.0.1`

### 5. –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –£–≤–µ–ª–∏—á—å—Ç–µ `APP_VERSION` ‚Üí –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç –æ—á–∏—Å—Ç–∫—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ

**–í—Ä—É—á–Ω—É—é (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):**
```javascript
// –í DevTools Console
localStorage.clear();
location.reload();
```

### 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–µ—Ä—Å–∏–π

**–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
üöÄ AIAccounter v3.0.1 - Analytics Dashboard
üîÑ Version changed from 3.0.0 to 3.0.1, clearing old cache...
‚úÖ Old cache cleared
```

**–ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å:**
```
üöÄ AIAccounter v3.0.1 - Analytics Dashboard
üíæ Restored from localStorage: dashboard
```

## Version History

### v3.0.1 (2025-11-20)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫—ç—à–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ dashboard
- localStorage persistence

### v3.0.0 (2025-11-15)
- Read-only analytics dashboard
- Multi-currency support
- Advanced caching system

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ `APP_VERSION` –Ω–∞ 0.0.1
2. Commit & push
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è Cloudflare Pages (~2 –º–∏–Ω—É—Ç—ã)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—Ç –æ—á–∏—Å—Ç–∫—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–µ

### –ü—Ä–æ–±–ª–µ–º–∞: Cloudflare Pages –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –§–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–¥–µ–ø–ª–æ–π
git commit --allow-empty -m "chore: force redeploy"
git push
```

### –ü—Ä–æ–±–ª–µ–º–∞: localStorage –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π:**
- –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–º–µ–Ω–µ –≤–µ—Ä—Å–∏–∏
- –£–¥–∞–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ `cache_*` –∫–ª—é—á–∏ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π
- –û—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (currency, theme, etc.)

## Best Practices

1. **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - `3.X.Y` - –º–∞–∂–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è (breaking changes)
   - `3.0.Y` - –º–∏–Ω–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è (–Ω–æ–≤—ã–µ —Ñ–∏—á–∏)
   - `3.0.0.Y` - –ø–∞—Ç—á (–±–∞–≥—Ñ–∏–∫—Å—ã)

2. **–ö–æ–≥–¥–∞ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –≤–µ—Ä—Å–∏—é:**
   - ‚úÖ –ò–∑–º–µ–Ω–∏–ª–∏ API response structure
   - ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ –∫—ç—à
   - ‚úÖ –ò–∑–º–µ–Ω–∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö
   - ‚ùå –¢–æ–ª—å–∫–æ CSS changes
   - ‚ùå –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

3. **–ö–æ–º–º–∏—Ç messages:**
   ```bash
   # –ü—Ä–∏ —Å–º–µ–Ω–µ –≤–µ—Ä—Å–∏–∏
   git commit -m "chore: bump version to 3.0.2 for cache invalidation"
   
   # –ü—Ä–∏ —Ñ–æ—Ä—Å–µ –¥–µ–ø–ª–æ—è
   git commit --allow-empty -m "chore: force Cloudflare redeploy"
   ```

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ localhost:5500
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –≤ –∫–æ–Ω—Å–æ–ª–∏
   - –û—á–∏—Å—Ç–∏—Ç–µ localStorage –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∫—ç—à–∞ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
