# ‚úÖ Template ID –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ n8n workflow

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. **Weekly Report** (–ù–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç)
- **Template ID**: `5a677b23ed6c2fe6`
- **–£–∑–µ–ª**: `Generate Weekly PDF` (—Å—Ç—Ä–æ–∫–∞ 1420)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω

### 2. **Monthly Report** (–ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á–µ—Ç)
- **Template ID**: `c1177b23eddd4e88`
- **–£–∑–µ–ª**: `Generate Monthly PDF` (—Å—Ç—Ä–æ–∫–∞ 1502)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω

### 3. **Period Report** (–û—Ç—á—ë—Ç –∑–∞ –ø–µ—Ä–∏–æ–¥)
- **Template ID**: `49c77b23ede0d4e6`
- **–£–∑–µ–ª**: `Generate_period_pdf` (—Å—Ç—Ä–æ–∫–∞ 1623)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ:

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π workflow –≤ n8n

1. –û—Ç–∫—Ä–æ–π—Ç–µ n8n
2. –ù–∞–π–¥–∏—Ç–µ workflow "AnaliziFinance"
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏ ‚Üí **Import from File**
4. –í—ã–±–µ—Ä–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `AnaliziFinance.json`
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–º–µ–Ω—É

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤—Å–µ—Ö —É–∑–ª–æ–≤ –µ—Å—Ç—å credentials:
- ‚úÖ **Supabase** (PostgreSQL)
- ‚úÖ **Telegram Bot**
- ‚úÖ **APITemplate.io** (WCFzWPXSnueTP8ef)
- ‚úÖ **OpenAI** (–¥–ª—è AI Agent)

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—ã–π –æ—Ç—á–µ—Ç

#### üìä –ù–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç:
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `"–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç"` –∏–ª–∏ `"–æ—Ç—á–µ—Ç –∑–∞ –Ω–µ–¥–µ–ª—é"`

**–û–∂–∏–¥–∞–µ—Ç—Å—è**:
- PDF —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ (Donut chart, Bar chart)
- –í–∞–ª—é—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (‚Ç∏)
- 7 –¥–Ω–µ–π –¥–∞–Ω–Ω—ã—Ö

#### üìà –ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á–µ—Ç:
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `"–º–µ—Å—è—á–Ω—ã–π –æ—Ç—á–µ—Ç"` –∏–ª–∏ `"–æ—Ç—á–µ—Ç –∑–∞ –º–µ—Å—è—Ü"`

**–û–∂–∏–¥–∞–µ—Ç—Å—è**:
- PDF —Å 3 –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ (Area, Donut, Bar)
- Budget progress bar
- Forecast —Å–µ–∫—Ü–∏—è
- –í–∞–ª—é—Ç–∞ –≤–µ–∑–¥–µ

#### üìÖ –û—Ç—á—ë—Ç –∑–∞ –ø–µ—Ä–∏–æ–¥:
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É: `"–æ—Ç—á–µ—Ç —Å 15 –ø–æ 25 –æ–∫—Ç—è–±—Ä—è"` –∏–ª–∏ `"–ø–æ–∫–∞–∂–∏ —Ä–∞—Å—Ö–æ–¥—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –¥–Ω–µ–π"`

**–û–∂–∏–¥–∞–µ—Ç—Å—è**:
- PDF —Å –ø–µ—Ä–∏–æ–¥–æ–º –¥–∞—Ç: "15.10.2025 - 25.10.2025" ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π: "11 –¥–Ω–µ–π" ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
- 3 –≥—Ä–∞—Ñ–∏–∫–∞ (Area, Donut, Bar) ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
- –ú–µ—Ç—Ä–∏–∫–∏ –≤–Ω–∏–∑—É —Å –≤–∞–ª—é—Ç–æ–π ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ö–†–ò–¢–ò–ß–ù–û**: n8n –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `_formatted` –ø–æ–ª—è –≤ APITemplate.io!

### –ü—Ä–∏–º–µ—Ä –¥–ª—è Period Report:

–ù–∞–π–¥–∏—Ç–µ —É–∑–µ–ª **"Get_period_report_data"** –∏ –¥–æ–±–∞–≤—å—Ç–µ **Function Node** –ø–æ—Å–ª–µ –Ω–µ–≥–æ:

```javascript
// Function Node: "Format Period Data"
function formatCurrency(amount, symbol = "‚Ç∏") {
  return `${amount} ${symbol}`;
}

const data = items[0].json;

// –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
const start = new Date(data.period_start);
const end = new Date(data.period_end);
const period_days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;

return [{
  json: {
    ...data,
    period_days: period_days,
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
    total_expenses_formatted: formatCurrency(data.total_expenses),
    total_income_formatted: formatCurrency(data.total_income),
    balance_formatted: formatCurrency(data.balance),
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
    avg_expense_per_day_formatted: formatCurrency(Math.round(data.total_expenses / period_days)),
    avg_income_per_day_formatted: formatCurrency(Math.round(data.total_income / period_days)),
    max_expense_formatted: formatCurrency(data.max_expense || 0),
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    category_totals: (data.category_totals || []).map(cat => ({
      ...cat,
      category_total_formatted: formatCurrency(cat.category_total)
    })),
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    all_transactions: (data.all_transactions || []).map(tx => ({
      ...tx,
      amount_formatted: formatCurrency(tx.amount)
    }))
  }
}];
```

### –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è Weekly –∏ Monthly –æ—Ç—á–µ—Ç–æ–≤

–°–º. –ø–æ–ª–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –≤ —Ñ–∞–π–ª–µ `pdf-templates/N8N_DATA_FORMAT.md`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Period Report –ø–µ—Ä–≤—ã–º (—Å–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π):

```
–í—ã: "–æ—Ç—á–µ—Ç —Å 1 –ø–æ 10 –Ω–æ—è–±—Ä—è"
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ PDF**:
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫: "01.11.2025 - 10.11.2025"
- ‚úÖ "10 –¥–Ω–µ–π"
- ‚úÖ "52 –æ–ø–µ—Ä–∞—Ü–∏–π"
- ‚úÖ –í–∞–ª—é—Ç–∞ –≤–µ–∑–¥–µ: "58900 ‚Ç∏"
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏ (Area chart)
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Donut)
- ‚úÖ –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (Bar chart)
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –≤–Ω–∏–∑—É —Å —Ü–∏—Ñ—Ä–∞–º–∏

### 2. –ó–∞—Ç–µ–º Weekly Report:

```
–í—ã: "–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç"
```

### 3. –ó–∞—Ç–µ–º Monthly Report:

```
–í—ã: "–º–µ—Å—è—á–Ω—ã–π –æ—Ç—á–µ—Ç"
```

---

## üêõ –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

### –ì—Ä–∞—Ñ–∏–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ HTML —Å–æ–¥–µ—Ä–∂–∏—Ç `<script src="apexcharts">` –≤ HEAD
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–∞—Å—Å–∏–≤—ã `daily_data`, `category_totals` –Ω–µ –ø—É—Å—Ç—ã–µ

### –í–∞–ª—é—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ Function Node –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –∏–º–µ—é—Ç `_formatted` –≤–µ—Ä—Å–∏–∏

### –ü–µ—Ä–∏–æ–¥ –¥–∞—Ç –ø—É—Å—Ç–æ–π:
- ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `{{period_start}} - {{period_end}}`

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—É—Å—Ç—ã–µ:
- ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ `_formatted` –ø–æ–ª—è

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç:

- ‚úÖ –í—Å–µ 3 Template ID –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ workflow
- ‚úÖ HTML —à–∞–±–ª–æ–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (period_start/period_end)
- ‚úÖ JSON test files —Å–æ–¥–µ—Ä–∂–∞—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
- ‚è≥ –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Function Node –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚è≥ –ù—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å workflow –≤ n8n
- ‚è≥ –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ 3 —Ç–∏–ø–∞ –æ—Ç—á–µ—Ç–æ–≤

---

**–ì–æ—Ç–æ–≤–æ!** –í—Å–µ —à–∞–±–ª–æ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
