# üîÑ Changelog - AI Accounter

## [2.4.0-hotfix] - 31.10.2025 - Telegram API Compatibility Fix üîß

**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETE  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/HOTFIX_TELEGRAM_API.md`

### üêõ Bug Fixes
- ‚úÖ **Telegram WebApp API Compatibility** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π (v6.0+)
  - Fallback –¥–ª—è `tg.showAlert()` ‚Üí `alert()`
  - Fallback –¥–ª—è `tg.MainButton` API
  - Mock Telegram WebApp –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - Fallback User ID (123456789) –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **Graceful Degradation** - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏:
  - –û–±—ã—á–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä (Chrome/Firefox/Safari)
  - Telegram Desktop/Mobile (v6.0+)
  - Telegram Web App (–≤—Å–µ –≤–µ—Ä—Å–∏–∏)
- ‚úÖ **Error Handling** - Try-catch –±–ª–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö Telegram API –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ **Logging** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ console –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### üìù Changed Files
- `miniapp/app.js` - 4 —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (~70 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
- `docs/HOTFIX_TELEGRAM_API.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è hotfix

---

## [2.4.0] - –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ - Workspaces & Analytics üë•üìä

**–°—Ç–∞—Ç—É—Å:** ÔøΩ 50% Complete (4/8 phases)  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/ROADMAP_v2.4.md`, `docs/PROGRESS_v2.4.0.md`, `docs/ANALYTICS_API_v2.4.md`  
**–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π —Ä–µ–ª–∏–∑:** Q1 2026 (–Ø–Ω–≤–∞—Ä—å-–§–µ–≤—Ä–∞–ª—å)

### üéØ –ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—á–∏ (Completed)

#### üë• Multi-tenancy & Workspaces ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ (–ª–∏—á–Ω—ã–π, —Å–µ–º–µ–π–Ω—ã–π, –±–∏–∑–Ω–µ—Å)
- ‚úÖ –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: Owner, Admin, Editor, Viewer
- ‚úÖ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ invite links
- ‚úÖ Audit log - –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ workspace
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π)

#### üìä Advanced Analytics ‚úÖ
- ‚úÖ Chart.js –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (Line, Pie, Bar charts)
- ‚úÖ –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (–¥–æ—Ö–æ–¥—ã, —Ä–∞—Å—Ö–æ–¥—ã, –±–∞–ª–∞–Ω—Å, –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è)
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫ "–î–æ—Ö–æ–¥—ã vs –†–∞—Å—Ö–æ–¥—ã"
- ‚úÖ –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ "–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"
- ‚úÖ –¢—Ä–µ–Ω–¥ –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –¢–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏
- ‚úÖ **Analytics API** - 10 endpoints –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π)
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ç—Ä–∞—Ç (recurring, anomaly, seasonal)

#### ‚öôÔ∏è User Preferences & Settings ‚úÖ
- ‚úÖ –¢–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è: Light, Dark, Auto
- ‚úÖ –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å: –†—É—Å—Å–∫–∏–π, English, –ö—ã—Ä–≥—ã–∑—á–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞–ª—é—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (Telegram, Push, Email)

### üéØ –ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—á–∏ (In Progress)

#### üìÑ Reports Generation üîÑ
- ‚è≥ PDF –æ—Ç—á—ë—Ç—ã (Puppeteer)
- ‚è≥ Excel —ç–∫—Å–ø–æ—Ä—Ç (ExcelJS)
- ‚è≥ CSV —ç–∫—Å–ø–æ—Ä—Ç
- ‚è≥ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (scheduled)
- ‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ email

#### ü§ñ ML Forecasting üîÑ
- ‚è≥ Python Flask –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å
- ‚è≥ Prophet –¥–ª—è —Å–µ–∑–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚è≥ ARIMA –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤
- ‚è≥ Confidence intervals (95%)
- ‚è≥ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 1-12 –º–µ—Å—è—Ü–µ–≤ –≤–ø–µ—Ä—ë–¥

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (7)
- ‚úÖ `workspaces` - —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- ‚úÖ `workspace_members` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å —Ä–æ–ª—è–º–∏
- ‚úÖ `workspace_invites` - –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- ‚úÖ `invite_uses` - –∏—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–π
- ‚úÖ `audit_logs` - –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ `user_preferences` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `analytics_cache` - –∫—ç—à –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ `reports` - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á—ë—Ç—ã
- ‚úÖ `ml_forecasts` - ML –ø—Ä–æ–≥–Ω–æ–∑—ã
- ‚úÖ `chart_configs` - —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
- ‚úÖ `category_analytics` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ `spending_patterns` - –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–∞—Å—Ö–æ–¥–æ–≤

#### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ `income` - –¥–æ–±–∞–≤–ª–µ–Ω `workspace_id`
- ‚úÖ `expenses` - –¥–æ–±–∞–≤–ª–µ–Ω `workspace_id`
- ‚úÖ `budgets` - –¥–æ–±–∞–≤–ª–µ–Ω `workspace_id`
- ‚úÖ `recurring_payments` - –¥–æ–±–∞–≤–ª–µ–Ω `workspace_id`
- ‚úÖ `notifications` - –¥–æ–±–∞–≤–ª–µ–Ω `workspace_id`

#### SQL —Ñ—É–Ω–∫—Ü–∏–∏ (22)
- ‚úÖ `create_workspace_with_owner()` - —Å–æ–∑–¥–∞—Ç—å workspace
- ‚úÖ `check_workspace_permission()` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ RBAC
- ‚úÖ `get_user_workspaces()` - —Å–ø–∏—Å–æ–∫ workspaces
- ‚úÖ `accept_workspace_invite()` - –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- ‚úÖ `remove_workspace_member()` - —É–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
- ‚úÖ `get_income_expense_stats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
- ‚úÖ `get_top_expense_categories()` - —Ç–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ `get_income_expense_chart_data()` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è Chart.js
- ‚úÖ `get_category_pie_chart_data()` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è pie chart
- ‚úÖ `update_analytics_cache()` - –æ–±–Ω–æ–≤–∏—Ç—å –∫—ç—à
- ‚úÖ `get_cached_analytics()` - –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
- ‚úÖ `cleanup_expired_cache()` - –æ—á–∏—Å—Ç–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫—ç—à
- ‚è≥ +10 —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è reports –∏ forecasting

### üîå API

#### Workspace Management API ‚úÖ
**–§–∞–π–ª:** `Workspace_API.json` (31 –Ω–æ–¥–∞, 15 endpoints)

Endpoints:
- ‚úÖ `POST /create_workspace` - —Å–æ–∑–¥–∞—Ç—å workspace
- ‚úÖ `POST /get_workspaces` - —Å–ø–∏—Å–æ–∫ workspaces
- ‚úÖ `POST /update_workspace` - –æ–±–Ω–æ–≤–∏—Ç—å workspace
- ‚úÖ `POST /delete_workspace` - —É–¥–∞–ª–∏—Ç—å workspace
- ‚úÖ `POST /get_members` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ workspace
- ‚úÖ `POST /create_invite` - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- ‚úÖ `POST /accept_invite` - –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- ‚úÖ `POST /remove_member` - —É–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
- ‚úÖ `POST /update_member_role` - –∏–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
- ‚úÖ `POST /check_permission` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
- ‚úÖ `POST /get_audit_logs` - –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ `POST /switch_workspace` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å workspace
- ‚úÖ `POST /get_user_preferences` - –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ `POST /update_preferences` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### Analytics API ‚úÖ
**–§–∞–π–ª:** `Analytics_API.json` (32 –Ω–æ–¥—ã, 10 endpoints)  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/ANALYTICS_API_v2.4.md`

Endpoints:
- ‚úÖ `POST /get_income_expense_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤
- ‚úÖ `POST /get_chart_data` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è Line chart (–¥–æ—Ö–æ–¥—ã vs —Ä–∞—Å—Ö–æ–¥—ã)
- ‚úÖ `POST /get_top_categories` - —Ç–æ–ø –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è Pie chart
- ‚úÖ `POST /get_category_analytics` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ `POST /get_spending_patterns` - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ç—Ä–∞—Ç
- ‚úÖ `POST /get_balance_trend` - —Ç—Ä–µ–Ω–¥ –±–∞–ª–∞–Ω—Å–∞ —Å cumulative sum
- ‚úÖ `POST /update_analytics_cache` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—ç—à
- ‚úÖ `POST /get_cached_analytics` - –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫—ç—à–∞
- ‚úÖ `POST /save_chart_config` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≥—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ `POST /get_chart_configs` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏

### üì± Mini App

#### –ù–æ–≤—ã–µ –≤–∫–ª–∞–¥–∫–∏ (4)
- ‚úÖ **üìà Analytics** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥
- ‚úÖ **üë• Team** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π
- ‚úÖ **üìÑ Reports** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ (UI –≥–æ—Ç–æ–≤, backend –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- ‚úÖ **‚öôÔ∏è Settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–í—Å–µ–≥–æ –≤–∫–ª–∞–¥–æ–∫:** 10 (–±—ã–ª–æ 6)

#### Chart.js –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ
- ‚úÖ Line Chart - –¥–æ—Ö–æ–¥—ã vs —Ä–∞—Å—Ö–æ–¥—ã (interval: day/month)
- ‚úÖ Pie Chart - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ (—Ç–æ–ø 10)
- ‚úÖ Line Chart - –¥–∏–Ω–∞–º–∏–∫–∞ –±–∞–ª–∞–Ω—Å–∞ (cumulative)
- ‚úÖ Responsive –¥–∏–∑–∞–π–Ω
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Analytics API

#### Dark Mode ‚úÖ
- ‚úÖ –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚úÖ –¢—ë–º–Ω–∞—è —Ç–µ–º–∞
- ‚úÖ Auto —Ä–µ–∂–∏–º (—Å–ª–µ–¥—É–µ—Ç –∑–∞ —Å–∏—Å—Ç–µ–º–æ–π)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚úÖ
- ‚úÖ Metrics grid (4 –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏)
- ‚úÖ Chart containers
- ‚úÖ Workspace selector
- ‚úÖ Member cards —Å role badges
- ‚úÖ Invite link generator
- ‚úÖ Audit log UI
- ‚úÖ Settings sections
- ‚úÖ Responsive tabs scrolling

### üìù –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

#### Frontend
- ‚úÖ `miniapp/index.html` (+200 —Å—Ç—Ä–æ–∫) - 4 –Ω–æ–≤—ã–µ –≤–∫–ª–∞–¥–∫–∏
- ‚úÖ `miniapp/style.css` (+550 —Å—Ç—Ä–æ–∫) - Dark Mode, –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏
- ‚úÖ `miniapp/app.js` (+750 —Å—Ç—Ä–æ–∫) - 20+ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

#### Backend
- ‚úÖ `migrations/v2.4.0_workspaces.sql` (650 —Å—Ç—Ä–æ–∫, 11 —Ñ—É–Ω–∫—Ü–∏–π)
- ‚úÖ `migrations/v2.4.0_analytics.sql` (550 —Å—Ç—Ä–æ–∫, 11 —Ñ—É–Ω–∫—Ü–∏–π)
- ‚úÖ `Workspace_API.json` (31 –Ω–æ–¥–∞)
- ‚è≥ `Analytics_API.json` (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- ‚è≥ `Report_Generator.json` (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

#### Documentation
- ‚úÖ `docs/ROADMAP_v2.4.md` - –ø–ª–∞–Ω —Ä–µ–ª–∏–∑–∞
- ‚úÖ `docs/PROGRESS_v2.4.0.md` - —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

### ü§ñ AI Tools & Workflows

#### –ù–æ–≤—ã–µ AI tools (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- ‚è≥ `Create_workspace` - —Å–æ–∑–¥–∞—Ç—å workspace —á–µ—Ä–µ–∑ AI
- ‚è≥ `Invite_member` - –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
- ‚è≥ `Get_analytics` - –ø–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- ‚è≥ `Generate_report` - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç
- ‚è≥ `Get_forecast` - –ø–æ–ª—É—á–∏—Ç—å ML –ø—Ä–æ–≥–Ω–æ–∑

#### –ù–æ–≤—ã–µ workflows (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- ‚è≥ `Analytics_Cache_Updater.json` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ (hourly)
- ‚è≥ `Report_Generator.json` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- ‚è≥ `ML_Forecast_Updater.json` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ (daily)

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ö–æ–¥:**
- SQL: 1200+ —Å—Ç—Ä–æ–∫, 22 —Ñ—É–Ω–∫—Ü–∏–∏
- JavaScript: 750+ —Å—Ç—Ä–æ–∫, 20+ —Ñ—É–Ω–∫—Ü–∏–π
- HTML: 200+ —Å—Ç—Ä–æ–∫
- CSS: 550+ —Å—Ç—Ä–æ–∫
- JSON (n8n): 31 –Ω–æ–¥–∞

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã: 7
- –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã: 5
- SQL —Ñ—É–Ω–∫—Ü–∏–∏: 22

**API:**
- Endpoints: 15 (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- –ù–æ–¥—ã n8n: 31

**UI:**
- –í–∫–ª–∞–¥–∫–∏: 10 (–±—ã–ª–æ 6)
- –ì—Ä–∞—Ñ–∏–∫–∏: 3 —Ç–∏–ø–∞
- –¢–µ–º—ã: 3 —Ä–µ–∂–∏–º–∞

### üîú –ß—Ç–æ –¥–∞–ª—å—à–µ?

**Phase 4:** Analytics API (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)  
**Phase 5:** Reports Generation (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)  
**Phase 6:** ML Forecasting Service (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)  
**Phase 7:** AI Tools & Workflows (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)  
**Phase 8:** Testing & Documentation (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 3/8 —Ñ–∞–∑ (37.5%)  
**–û—Ü–µ–Ω–∫–∞:** 6-7 –Ω–µ–¥–µ–ª—å –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

---

## [2.3.0] - 31 –æ–∫—Ç—è–±—Ä—è 2025 - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è üîî

**–°—Ç–∞—Ç—É—Å:** üü¢ Production Ready  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/RELEASE_v2.3.md`, `docs/QUICKSTART_v2.3.md`

### üéØ –ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—á–∏

#### üîî –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø–ª–∞—Ç–µ–∂–∏ (Recurring Payments)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫: Netflix, Spotify, –∞—Ä–µ–Ω–¥–∞, –Ω–∞–ª–æ–≥–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–æ—Ç—ã: daily, weekly, monthly, yearly
- ‚úÖ –ì–∏–±–∫–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã: –∫–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏, –∫–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ N –¥–Ω–µ–π –¥–æ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: "–î–æ–±–∞–≤—å –ø–æ–¥–ø–∏—Å–∫—É Netflix $12.99 –µ–∂–µ–º–µ—Å—è—á–Ω–æ"

#### üìä –ü—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã: ok, warning, critical
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: "–°–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞?"

#### üö® –£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ê–ª–µ—Ä—Ç—ã –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –±—é–¥–∂–µ—Ç–∞ (80%, 100%)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ –ª–∏–º–∏—Ç–∞–º –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –î–µ—Ç–µ–∫—Ç–æ—Ä –Ω–µ–æ–±—ã—á–Ω—ã—Ö —Ç—Ä–∞—Ç (ML-–∞–Ω–∞–ª–∏–∑)
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –¢–∏—Ö–∏–µ —á–∞—Å—ã (–Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å –Ω–æ—á—å—é)

#### üìà ML-–∞–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ç (Spending Patterns)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—ã—á–Ω—ã—Ö —Ç—Ä–∞—Ç (2œÉ –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ)
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### üóÑÔ∏è –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î

#### recurring_payments
```sql
CREATE TABLE recurring_payments (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    title VARCHAR(200) NOT NULL,
    amount NUMERIC(12,2) NOT NULL,
    currency VARCHAR(3) DEFAULT 'KGS',
    category VARCHAR(100) NOT NULL,
    frequency VARCHAR(20) NOT NULL, -- daily, weekly, monthly, yearly
    interval_value INTEGER DEFAULT 1,
    start_date DATE NOT NULL,
    next_payment_date DATE NOT NULL,
    remind_days_before INTEGER DEFAULT 3,
    auto_create BOOLEAN DEFAULT FALSE,
    is_active BOOLEAN DEFAULT TRUE
);
```

#### notifications
```sql
CREATE TABLE notifications (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    notification_type VARCHAR(50) NOT NULL, -- budget_warning, limit_exceeded, etc.
    title VARCHAR(200) NOT NULL,
    message TEXT NOT NULL,
    priority VARCHAR(20) DEFAULT 'normal', -- low, normal, high, urgent
    is_sent BOOLEAN DEFAULT FALSE,
    is_read BOOLEAN DEFAULT FALSE,
    metadata JSONB
);
```

#### budget_alerts_config
```sql
CREATE TABLE budget_alerts_config (
    user_id BIGINT PRIMARY KEY,
    budget_warning_threshold NUMERIC(5,2) DEFAULT 80.00,
    budget_critical_threshold NUMERIC(5,2) DEFAULT 100.00,
    max_alerts_per_day INTEGER DEFAULT 5,
    quiet_hours_start TIME DEFAULT '23:00',
    quiet_hours_end TIME DEFAULT '08:00'
);
```

#### spending_patterns
```sql
CREATE TABLE spending_patterns (
    user_id BIGINT NOT NULL,
    category VARCHAR(100) NOT NULL,
    avg_monthly_amount NUMERIC(12,2),
    std_deviation NUMERIC(12,2),
    unusual_threshold NUMERIC(12,2), -- avg + 2*stddev
    data_points_count INTEGER,
    UNIQUE(user_id, category)
);
```

### ‚öôÔ∏è –ù–æ–≤—ã–µ SQL —Ñ—É–Ω–∫—Ü–∏–∏

1. **create_recurring_payment()** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø–ª–∞—Ç–µ–∂–µ–π
2. **execute_recurring_payment()** - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ recurring payment
3. **get_pending_reminders()** - –ø–æ–ª—É—á–∏—Ç—å –ø–ª–∞—Ç–µ–∂–∏ —Ç—Ä–µ–±—É—é—â–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
4. **mark_reminder_sent()** - –æ—Ç–º–µ—Ç–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
5. **check_budget_alerts()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –±—é–¥–∂–µ—Ç–∞
6. **check_category_limit_alert()** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
7. **detect_unusual_spending()** - –¥–µ—Ç–µ–∫—Ç–æ—Ä –Ω–µ–æ–±—ã—á–Ω—ã—Ö —Ç—Ä–∞—Ç
8. **update_spending_patterns()** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ML-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
9. **get_budget_forecast()** - –ø—Ä–æ–≥–Ω–æ–∑ –±—é–¥–∂–µ—Ç–∞ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞

### ü§ñ –ù–æ–≤—ã–µ AI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

1. **Create_recurring_payment** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ AI
2. **List_recurring_payments** - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏
3. **Cancel_recurring_payment** - –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
4. **Get_budget_forecast** - –ø—Ä–æ–≥–Ω–æ–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤
5. **Get_notifications** - –ø–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
6. **Configure_alerts** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –∞–ª–µ—Ä—Ç–æ–≤

### üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
User: –î–æ–±–∞–≤—å –ø–æ–¥–ø–∏—Å–∫—É Netflix $12.99 –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü
Bot: ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!
     üìÖ Netflix - $12.99 / –º–µ—Å—è—Ü
     üîî –ù–∞–ø–æ–º–Ω—é –∑–∞ 3 –¥–Ω—è
     üìÜ –°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞—Ç–µ–∂: 1 –¥–µ–∫–∞–±—Ä—è 2025

User: –°–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞?
Bot: üí∞ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –æ–∫—Ç—è–±—Ä—å:
     –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: 32,500 / 50,000 —Å–æ–º (65%)
     –û—Å—Ç–∞–ª–æ—Å—å: 7 –¥–Ω–µ–π
     üìà –ü—Ä–æ–≥–Ω–æ–∑: ~51,000 —Å–æ–º (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ 2%)
     üí° –†–µ–∫–æ–º–µ–Ω–¥—É—é —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Ç—Ä–∞—Ç—ã –Ω–∞ 1,000 —Å–æ–º

User: –ü–æ–∫–∞–∂–∏ –º–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
Bot: üìã –í–∞—à–∏ –ø–æ–¥–ø–∏—Å–∫–∏:
     1. –ê—Ä–µ–Ω–¥–∞ –æ—Ñ–∏—Å–∞ - 15,000 —Å (1 –Ω–æ—è–±—Ä—è)
     2. Netflix - $12.99 (15 –Ω–æ—è–±—Ä—è)
     3. Spotify - 169 ‚ÇΩ (20 –Ω–æ—è–±—Ä—è)
     üí∞ –ò—Ç–æ–≥–æ: ~17,500 —Å–æ–º/–º–µ—Å—è—Ü

User: –ù–∞—Å—Ç—Ä–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –ø—Ä–∏ 75%
Bot: ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!
     ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ 75% –±—é–¥–∂–µ—Ç–∞
     üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏ 100%
```

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `migrations/add_notifications_recurring_v2.3.sql`
- 4 –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- 9 SQL —Ñ—É–Ω–∫—Ü–∏–π
- 14+ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (CHECK constraints)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/AI_TOOLS_v2.3.md`
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö 6 AI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –¥–ª—è AI
- –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

**N8N Workflows (–ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è):**
- Recurring_Payments_Checker.json - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ 09:00)
- Budget_Alert_Checker.json - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—é–¥–∂–µ—Ç–æ–≤ (–∫–∞–∂–¥—ã–π —á–∞—Å)
- Spending_Pattern_Analyzer.json - ML-–∞–Ω–∞–ª–∏–∑ (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)

### üìà –ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–ª–∏–∑–∞

- **–ù–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –ë–î:** 4
- **SQL —Ñ—É–Ω–∫—Ü–∏–π:** 9
- **AI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:** 6 (–≤—Å–µ–≥–æ —Å—Ç–∞–Ω–µ—Ç 16)
- **–ò–Ω–¥–µ–∫—Å–æ–≤:** 14+
- **–°—Ç—Ä–æ–∫ SQL –∫–æ–¥–∞:** 1200+
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥:** 20+

### üöÄ Roadmap

- [ ] n8n workflows –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Mini App (–≤–∫–ª–∞–¥–∫–∏ –ü–æ–¥–ø–∏—Å–∫–∏, –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ë—é–¥–∂–µ—Ç)
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram Bot API
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## [2.2.0] - 30 –æ–∫—Ç—è–±—Ä—è 2025 - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

### üéØ –ì–ª–∞–≤–Ω–∞—è —Ñ–∏—á–∞: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

#### ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª—é–±—ã—Ö –ø–æ–ª–µ–π: —Å—É–º–º–∞, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –æ–ø–∏—Å–∞–Ω–∏–µ, –¥–∞—Ç–∞, –≤–∞–ª—é—Ç–∞
- ‚úÖ –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ ID –∏–ª–∏ —Å–ª–æ–≤—É "last"
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: "–ò–∑–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥ –Ω–∞ 1500", "–ü–æ–º–µ–Ω—è–π –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ 15 –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã"
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∞—É–¥–∏—Ç-–∂—É—Ä–Ω–∞–ª–µ

#### üóëÔ∏è –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∏–∑ –ë–î
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: "–£–¥–∞–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥", "–£–¥–∞–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –Ω–æ–º–µ—Ä 25"
- ‚úÖ –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

#### üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: "–í–µ—Ä–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é —É–¥–∞–ª—ë–Ω–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é", "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—Ö–æ–¥ 12"
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –º–µ—Ç–∫–∏ deleted_at

#### üìú –ê—É–¥–∏—Ç –∏ –∏—Å—Ç–æ—Ä–∏—è
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ: —Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: "–ü–æ–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ 15", "–ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞"
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—Å—è: –∫–∞–∫–æ–µ –ø–æ–ª–µ –∏–∑–º–µ–Ω–µ–Ω–æ, —Å—Ç–∞—Ä–æ–µ/–Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫—Ç–æ –∏ –∫–æ–≥–¥–∞

### üóÑÔ∏è –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ transaction_history
```sql
CREATE TABLE transaction_history (
    id SERIAL PRIMARY KEY,
    transaction_type VARCHAR(10) NOT NULL,
    transaction_id INTEGER NOT NULL,
    action VARCHAR(20) NOT NULL,
    field_changed VARCHAR(50),
    old_value TEXT,
    new_value TEXT,
    changed_by BIGINT NOT NULL,
    changed_at TIMESTAMP DEFAULT NOW(),
    details JSONB
);
```

#### Soft Delete Pattern
```sql
-- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–æ–ª–±—Ü—ã –≤ expenses –∏ income
ALTER TABLE expenses ADD COLUMN deleted_at TIMESTAMP;
ALTER TABLE expenses ADD COLUMN deleted_by BIGINT;
ALTER TABLE income ADD COLUMN deleted_at TIMESTAMP;
ALTER TABLE income ADD COLUMN deleted_by BIGINT;
```

#### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```sql
CREATE VIEW v_active_expenses AS
SELECT * FROM expenses WHERE deleted_at IS NULL;

CREATE VIEW v_active_income AS
SELECT * FROM income WHERE deleted_at IS NULL;
```

#### SQL –§—É–Ω–∫—Ü–∏–∏
```sql
-- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
CREATE FUNCTION log_transaction_change(
    p_transaction_type VARCHAR(10),
    p_transaction_id INTEGER,
    p_action VARCHAR(20),
    p_field_changed VARCHAR(50),
    p_old_value TEXT,
    p_new_value TEXT,
    p_changed_by BIGINT
) RETURNS INTEGER;

-- –ü–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
CREATE FUNCTION get_last_transaction(
    p_user_id BIGINT,
    p_type VARCHAR(10)
) RETURNS INTEGER;

-- –ü–æ–∏—Å–∫ –ø–æ —Å—É–º–º–µ
CREATE FUNCTION find_transaction_by_amount(
    p_user_id BIGINT,
    p_amount NUMERIC,
    p_type VARCHAR(10)
) RETURNS INTEGER;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
CREATE FUNCTION transaction_exists(
    p_id INTEGER,
    p_type VARCHAR(10),
    p_user_id BIGINT
) RETURNS BOOLEAN;
```

### ü§ñ –ù–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã AI Agent

**Edit_transaction** (Postgres Tool)
```sql
-- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
UPDATE expenses SET 
  amount = CASE WHEN field='amount' THEN new_value::NUMERIC ELSE amount END,
  category = CASE WHEN field='category' THEN new_value ELSE category END,
  description = CASE WHEN field='description' THEN new_value ELSE description END,
  date = CASE WHEN field='date' THEN new_value::TIMESTAMP ELSE date END,
  currency = CASE WHEN field='currency' THEN new_value ELSE currency END
WHERE id = found_transaction_id AND deleted_at IS NULL
```

**Delete_transaction** (Postgres Tool)
```sql
-- –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
UPDATE expenses 
SET deleted_at = NOW(), deleted_by = user_id
WHERE id = transaction_id AND deleted_at IS NULL
```

**Restore_transaction** (Postgres Tool)
```sql
-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
UPDATE expenses 
SET deleted_at = NULL, deleted_by = NULL
WHERE id = transaction_id AND deleted_at IS NOT NULL
```

**Get_transaction_history** (Postgres Tool)
```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
SELECT 
  action, field_changed, old_value, new_value, 
  changed_at, details
FROM transaction_history
WHERE transaction_id = id AND transaction_type = type
ORDER BY changed_at DESC
LIMIT 50
```

### üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
‚úÖ "–ò–∑–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥ –Ω–∞ 1500 —Å–æ–º"
   ‚Üí ‚úèÔ∏è –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∞: —Å—É–º–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ 1,500 KGS

‚úÖ "–ü–æ–º–µ–Ω—è–π –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ 15 –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç"
   ‚Üí ‚úèÔ∏è –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∞: –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ '—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç'

‚úÖ "–£–¥–∞–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥"
   ‚Üí üóëÔ∏è –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞ (–º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å)

‚úÖ "–ü–æ–∫–∞–∂–∏ –≤—Å–µ —Ä–∞—Å—Ö–æ–¥—ã –∑–∞ –æ–∫—Ç—è–±—Ä—å"
   ‚Üí üìä (—É–¥–∞–ª—ë–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è)

‚úÖ "–í–µ—Ä–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é —É–¥–∞–ª—ë–Ω–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é"
   ‚Üí üîÑ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

‚úÖ "–ü–æ–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ 15"
   ‚Üí üìú –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:
      30.10.2025 12:00 - –°–æ–∑–¥–∞–Ω–∞ (—Å—É–º–º–∞: 500 KGS)
      30.10.2025 12:15 - –ò–∑–º–µ–Ω–µ–Ω–∞ —Å—É–º–º–∞: 500 ‚Üí 750 KGS
      30.10.2025 12:30 - –£–¥–∞–ª–µ–Ω–∞
      30.10.2025 12:45 - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
```

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –§–∞–π–ª: migrations/add_transaction_management.sql
- –¢–∞–±–ª–∏—Ü–∞ transaction_history (10 –ø–æ–ª–µ–π)
- –°—Ç–æ–ª–±—Ü—ã deleted_at, deleted_by –≤ expenses/income
- 4 SQL —Ñ—É–Ω–∫—Ü–∏–∏
- 2 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (v_active_expenses, v_active_income)
- 5 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AI Agent
```javascript
// AnaliziFinance.json
+ Edit_transaction (Postgres Tool)
+ Delete_transaction (Postgres Tool)
+ Restore_transaction (Postgres Tool)
+ Get_transaction_history (Postgres Tool)
+ –û–±–Ω–æ–≤–ª—ë–Ω System Message —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
+ –î–æ–±–∞–≤–ª–µ–Ω—ã 4 –Ω–æ–≤—ã—Ö ai_tool connections
```

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ deleted_at –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ transaction_history –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
- View –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∏–∑ –≤—ã–±–æ—Ä–æ–∫

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Soft delete: –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º
- –ê—É–¥–∏—Ç: –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫—Ç–æ, —á—Ç–æ –∏ –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏–ª

### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**Test Suite:**
- [ ] –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] –¢–µ—Å—Ç 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É–º–º—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] –¢–µ—Å—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —É–¥–∞–ª—ë–Ω–Ω–∞—è –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
- [ ] –¢–µ—Å—Ç 5: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] –¢–µ—Å—Ç 6: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –¢–µ—Å—Ç 7: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ ID
- [ ] –¢–µ—Å—Ç 8: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ ID

### üìö –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚ûï `v2.2_SUMMARY.md` - –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é
- ‚ûï `migrations/add_transaction_management.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è

---

# Changelog

## [2.2.0] - 2025-10-30

### Added
- ‚úèÔ∏è **Transaction Management**: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üìú **Audit Log**: –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ `transaction_history`
- üîç **Smart Search**: —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ —Ç–∏–ø—É
- üóëÔ∏è **Soft Delete**: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### Fixed
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `get_last_transaction()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç INTEGER –≤–º–µ—Å—Ç–æ TABLE
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫: `user_id` –≤–º–µ—Å—Ç–æ `telegram_user_id`
- ‚úÖ User ID –±–µ—Ä—ë—Ç—Å—è –∏–∑ Telegram —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 'last' —á–µ—Ä–µ–∑ NULLIF –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ CAST
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã: TO_TIMESTAMP –≤–º–µ—Å—Ç–æ ::TIMESTAMP
- ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π SELECT –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç row_to_json() –≤–º–µ—Å—Ç–æ *

### Database
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `transaction_history` (8 –ø–æ–ª–µ–π)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–ª–æ–Ω–∫–∏ `deleted_at`, `deleted_by` –≤ `expenses` –∏ `income`
- 4 –Ω–æ–≤—ã—Ö SQL —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

### AI Tools
- `Edit_transaction` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `Delete_transaction` - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- `Restore_transaction` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö
- `Get_transaction_history` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Tested
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É–º–º—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞
- ‚úÖ –§—É–Ω–∫—Ü–∏—è get_last_transaction() —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ transaction_history

---

## [2.1.0] - 2025-10-29

### üéØ –ì–ª–∞–≤–Ω–∞—è —Ñ–∏—á–∞: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç

#### üí± –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É KGS, USD, EUR, RUB
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 10:00
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã: "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π 1000 —Å–æ–º –≤ –¥–æ–ª–ª–∞—Ä—ã", "–ö–∞–∫–æ–π –∫—É—Ä—Å –µ–≤—Ä–æ?"
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ª—é–±–æ–π –≤–∞–ª—é—Ç–µ: "–ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö"
- ‚úÖ –ö—Ä–æ—Å—Å-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: EUR‚ÜíRUB, USD‚ÜíEUR –∏ —Ç.–¥.

#### üóÑÔ∏è –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
-- –¢–∞–±–ª–∏—Ü–∞ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
CREATE TABLE exchange_rates (
    id SERIAL PRIMARY KEY,
    date DATE NOT NULL,
    from_currency VARCHAR(3) NOT NULL,
    to_currency VARCHAR(3) NOT NULL,
    rate NUMERIC(10, 6) NOT NULL,
    source VARCHAR(50) DEFAULT 'exchangerate-api.com',
    UNIQUE(date, from_currency, to_currency)
);

-- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞
CREATE FUNCTION get_exchange_rate(
    p_from VARCHAR(3),
    p_to VARCHAR(3),
    p_date DATE DEFAULT CURRENT_DATE
) RETURNS NUMERIC;

-- –§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
CREATE FUNCTION convert_amount(
    p_amount NUMERIC,
    p_from VARCHAR(3),
    p_to VARCHAR(3),
    p_date DATE DEFAULT CURRENT_DATE
) RETURNS NUMERIC;

-- View –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
CREATE VIEW v_latest_rates AS
SELECT * FROM exchange_rates 
WHERE date = (SELECT MAX(date) FROM exchange_rates);
```

#### ü§ñ –ù–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã AI Agent

**Convert_currency** (Postgres Tool)
```sql
-- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—É–º–º—ã —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫—É—Ä—Å–æ–º
SELECT 
    {{ $fromAI("amount") }} as original_amount,
    UPPER('{{ $fromAI("from_currency") }}') as from_currency,
    UPPER('{{ $fromAI("to_currency") }}') as to_currency,
    get_exchange_rate(...) as rate,
    convert_amount(...) as converted_amount
```

**Get_exchange_rates** (Postgres Tool)
```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤
SELECT 
    from_currency,
    to_currency,
    rate,
    date
FROM v_latest_rates
ORDER BY from_currency, to_currency;
```

#### üîÑ –ù–æ–≤—ã–π workflow: ExchangeRates_Daily

**Cron Schedule:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 10:00 (Asia/Bishkek)

**Workflow:**
1. HTTP Request ‚Üí ExchangeRate-API
2. JavaScript ‚Üí –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
3. Postgres ‚Üí INSERT —Å ON CONFLICT DO UPDATE
4. Telegram ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** https://api.exchangerate-api.com/v4/latest/KGS

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä—ã:** 16+ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π (KGS‚ÜîUSD, KGS‚ÜîEUR, KGS‚ÜîRUB, USD‚ÜîEUR –∏ —Ç.–¥.)

### üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ö–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```
‚úÖ "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π 1000 —Å–æ–º –≤ –¥–æ–ª–ª–∞—Ä—ã"
   ‚Üí üí± 1,000 KGS = 11.50 USD (–ø–æ –∫—É—Ä—Å—É 87.00)

‚úÖ "–ö–∞–∫–æ–π –∫—É—Ä—Å –µ–≤—Ä–æ?"
   ‚Üí üí± 1 EUR = 94.50 KGS

‚úÖ "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 100 –¥–æ–ª–ª–∞—Ä–æ–≤ –≤ —Å–æ–º–∞—Ö?"
   ‚Üí üí± 100 USD = 8,700 KGS

‚úÖ "–ü–µ—Ä–µ–≤–µ–¥–∏ 50 –µ–≤—Ä–æ –≤ —Ä—É–±–ª–∏"
   ‚Üí üí± 50 EUR = 5,225 RUB (–ø–æ –∫—É—Ä—Å—É 104.50)

‚úÖ "–ü–æ–∫–∞–∂–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö"
   ‚Üí üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –æ–∫—Ç—è–±—Ä—å 2025 (–≤ USD):
      üí∏ –†–∞—Å—Ö–æ–¥—ã: 316.23 USD
      üí∞ –î–æ—Ö–æ–¥—ã: 1,179.46 USD
      üìà –ü—Ä–∏–±—ã–ª—å: 863.23 USD

‚úÖ "–í—Å–µ –∫—É—Ä—Å—ã"
   ‚Üí üí± –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –Ω–∞ 30.10.2025:
      KGS ‚Üí USD: 0.0115
      USD ‚Üí KGS: 87.00
      ...
```

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –§–∞–π–ª: migrations/add_exchange_rates.sql
- –¢–∞–±–ª–∏—Ü–∞ exchange_rates (6 –ø–æ–ª–µ–π)
- –§—É–Ω–∫—Ü–∏–∏ get_exchange_rate() –∏ convert_amount()
- View v_latest_rates –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –¢—Ä–∏–≥–≥–µ—Ä auto_create_reverse_rate (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±—Ä–∞—Ç–Ω—ã–µ –∫—É—Ä—Å—ã)
- –ù–∞—á–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã (12+ –∑–∞–ø–∏—Å–µ–π)
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ AI Agent
```javascript
// AnaliziFinance.json
+ Convert_currency (Postgres Tool)
+ Get_exchange_rates (Postgres Tool)
+ –û–±–Ω–æ–≤–ª—ë–Ω System Message —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
+ –î–æ–±–∞–≤–ª–µ–Ω—ã ai_tool connections
```

### üìö –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚ûï `docs/CURRENCY_CONVERSION.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ûï `ROADMAP_v2.1.md` - –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚ûï `UPGRADE_TO_2.1.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å v2.0
- ‚ûï `migrations/add_exchange_rates.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –æ—à–∏–±–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ psql –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SQL)
- –£–ª—É—á—à–µ–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –∫—É—Ä—Å–æ–≤
- –£–ª—É—á—à–µ–Ω–æ: –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–∞–ª—é—Ç –ø–µ—Ä–µ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- View `v_latest_rates` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∫—É—Ä—Å–∞–º
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ (date, from_currency, to_currency) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤ –ë–î (–Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º API –∫–∞–∂–¥—ã–π —Ä–∞–∑)

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ON CONFLICT DO UPDATE –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–∞–ª—é—Ç —á–µ—Ä–µ–∑ CHECK constraints
- Rate limiting –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ (1 —Ä–∞–∑ –≤ –¥–µ–Ω—å)

### üìä –ú–∏–≥—Ä–∞—Ü–∏—è —Å v2.0

**–í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** ~20 –º–∏–Ω—É—Ç

**–®–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `migrations/add_exchange_rates.sql` –≤ Supabase
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `ExchangeRates_Daily.json` –≤ n8n
3. –û–±–Ω–æ–≤–∏—Ç–µ `AnaliziFinance.json` –≤ n8n
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ 6 –∫–æ–º–∞–Ω–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** –°–º. `UPGRADE_TO_2.1.md`

### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

**Test Suite:**
- [ ] –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É—Ä—Å–æ–≤ ("–ö–∞–∫–æ–π –∫—É—Ä—Å –¥–æ–ª–ª–∞—Ä–∞?")
- [ ] –¢–µ—Å—Ç 2: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ("–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π 1000 —Å–æ–º –≤ –¥–æ–ª–ª–∞—Ä—ã")
- [ ] –¢–µ—Å—Ç 3: –û–±—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ("100 –¥–æ–ª–ª–∞—Ä–æ–≤ –≤ —Å–æ–º—ã")
- [ ] –¢–µ—Å—Ç 4: –ö—Ä–æ—Å—Å-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ("50 –µ–≤—Ä–æ –≤ —Ä—É–±–ª–∏")
- [ ] –¢–µ—Å—Ç 5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –≤–∞–ª—é—Ç–µ ("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö")
- [ ] –¢–µ—Å—Ç 6: –í—Å–µ –∫—É—Ä—Å—ã ("–í—Å–µ –∫—É—Ä—Å—ã")

---

## [2.0.0] - 28 —è–Ω–≤–∞—Ä—è 2025 - –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å –∏ —É–ª—É—á—à–µ–Ω–∏—è

#### –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å
- üí± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 –≤–∞–ª—é—Ç: KGS (—Å–æ–º), USD, EUR, RUB
- üè¶ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –≤–∞–ª—é—Ç—ã
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å —É—á—ë—Ç–æ–º –≤–∞–ª—é—Ç—ã
- üìã –ò—Å—Ç–æ—Ä–∏—è —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤–∞–ª—é—Ç—ã –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ 6 –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤:
  - –ö–∞—Ñ–µ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã
  - –ú–µ–¥–∏—Ü–∏–Ω–∞
  - –û–¥–µ–∂–¥–∞
  - –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
  - –•–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
  - –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
  - –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ 2 –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Ö–æ–¥–æ–≤:
  - –§—Ä–∏–ª–∞–Ω—Å
  - –ê—Ä–µ–Ω–¥–∞ –∏–º—É—â–µ—Å—Ç–≤–∞

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- üîó –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ü§ñ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Telegram Bot (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

#### UI/UX —É–ª—É—á—à–µ–Ω–∏—è
- üì± –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- üåô –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã Telegram
- üìÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üí´ –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å —Å–∏–º–≤–æ–ª–æ–º –≤–∞–ª—é—Ç—ã

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```javascript
// –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
{
    type: 'income' | 'expense',
    amount: number,
    currency: 'KGS' | 'USD' | 'EUR' | 'RUB',
    category: string,
    description: string,
    date: string,
    time: string,
    telegram_user_id: number
}
```

#### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `updateCurrencyDisplay()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞–ª—é—Ç—ã
- `sendToSupabase()` - –ø—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Supabase
- `resetForm()` - —Å–±—Ä–æ—Å —Ñ–æ—Ä–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –≤–∞–ª—é—Ç—ã

#### API –∏–∑–º–µ–Ω–µ–Ω–∏—è
```javascript
// –î–ª—è —Ä–µ–∂–∏–º–∞ Supabase
POST /rest/v1/expenses
POST /rest/v1/income

Headers:
- apikey: SUPABASE_ANON_KEY
- Authorization: Bearer SUPABASE_ANON_KEY
- Content-Type: application/json

Body:
{
    "amount": 1000,
    "currency": "KGS",
    "category": "–ü—Ä–æ–¥—É–∫—Ç—ã",
    "description": "–ü–æ–∫—É–ø–∫–∞ –≤ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–µ",
    "date": "2025-01-28T14:30:00",
    "telegram_user_id": 123456789
}
```

### üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢—Ä–µ–±—É–µ–º–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```sql
-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è currency
ALTER TABLE expenses ADD COLUMN IF NOT EXISTS currency VARCHAR(3) DEFAULT 'KGS' NOT NULL;
ALTER TABLE income ADD COLUMN IF NOT EXISTS currency VARCHAR(3) DEFAULT 'KGS' NOT NULL;

-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
ALTER TABLE expenses ADD CONSTRAINT expenses_currency_check 
CHECK (currency IN ('KGS', 'USD', 'EUR', 'RUB'));

ALTER TABLE income ADD CONSTRAINT income_currency_check 
CHECK (currency IN ('KGS', 'USD', 'EUR', 'RUB'));

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX IF NOT EXISTS idx_expenses_currency ON expenses(currency);
CREATE INDEX IF NOT EXISTS idx_income_currency ON income(currency);
```

### üìù –ú–∏–≥—Ä–∞—Ü–∏—è —Å –≤–µ—Ä—Å–∏–∏ 1.x

1. **–û–±–Ω–æ–≤–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ migrations/add_currency_field.sql
psql -h your-supabase-host -U postgres -d postgres -f migrations/add_currency_field.sql
```

2. **–û–±–Ω–æ–≤–∏—Ç–µ n8n workflow:**
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `AnaliziFinance.json`
- –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é Add_expense –∏ Add_income –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

3. **–û–±–Ω–æ–≤–∏—Ç–µ Mini App:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `TelegramMiniApp.html` –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
- –°–æ–∑–¥–∞–π—Ç–µ `miniapp-config.js` –∏–∑ `miniapp-config.example.js`
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
```javascript
// –°—Ç–∞—Ä—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–µ–∑ currency –±—É–¥—É—Ç –∏–º–µ—Ç—å 'KGS' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
SELECT * FROM expenses WHERE currency IS NULL;
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —Ñ–æ—Ä–º–∞ –Ω–µ –æ—á–∏—â–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–ª–∞—Å—å
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –≤—Ä–µ–º—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ ‚ÇΩ –≤–º–µ—Å—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–ª—é—Ç—ã
- –£–ª—É—á—à–µ–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö
- –£–ª—É—á—à–µ–Ω–æ: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—É—Å—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ HTML (—Å–∂–∞—Ç–∏–µ CSS)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: lazy loading –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ telegram_user_id
- –£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π (—á–µ—Ä–µ–∑ Supabase RLS)

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω `MINIAPP_SETUP.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω `miniapp-config.example.js` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω `CHANGELOG.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª
- üîÑ –û–±–Ω–æ–≤–ª—ë–Ω `README.md` - —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏

---

## [1.0.0] - –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤
- –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot

---

## üîÆ –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ (v2.2+)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã v2.2
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (soft delete)
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] –ë—é–¥–∂–µ—Ç—ã –ø–æ –≤–∞–ª—é—Ç–∞–º —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- [ ] –ü—Ä–æ–≥–Ω–æ–∑ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç (ML)

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [ ] PDF –æ—Ç—á—ë—Ç—ã —Å –±—Ä–µ–Ω–¥–∏–Ω–≥–æ–º
- [ ] Recurring transactions (–ø–æ–¥–ø–∏—Å–∫–∏)
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞ (–∫–æ—à–µ–ª—å–∫–∏)
- [ ] –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ (–∫–∞—Å—Ç–æ–º–Ω–∞—è)
- [ ] –í–∏–¥–∂–µ—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### –ò–¥–µ–∏
- [ ] –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] QR-—Å–∫–∞–Ω–µ—Ä —á–µ–∫–æ–≤
- [ ] OCR –¥–ª—è —á–µ–∫–æ–≤
- [ ] –ò–º–ø–æ—Ä—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–æ–∫
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ 1C
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM
- [ ] –ú—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º (—Å–µ–º—å—è/–∫–æ–º–∞–Ω–¥–∞)
- [ ] –¶–µ–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
- [ ] –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç

---

**üìÖ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**üè∑Ô∏è –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 2.2.0  
**üë®‚Äçüíª –ê–≤—Ç–æ—Ä:** AI Accounter Team
