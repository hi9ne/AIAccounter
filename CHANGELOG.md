# üîÑ Changelog - Telegram Mini App

## [2.0.0] - –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å –∏ —É–ª—É—á—à–µ–Ω–∏—è

### ‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å
- üí± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 –≤–∞–ª—é—Ç: KGS (—Å–æ–º), USD, EUR, RUB
- üè¶ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –≤–∞–ª—é—Ç—ã
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å —É—á—ë—Ç–æ–º –≤–∞–ª—é—Ç—ã
- üìã –ò—Å—Ç–æ—Ä–∏—è —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤–∞–ª—é—Ç—ã –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ 6 –Ω–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ä–∞—Å—Ö–æ–¥–æ–≤:
  - –ö–∞—Ñ–µ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã
  - –ú–µ–¥–∏—Ü–∏–Ω–∞
  - –û–¥–µ–∂–¥–∞
  - –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
  - –•–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
  - –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
  - –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ 2 –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Ö–æ–¥–æ–≤:
  - –§—Ä–∏–ª–∞–Ω—Å
  - –ê—Ä–µ–Ω–¥–∞ –∏–º—É—â–µ—Å—Ç–≤–∞

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- üîó –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ü§ñ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Telegram Bot (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

#### UI/UX —É–ª—É—á—à–µ–Ω–∏—è
- üì± –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- üåô –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã Telegram
- üìÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üí´ –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å —Å–∏–º–≤–æ–ª–æ–º –≤–∞–ª—é—Ç—ã

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```javascript
// –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
{
    type: 'income' | 'expense',
    amount: number,
    currency: 'KGS' | 'USD' | 'EUR' | 'RUB',
    category: string,
    description: string,
    date: string,
    time: string,
    telegram_user_id: number
}
```

#### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `updateCurrencyDisplay()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞–ª—é—Ç—ã
- `sendToSupabase()` - –ø—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Supabase
- `resetForm()` - —Å–±—Ä–æ—Å —Ñ–æ—Ä–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –≤–∞–ª—é—Ç—ã

#### API –∏–∑–º–µ–Ω–µ–Ω–∏—è
```javascript
// –î–ª—è —Ä–µ–∂–∏–º–∞ Supabase
POST /rest/v1/expenses
POST /rest/v1/income

Headers:
- apikey: SUPABASE_ANON_KEY
- Authorization: Bearer SUPABASE_ANON_KEY
- Content-Type: application/json

Body:
{
    "amount": 1000,
    "currency": "KGS",
    "category": "–ü—Ä–æ–¥—É–∫—Ç—ã",
    "description": "–ü–æ–∫—É–ø–∫–∞ –≤ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–µ",
    "date": "2025-01-28T14:30:00",
    "telegram_user_id": 123456789
}
```

### üóÉÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢—Ä–µ–±—É–µ–º–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```sql
-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è currency
ALTER TABLE expenses ADD COLUMN IF NOT EXISTS currency VARCHAR(3) DEFAULT 'KGS' NOT NULL;
ALTER TABLE income ADD COLUMN IF NOT EXISTS currency VARCHAR(3) DEFAULT 'KGS' NOT NULL;

-- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
ALTER TABLE expenses ADD CONSTRAINT expenses_currency_check 
CHECK (currency IN ('KGS', 'USD', 'EUR', 'RUB'));

ALTER TABLE income ADD CONSTRAINT income_currency_check 
CHECK (currency IN ('KGS', 'USD', 'EUR', 'RUB'));

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX IF NOT EXISTS idx_expenses_currency ON expenses(currency);
CREATE INDEX IF NOT EXISTS idx_income_currency ON income(currency);
```

### üìù –ú–∏–≥—Ä–∞—Ü–∏—è —Å –≤–µ—Ä—Å–∏–∏ 1.x

1. **–û–±–Ω–æ–≤–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∏–∑ migrations/add_currency_field.sql
psql -h your-supabase-host -U postgres -d postgres -f migrations/add_currency_field.sql
```

2. **–û–±–Ω–æ–≤–∏—Ç–µ n8n workflow:**
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `AnaliziFinance.json`
- –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é Add_expense –∏ Add_income –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

3. **–û–±–Ω–æ–≤–∏—Ç–µ Mini App:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `TelegramMiniApp.html` –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
- –°–æ–∑–¥–∞–π—Ç–µ `miniapp-config.js` –∏–∑ `miniapp-config.example.js`
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
```javascript
// –°—Ç–∞—Ä—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–µ–∑ currency –±—É–¥—É—Ç –∏–º–µ—Ç—å 'KGS' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
SELECT * FROM expenses WHERE currency IS NULL;
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —Ñ–æ—Ä–º–∞ –Ω–µ –æ—á–∏—â–∞–ª–∞—Å—å –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–ª–∞—Å—å
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –≤—Ä–µ–º—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–æ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ ‚ÇΩ –≤–º–µ—Å—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∞–ª—é—Ç—ã
- –£–ª—É—á—à–µ–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö
- –£–ª—É—á—à–µ–Ω–æ: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—É—Å—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–∏

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ HTML (—Å–∂–∞—Ç–∏–µ CSS)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: lazy loading –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ telegram_user_id
- –£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π (—á–µ—Ä–µ–∑ Supabase RLS)

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω `MINIAPP_SETUP.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω `miniapp-config.example.js` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω `CHANGELOG.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª
- üîÑ –û–±–Ω–æ–≤–ª—ë–Ω `README.md` - —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏

---

## [1.0.0] - –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤
- –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot

---

## üîÆ –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ (v2.1+)

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [ ] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] PDF –æ—Ç—á—ë—Ç—ã —Å –±—Ä–µ–Ω–¥–∏–Ω–≥–æ–º
- [ ] –ë—é–¥–∂–µ—Ç—ã —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- [ ] Recurring transactions (–ø–æ–¥–ø–∏—Å–∫–∏)
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—á–µ—Ç–∞ (–∫–æ—à–µ–ª—å–∫–∏)
- [ ] –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ (–∫–∞—Å—Ç–æ–º–Ω–∞—è)
- [ ] –í–∏–¥–∂–µ—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### –ò–¥–µ–∏
- [ ] –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] QR-—Å–∫–∞–Ω–µ—Ä —á–µ–∫–æ–≤
- [ ] OCR –¥–ª—è —á–µ–∫–æ–≤
- [ ] –ò–º–ø–æ—Ä—Ç –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–æ–∫
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ 1C
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM
- [ ] –ú—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º (—Å–µ–º—å—è/–∫–æ–º–∞–Ω–¥–∞)
- [ ] –¶–µ–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
- [ ] –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å

---

**üìÖ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 28 —è–Ω–≤–∞—Ä—è 2025  
**üè∑Ô∏è –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 2.0.0  
**üë®‚Äçüíª –ê–≤—Ç–æ—Ä:** AI Accounter Team
